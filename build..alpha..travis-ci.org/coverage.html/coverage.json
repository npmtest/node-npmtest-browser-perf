{"/home/travis/build/npmtest/node-npmtest-browser-perf/test.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/test.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":2,"40":2,"41":1,"42":2,"43":2,"44":1,"45":2,"46":2,"47":1,"48":2,"49":2,"50":1,"51":1,"52":1,"53":1,"54":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1],"9":[1,1],"10":[1,1,1],"11":[1,1],"12":[1,1],"13":[1,1],"14":[1,1],"15":[1,1],"16":[1,1],"17":[1,1]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":5},"end":{"line":61,"column":17}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":5},"end":{"line":82,"column":17}}},"6":{"name":"(anonymous_6)","line":91,"loc":{"start":{"line":91,"column":77},"end":{"line":94,"column":10}}},"7":{"name":"(anonymous_7)","line":112,"loc":{"start":{"line":112,"column":83},"end":{"line":115,"column":10}},"skip":true},"8":{"name":"(anonymous_8)","line":123,"loc":{"start":{"line":123,"column":77},"end":{"line":126,"column":10}},"skip":true},"9":{"name":"(anonymous_9)","line":139,"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":40}},"skip":true},"10":{"name":"(anonymous_10)","line":147,"loc":{"start":{"line":147,"column":77},"end":{"line":150,"column":10}},"skip":true},"11":{"name":"(anonymous_11)","line":158,"loc":{"start":{"line":158,"column":83},"end":{"line":161,"column":10}},"skip":true},"12":{"name":"(anonymous_12)","line":169,"loc":{"start":{"line":169,"column":79},"end":{"line":172,"column":10}},"skip":true},"13":{"name":"(anonymous_13)","line":180,"loc":{"start":{"line":180,"column":75},"end":{"line":183,"column":10}},"skip":true}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":195,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":56,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"11":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},"13":{"start":{"line":50,"column":12},"end":{"line":51,"column":46}},"14":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"15":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"16":{"start":{"line":61,"column":4},"end":{"line":63,"column":9}},"17":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"18":{"start":{"line":64,"column":4},"end":{"line":77,"column":5}},"19":{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":14}},"21":{"start":{"line":82,"column":4},"end":{"line":84,"column":9}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":15}},"23":{"start":{"line":85,"column":4},"end":{"line":194,"column":5}},"24":{"start":{"line":91,"column":8},"end":{"line":99,"column":10}},"25":{"start":{"line":98,"column":12},"end":{"line":98,"column":35}},"26":{"start":{"line":102,"column":8},"end":{"line":104,"column":63}},"27":{"start":{"line":105,"column":8},"end":{"line":105,"column":14}},"28":{"start":{"line":112,"column":8},"end":{"line":121,"column":10},"skip":true},"29":{"start":{"line":119,"column":12},"end":{"line":119,"column":55},"skip":true},"30":{"start":{"line":120,"column":12},"end":{"line":120,"column":48},"skip":true},"31":{"start":{"line":123,"column":8},"end":{"line":136,"column":10},"skip":true},"32":{"start":{"line":130,"column":12},"end":{"line":130,"column":76},"skip":true},"33":{"start":{"line":131,"column":12},"end":{"line":131,"column":73},"skip":true},"34":{"start":{"line":132,"column":12},"end":{"line":132,"column":74},"skip":true},"35":{"start":{"line":133,"column":12},"end":{"line":133,"column":79},"skip":true},"36":{"start":{"line":134,"column":12},"end":{"line":134,"column":25},"skip":true},"37":{"start":{"line":135,"column":12},"end":{"line":135,"column":45},"skip":true},"38":{"start":{"line":138,"column":8},"end":{"line":145,"column":14},"skip":true},"39":{"start":{"line":143,"column":16},"end":{"line":143,"column":29},"skip":true},"40":{"start":{"line":144,"column":16},"end":{"line":144,"column":55},"skip":true},"41":{"start":{"line":147,"column":8},"end":{"line":156,"column":10},"skip":true},"42":{"start":{"line":154,"column":12},"end":{"line":154,"column":25},"skip":true},"43":{"start":{"line":155,"column":12},"end":{"line":155,"column":45},"skip":true},"44":{"start":{"line":158,"column":8},"end":{"line":167,"column":10},"skip":true},"45":{"start":{"line":165,"column":12},"end":{"line":165,"column":25},"skip":true},"46":{"start":{"line":166,"column":12},"end":{"line":166,"column":48},"skip":true},"47":{"start":{"line":169,"column":8},"end":{"line":178,"column":10},"skip":true},"48":{"start":{"line":176,"column":12},"end":{"line":176,"column":25},"skip":true},"49":{"start":{"line":177,"column":12},"end":{"line":177,"column":46},"skip":true},"50":{"start":{"line":180,"column":8},"end":{"line":189,"column":10},"skip":true},"51":{"start":{"line":187,"column":12},"end":{"line":187,"column":94},"skip":true},"52":{"start":{"line":188,"column":12},"end":{"line":188,"column":48},"skip":true},"53":{"start":{"line":192,"column":8},"end":{"line":192,"column":35},"skip":true},"54":{"start":{"line":193,"column":8},"end":{"line":193,"column":14},"skip":true}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":40,"type":"switch","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":18}},{"start":{"line":49,"column":8},"end":{"line":52,"column":18}}]},"5":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},{"start":{"line":44,"column":48},"end":{"line":44,"column":66}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":21},"end":{"line":50,"column":49}},{"start":{"line":50,"column":53},"end":{"line":50,"column":72}}]},"7":{"line":64,"type":"switch","locations":[{"start":{"line":69,"column":4},"end":{"line":70,"column":14}},{"start":{"line":75,"column":4},"end":{"line":76,"column":14}}]},"8":{"line":85,"type":"switch","locations":[{"start":{"line":90,"column":4},"end":{"line":105,"column":14}},{"start":{"line":111,"column":4},"end":{"line":193,"column":14},"skip":true}]},"9":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":42},"end":{"line":91,"column":73}},{"start":{"line":91,"column":77},"end":{"line":99,"column":9}}]},"10":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":18},"end":{"line":102,"column":32}},{"start":{"line":103,"column":12},"end":{"line":103,"column":53}},{"start":{"line":104,"column":12},"end":{"line":104,"column":61}}]},"11":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":45},"end":{"line":112,"column":79},"skip":true},{"start":{"line":112,"column":83},"end":{"line":121,"column":9},"skip":true}]},"12":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":42},"end":{"line":123,"column":73},"skip":true},{"start":{"line":123,"column":77},"end":{"line":136,"column":9},"skip":true}]},"13":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":48},"end":{"line":138,"column":85},"skip":true},{"start":{"line":139,"column":12},"end":{"line":145,"column":13},"skip":true}]},"14":{"line":147,"type":"binary-expr","locations":[{"start":{"line":147,"column":42},"end":{"line":147,"column":73},"skip":true},{"start":{"line":147,"column":77},"end":{"line":156,"column":9},"skip":true}]},"15":{"line":158,"type":"binary-expr","locations":[{"start":{"line":158,"column":45},"end":{"line":158,"column":79},"skip":true},{"start":{"line":158,"column":83},"end":{"line":167,"column":9},"skip":true}]},"16":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":43},"end":{"line":169,"column":75},"skip":true},{"start":{"line":169,"column":79},"end":{"line":178,"column":9},"skip":true}]},"17":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":41},"end":{"line":180,"column":71},"skip":true},{"start":{"line":180,"column":75},"end":{"line":189,"column":9},"skip":true}]}},"code":["/* istanbul instrument in package npmtest_browser_perf */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        switch (local.modeJs) {","        // re-init local from window.local","        case 'browser':","            local = local.global.utility2.objectSetDefault(","                local.global.utility2_rollup || local.global.local,","                local.global.utility2","            );","            break;","        // re-init local from example.js","        case 'node':","            local = (local.global.utility2_rollup || require('utility2'))","                .requireExampleJsFromReadme();","            break;","        }","        // export local","        local.global.local = local;","    }());","","","","    // run shared js-env code - function","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - function","    case 'browser':","        break;","","","","    // run node js-env code - function","    case 'node':","        break;","    }","","","","    // run shared js-env code - post-init","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - post-init","    case 'browser':","        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (","            options,","            onError","        ) {","        /*","         * this function will test browsers's null-case handling-behavior-behavior","         */","            onError(null, options);","        };","","        // run tests","        local.nop(local.modeTest &&","            document.querySelector('#testRunButton1') &&","            document.querySelector('#testRunButton1').click());","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApidoc's default handling-behavior-behavior","         */","            options = { modulePathList: module.paths };","            local.buildApidoc(options, onError);","        };","","        local.testCase_buildApp_default = local.testCase_buildApp_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApp's default handling-behavior-behavior","         */","            local.testCase_buildReadme_default(options, local.onErrorThrow);","            local.testCase_buildLib_default(options, local.onErrorThrow);","            local.testCase_buildTest_default(options, local.onErrorThrow);","            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);","            options = [];","            local.buildApp(options, onError);","        };","","        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||","            function (options, onError) {","            /*","             * this function will test buildCustomOrg's default handling-behavior","             */","                options = {};","                local.buildCustomOrg(options, onError);","            };","","        local.testCase_buildLib_default = local.testCase_buildLib_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildLib's default handling-behavior","         */","            options = {};","            local.buildLib(options, onError);","        };","","        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildReadme's default handling-behavior-behavior","         */","            options = {};","            local.buildReadme(options, onError);","        };","","        local.testCase_buildTest_default = local.testCase_buildTest_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildTest's default handling-behavior","         */","            options = {};","            local.buildTest(options, onError);","        };","","        local.testCase_webpage_default = local.testCase_webpage_default || function (","            options,","            onError","        ) {","        /*","         * this function will test webpage's default handling-behavior","         */","            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };","            local.browserTest(options, onError);","        };","","        // run test-server","        local.testRunServer(local);","        break;","    }","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"40":2,"43":1,"47":1,"50":1,"52":1,"55":2,"61":2,"62":2,"64":2,"70":1,"76":1,"82":2,"83":2,"85":2,"91":1,"98":1,"102":1,"105":1,"112":1,"119":1,"120":1,"123":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":1,"138":1,"143":2,"144":2,"147":1,"154":2,"155":2,"158":1,"165":2,"166":2,"169":1,"176":2,"177":2,"180":1,"187":1,"188":1,"192":1,"193":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/lib.npmtest_browser_perf.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/lib.npmtest_browser_perf.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1]},"f":{"1":2,"2":2,"3":2},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":53,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":52,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":57}},"12":{"start":{"line":45,"column":8},"end":{"line":51,"column":9}},"13":{"start":{"line":46,"column":12},"end":{"line":46,"column":63}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":44}},{"start":{"line":41,"column":48},"end":{"line":41,"column":53}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]}},"code":["/* istanbul instrument in package npmtest_browser_perf */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || local;","        // init lib","        local.local = local.npmtest_browser_perf = local;","        // init exports","        if (local.modeJs === 'browser') {","            local.global.utility2_npmtest_browser_perf = local;","        } else {","            module.exports = local;","            module.exports.__dirname = __dirname;","            module.exports.module = module;","        }","    }());","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"41":2,"43":2,"45":2,"46":1,"48":1,"49":1,"50":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/example.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/example.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":0,"32":0,"33":0,"34":1,"35":2,"36":2,"37":3,"38":3,"39":3,"40":3,"41":0,"42":3,"43":3,"44":3,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":6,"60":6,"61":1,"62":2,"63":0,"64":2,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1],"6":[1,1],"7":[2,0],"8":[2,1,1,1,1,1],"9":[0,2,0],"10":[1,1],"11":[2,1,1],"12":[1,0],"13":[0,2],"14":[2,0,0,0,0,0,0],"15":[0,3],"16":[3,0],"17":[1,1],"18":[0,1],"19":[1,2,0,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":3,"8":3,"9":3,"10":1,"11":6,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":5},"end":{"line":33,"column":17}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":31},"end":{"line":69,"column":48}},"skip":true},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"skip":true},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":48}},"skip":true},"7":{"name":"(anonymous_7)","line":125,"loc":{"start":{"line":125,"column":27},"end":{"line":125,"column":39}},"skip":true},"8":{"name":"(anonymous_8)","line":133,"loc":{"start":{"line":133,"column":59},"end":{"line":133,"column":74}},"skip":true},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":45},"end":{"line":143,"column":62}},"skip":true},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":73},"end":{"line":144,"column":92}},"skip":true},"11":{"name":"(anonymous_11)","line":272,"loc":{"start":{"line":272,"column":51},"end":{"line":272,"column":77}},"skip":true},"12":{"name":"(anonymous_12)","line":315,"loc":{"start":{"line":315,"column":32},"end":{"line":315,"column":61}},"skip":true}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":326,"column":5}},"2":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"3":{"start":{"line":33,"column":4},"end":{"line":60,"column":9}},"4":{"start":{"line":35,"column":8},"end":{"line":35,"column":19}},"5":{"start":{"line":37,"column":8},"end":{"line":49,"column":13}},"6":{"start":{"line":38,"column":12},"end":{"line":48,"column":13}},"7":{"start":{"line":39,"column":16},"end":{"line":42,"column":30}},"8":{"start":{"line":44,"column":16},"end":{"line":47,"column":27}},"9":{"start":{"line":51,"column":8},"end":{"line":53,"column":21}},"10":{"start":{"line":55,"column":8},"end":{"line":57,"column":45}},"11":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"12":{"start":{"line":61,"column":4},"end":{"line":325,"column":5}},"13":{"start":{"line":69,"column":8},"end":{"line":121,"column":10},"skip":true},"14":{"start":{"line":70,"column":12},"end":{"line":88,"column":13},"skip":true},"15":{"start":{"line":76,"column":16},"end":{"line":87,"column":19},"skip":true},"16":{"start":{"line":79,"column":20},"end":{"line":86,"column":21},"skip":true},"17":{"start":{"line":82,"column":24},"end":{"line":82,"column":43},"skip":true},"18":{"start":{"line":83,"column":24},"end":{"line":83,"column":30},"skip":true},"19":{"start":{"line":85,"column":24},"end":{"line":85,"column":49},"skip":true},"20":{"start":{"line":89,"column":12},"end":{"line":107,"column":13},"skip":true},"21":{"start":{"line":92,"column":16},"end":{"line":102,"column":17},"skip":true},"22":{"start":{"line":93,"column":20},"end":{"line":93,"column":86},"skip":true},"23":{"start":{"line":94,"column":20},"end":{"line":95,"column":45},"skip":true},"24":{"start":{"line":96,"column":20},"end":{"line":96,"column":42},"skip":true},"25":{"start":{"line":97,"column":20},"end":{"line":97,"column":48},"skip":true},"26":{"start":{"line":100,"column":20},"end":{"line":100,"column":85},"skip":true},"27":{"start":{"line":101,"column":20},"end":{"line":101,"column":96},"skip":true},"28":{"start":{"line":103,"column":16},"end":{"line":103,"column":22},"skip":true},"29":{"start":{"line":106,"column":16},"end":{"line":106,"column":22},"skip":true},"30":{"start":{"line":108,"column":12},"end":{"line":120,"column":13},"skip":true},"31":{"start":{"line":114,"column":16},"end":{"line":119,"column":17},"skip":true},"32":{"start":{"line":116,"column":20},"end":{"line":116,"column":78},"skip":true},"33":{"start":{"line":118,"column":20},"end":{"line":118,"column":47},"skip":true},"34":{"start":{"line":123,"column":8},"end":{"line":141,"column":11},"skip":true},"35":{"start":{"line":124,"column":12},"end":{"line":124,"column":54},"skip":true},"36":{"start":{"line":125,"column":12},"end":{"line":140,"column":14},"skip":true},"37":{"start":{"line":126,"column":16},"end":{"line":126,"column":28},"skip":true},"38":{"start":{"line":127,"column":16},"end":{"line":127,"column":69},"skip":true},"39":{"start":{"line":128,"column":16},"end":{"line":128,"column":75},"skip":true},"40":{"start":{"line":129,"column":16},"end":{"line":131,"column":17},"skip":true},"41":{"start":{"line":130,"column":20},"end":{"line":130,"column":27},"skip":true},"42":{"start":{"line":133,"column":16},"end":{"line":137,"column":36},"skip":true},"43":{"start":{"line":134,"column":20},"end":{"line":136,"column":55},"skip":true},"44":{"start":{"line":139,"column":16},"end":{"line":139,"column":57},"skip":true},"45":{"start":{"line":143,"column":8},"end":{"line":147,"column":11},"skip":true},"46":{"start":{"line":144,"column":12},"end":{"line":146,"column":15},"skip":true},"47":{"start":{"line":145,"column":16},"end":{"line":145,"column":70},"skip":true},"48":{"start":{"line":149,"column":8},"end":{"line":149,"column":31},"skip":true},"49":{"start":{"line":150,"column":8},"end":{"line":150,"column":14},"skip":true},"50":{"start":{"line":158,"column":8},"end":{"line":158,"column":31},"skip":true},"51":{"start":{"line":160,"column":8},"end":{"line":160,"column":33},"skip":true},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":37},"skip":true},"53":{"start":{"line":162,"column":8},"end":{"line":162,"column":35},"skip":true},"54":{"start":{"line":164,"column":8},"end":{"line":164,"column":50},"skip":true},"55":{"start":{"line":166,"column":8},"end":{"line":256,"column":2},"skip":true},"56":{"start":{"line":258,"column":8},"end":{"line":286,"column":9},"skip":true},"57":{"start":{"line":259,"column":12},"end":{"line":269,"column":14},"skip":true},"58":{"start":{"line":271,"column":12},"end":{"line":285,"column":19},"skip":true},"59":{"start":{"line":274,"column":20},"end":{"line":274,"column":35},"skip":true},"60":{"start":{"line":275,"column":20},"end":{"line":284,"column":21},"skip":true},"61":{"start":{"line":277,"column":24},"end":{"line":277,"column":64},"skip":true},"62":{"start":{"line":279,"column":24},"end":{"line":279,"column":40},"skip":true},"63":{"start":{"line":281,"column":24},"end":{"line":281,"column":40},"skip":true},"64":{"start":{"line":283,"column":24},"end":{"line":283,"column":39},"skip":true},"65":{"start":{"line":288,"column":8},"end":{"line":290,"column":9},"skip":true},"66":{"start":{"line":289,"column":12},"end":{"line":289,"column":18},"skip":true},"67":{"start":{"line":291,"column":8},"end":{"line":293,"column":54},"skip":true},"68":{"start":{"line":296,"column":8},"end":{"line":301,"column":37},"skip":true},"69":{"start":{"line":303,"column":8},"end":{"line":303,"column":82},"skip":true},"70":{"start":{"line":306,"column":8},"end":{"line":308,"column":9},"skip":true},"71":{"start":{"line":307,"column":12},"end":{"line":307,"column":82},"skip":true},"72":{"start":{"line":310,"column":8},"end":{"line":312,"column":9},"skip":true},"73":{"start":{"line":311,"column":12},"end":{"line":311,"column":18},"skip":true},"74":{"start":{"line":313,"column":8},"end":{"line":313,"column":54},"skip":true},"75":{"start":{"line":314,"column":8},"end":{"line":314,"column":69},"skip":true},"76":{"start":{"line":315,"column":8},"end":{"line":323,"column":36},"skip":true},"77":{"start":{"line":316,"column":12},"end":{"line":316,"column":61},"skip":true},"78":{"start":{"line":317,"column":12},"end":{"line":320,"column":13},"skip":true},"79":{"start":{"line":318,"column":16},"end":{"line":318,"column":75},"skip":true},"80":{"start":{"line":319,"column":16},"end":{"line":319,"column":23},"skip":true},"81":{"start":{"line":321,"column":12},"end":{"line":321,"column":38},"skip":true},"82":{"start":{"line":322,"column":12},"end":{"line":322,"column":27},"skip":true},"83":{"start":{"line":324,"column":8},"end":{"line":324,"column":14},"skip":true}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":23},"end":{"line":39,"column":62}},{"start":{"line":40,"column":20},"end":{"line":40,"column":70}},{"start":{"line":41,"column":20},"end":{"line":41,"column":71}},{"start":{"line":42,"column":20},"end":{"line":42,"column":29}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},{"start":{"line":45,"column":20},"end":{"line":45,"column":61}},{"start":{"line":46,"column":20},"end":{"line":46,"column":70}},{"start":{"line":47,"column":20},"end":{"line":47,"column":26}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},{"start":{"line":53,"column":14},"end":{"line":53,"column":20}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":44}},{"start":{"line":55,"column":49},"end":{"line":57,"column":43}}]},"5":{"line":55,"type":"cond-expr","locations":[{"start":{"line":56,"column":14},"end":{"line":56,"column":56}},{"start":{"line":57,"column":14},"end":{"line":57,"column":43}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":68,"column":4},"end":{"line":150,"column":14},"skip":true},{"start":{"line":156,"column":4},"end":{"line":324,"column":14},"skip":true}]},"7":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true},{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true}]},"8":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":22},"skip":true},{"start":{"line":70,"column":27},"end":{"line":70,"column":32},"skip":true},{"start":{"line":71,"column":20},"end":{"line":71,"column":39},"skip":true},{"start":{"line":72,"column":20},"end":{"line":72,"column":49},"skip":true},{"start":{"line":73,"column":20},"end":{"line":73,"column":58},"skip":true},{"start":{"line":74,"column":20},"end":{"line":74,"column":69},"skip":true}]},"9":{"line":79,"type":"switch","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":33},"skip":true},{"start":{"line":81,"column":20},"end":{"line":83,"column":30},"skip":true},{"start":{"line":84,"column":20},"end":{"line":85,"column":49},"skip":true}]},"10":{"line":89,"type":"switch","locations":[{"start":{"line":90,"column":12},"end":{"line":103,"column":22},"skip":true},{"start":{"line":105,"column":12},"end":{"line":106,"column":22},"skip":true}]},"11":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":25},"skip":true},{"start":{"line":89,"column":29},"end":{"line":89,"column":48},"skip":true},{"start":{"line":89,"column":52},"end":{"line":89,"column":74},"skip":true}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true},{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true},{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true}]},"14":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":61},"skip":true},{"start":{"line":108,"column":66},"end":{"line":108,"column":72},"skip":true},{"start":{"line":108,"column":77},"end":{"line":108,"column":82},"skip":true},{"start":{"line":109,"column":20},"end":{"line":109,"column":39},"skip":true},{"start":{"line":110,"column":20},"end":{"line":110,"column":49},"skip":true},{"start":{"line":111,"column":20},"end":{"line":111,"column":58},"skip":true},{"start":{"line":112,"column":20},"end":{"line":112,"column":68},"skip":true}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true},{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":29},"skip":true},{"start":{"line":136,"column":26},"end":{"line":136,"column":54},"skip":true}]},"17":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":27},"end":{"line":164,"column":43},"skip":true},{"start":{"line":164,"column":47},"end":{"line":164,"column":49},"skip":true}]},"18":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true},{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true}]},"19":{"line":275,"type":"switch","locations":[{"start":{"line":276,"column":20},"end":{"line":277,"column":64},"skip":true},{"start":{"line":278,"column":20},"end":{"line":279,"column":40},"skip":true},{"start":{"line":280,"column":20},"end":{"line":281,"column":40},"skip":true},{"start":{"line":282,"column":20},"end":{"line":283,"column":39},"skip":true}]},"20":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true},{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true}]},"21":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":40},"skip":true},{"start":{"line":288,"column":44},"end":{"line":288,"column":67},"skip":true}]},"22":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":12},"end":{"line":292,"column":50},"skip":true},{"start":{"line":293,"column":12},"end":{"line":293,"column":53},"skip":true}]},"23":{"line":297,"type":"binary-expr","locations":[{"start":{"line":297,"column":12},"end":{"line":297,"column":70},"skip":true},{"start":{"line":298,"column":12},"end":{"line":301,"column":36},"skip":true}]},"24":{"line":303,"type":"binary-expr","locations":[{"start":{"line":303,"column":43},"end":{"line":303,"column":75},"skip":true},{"start":{"line":303,"column":79},"end":{"line":303,"column":81},"skip":true}]},"25":{"line":306,"type":"if","locations":[{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true},{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true}]},"26":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true},{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true}]},"27":{"line":313,"type":"binary-expr","locations":[{"start":{"line":313,"column":27},"end":{"line":313,"column":43},"skip":true},{"start":{"line":313,"column":47},"end":{"line":313,"column":53},"skip":true}]},"28":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true},{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true}]}},"code":["/*","example.js","","quickstart example","","instruction","    1. save this script as example.js","    2. run the shell command:","        $ npm install npmtest-browser-perf && PORT=8081 node example.js","    3. play with the browser-demo on http://127.0.0.1:8081","*/","","","","/* istanbul instrument in package npmtest_browser_perf */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || (local.modeJs === 'browser'","            ? local.global.utility2_npmtest_browser_perf","            : global.utility2_moduleExports);","        // export local","        local.global.local = local;","    }());","    switch (local.modeJs) {","","","","    // post-init","    // run browser js-env code - post-init","    /* istanbul ignore next */","    case 'browser':","        local.testRunBrowser = function (event) {","            if (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('onreset'))) {","                // reset output","                Array.from(","                    document.querySelectorAll('body > .resettable')","                ).forEach(function (element) {","                    switch (element.tagName) {","                    case 'INPUT':","                    case 'TEXTAREA':","                        element.value = '';","                        break;","                    default:","                        element.textContent = '';","                    }","                });","            }","            switch (event && event.currentTarget && event.currentTarget.id) {","            case 'testRunButton1':","                // show tests","                if (document.querySelector('#testReportDiv1').style.display === 'none') {","                    document.querySelector('#testReportDiv1').style.display = 'block';","                    document.querySelector('#testRunButton1').textContent =","                        'hide internal test';","                    local.modeTest = true;","                    local.testRunDefault(local);","                // hide tests","                } else {","                    document.querySelector('#testReportDiv1').style.display = 'none';","                    document.querySelector('#testRunButton1').textContent = 'run internal test';","                }","                break;","            // custom-case","            default:","                break;","            }","            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('oneval')))) {","                // try to eval input-code","                try {","                    /*jslint evil: true*/","                    eval(document.querySelector('#inputTextareaEval1').value);","                } catch (errorCaught) {","                    console.error(errorCaught);","                }","            }","        };","        // log stderr and stdout to #outputTextareaStdout1","        ['error', 'log'].forEach(function (key) {","            console[key + '_original'] = console[key];","            console[key] = function () {","                var element;","                console[key + '_original'].apply(console, arguments);","                element = document.querySelector('#outputTextareaStdout1');","                if (!element) {","                    return;","                }","                // append text to #outputTextareaStdout1","                element.value += Array.from(arguments).map(function (arg) {","                    return typeof arg === 'string'","                        ? arg","                        : JSON.stringify(arg, null, 4);","                }).join(' ') + '\\n';","                // scroll textarea to bottom","                element.scrollTop = element.scrollHeight;","            };","        });","        // init event-handling","        ['change', 'click', 'keyup'].forEach(function (event) {","            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {","                element.addEventListener(event, local.testRunBrowser);","            });","        });","        // run tests","        local.testRunBrowser();","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        // export local","        module.exports = local;","        // require modules","        local.fs = require('fs');","        local.http = require('http');","        local.url = require('url');","        // init assets","        local.assetsDict = local.assetsDict || {};","        /* jslint-ignore-begin */","        local.assetsDict['/assets.index.template.html'] = '\\","<!doctype html>\\n\\","<html lang=\"en\">\\n\\","<head>\\n\\","<meta charset=\"UTF-8\">\\n\\","<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\","<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\","<style>\\n\\","/*csslint\\n\\","    box-sizing: false,\\n\\","    universal-selector: false\\n\\","*/\\n\\","* {\\n\\","    box-sizing: border-box;\\n\\","}\\n\\","body {\\n\\","    background: #dde;\\n\\","    font-family: Arial, Helvetica, sans-serif;\\n\\","    margin: 2rem;\\n\\","}\\n\\","body > * {\\n\\","    margin-bottom: 1rem;\\n\\","}\\n\\",".utility2FooterDiv {\\n\\","    margin-top: 20px;\\n\\","    text-align: center;\\n\\","}\\n\\","</style>\\n\\","<style>\\n\\","/*csslint\\n\\","*/\\n\\","textarea {\\n\\","    font-family: monospace;\\n\\","    height: 10rem;\\n\\","    width: 100%;\\n\\","}\\n\\","textarea[readonly] {\\n\\","    background: #ddd;\\n\\","}\\n\\","</style>\\n\\","</head>\\n\\","<body>\\n\\","<!-- utility2-comment\\n\\","<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\","utility2-comment -->\\n\\","<h1>\\n\\","<!-- utility2-comment\\n\\","    <a\\n\\","        {{#if env.npm_package_homepage}}\\n\\","        href=\"{{env.npm_package_homepage}}\"\\n\\","        {{/if env.npm_package_homepage}}\\n\\","        target=\"_blank\"\\n\\","    >\\n\\","utility2-comment -->\\n\\","        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\","<!-- utility2-comment\\n\\","    </a>\\n\\","utility2-comment -->\\n\\","</h1>\\n\\","<h3>{{env.npm_package_description}}</h3>\\n\\","<!-- utility2-comment\\n\\","<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\","<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\","<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\","utility2-comment -->\\n\\","\\n\\","\\n\\","\\n\\","<label>stderr and stdout</label>\\n\\","<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\","<!-- utility2-comment\\n\\","{{#if isRollup}}\\n\\","<script src=\"assets.app.js\"></script>\\n\\","{{#unless isRollup}}\\n\\","utility2-comment -->\\n\\","<script src=\"assets.utility2.rollup.js\"></script>\\n\\","<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\","<script src=\"assets.npmtest_browser_perf.rollup.js\"></script>\\n\\","<script src=\"assets.example.js\"></script>\\n\\","<script src=\"assets.test.js\"></script>\\n\\","<!-- utility2-comment\\n\\","{{/if isRollup}}\\n\\","utility2-comment -->\\n\\","<div class=\"utility2FooterDiv\">\\n\\","    [ this app was created with\\n\\","    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\","    ]\\n\\","</div>\\n\\","</body>\\n\\","</html>\\n\\","';","        /* jslint-ignore-end */","        if (local.templateRender) {","            local.assetsDict['/'] = local.templateRender(","                local.assetsDict['/assets.index.template.html'],","                {","                    env: local.objectSetDefault(local.env, {","                        npm_package_description: 'the greatest app in the world!',","                        npm_package_name: 'my-app',","                        npm_package_nameAlias: 'my_app',","                        npm_package_version: '0.0.1'","                    })","                }","            );","        } else {","            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']","                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {","                    // jslint-hack","                    String(match0);","                    switch (match1) {","                    case 'npm_package_description':","                        return 'the greatest app in the world!';","                    case 'npm_package_name':","                        return 'my-app';","                    case 'npm_package_nameAlias':","                        return 'my_app';","                    case 'npm_package_version':","                        return '0.0.1';","                    }","                });","        }","        // run the cli","        if (local.global.utility2_rollup || module !== require.main) {","            break;","        }","        local.assetsDict['/assets.example.js'] =","            local.assetsDict['/assets.example.js'] ||","            local.fs.readFileSync(__filename, 'utf8');","        // bug-workaround - long $npm_package_buildCustomOrg","        /* jslint-ignore-begin */","        local.assetsDict['/assets.npmtest_browser_perf.rollup.js'] =","            local.assetsDict['/assets.npmtest_browser_perf.rollup.js'] ||","            local.fs.readFileSync(","                local.npmtest_browser_perf.__dirname + '/lib.npmtest_browser_perf.js',","                'utf8'","            ).replace((/^#!/), '//');","        /* jslint-ignore-end */","        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';","        // if $npm_config_timeout_exit exists,","        // then exit this process after $npm_config_timeout_exit ms","        if (Number(process.env.npm_config_timeout_exit)) {","            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));","        }","        // start server","        if (local.global.utility2_serverHttp1) {","            break;","        }","        process.env.PORT = process.env.PORT || '8081';","        console.error('server starting on port ' + process.env.PORT);","        local.http.createServer(function (request, response) {","            request.urlParsed = local.url.parse(request.url);","            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {","                response.end(local.assetsDict[request.urlParsed.pathname]);","                return;","            }","            response.statusCode = 404;","            response.end();","        }).listen(process.env.PORT);","        break;","    }","}());",""],"l":{"26":2,"28":2,"33":2,"35":2,"37":2,"38":2,"39":2,"44":1,"51":2,"55":2,"59":2,"61":2,"69":1,"70":2,"76":2,"79":2,"82":2,"83":2,"85":1,"89":2,"92":1,"93":1,"94":1,"96":1,"97":1,"100":1,"101":1,"103":1,"106":1,"108":2,"114":1,"116":1,"118":1,"123":1,"124":2,"125":2,"126":3,"127":3,"128":3,"129":3,"130":1,"133":3,"134":3,"139":3,"143":1,"144":3,"145":1,"149":1,"150":1,"158":1,"160":1,"161":1,"162":1,"164":1,"166":1,"258":1,"259":1,"271":1,"274":6,"275":6,"277":1,"279":2,"281":1,"283":2,"288":1,"289":1,"291":1,"296":1,"303":1,"306":1,"307":1,"310":1,"311":1,"313":1,"314":1,"315":1,"316":1,"317":1,"318":1,"319":1,"321":1,"322":1,"324":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":0,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":1,"44":1,"45":1,"46":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,1],"5":[1,0],"6":[1,0],"7":[1,1],"8":[0,0],"9":[0,0]},"f":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":1,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"fnMap":{"1":{"name":"main","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":28}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":19},"end":{"line":17,"column":43}}},"3":{"name":"(anonymous_3)","line":18,"loc":{"start":{"line":18,"column":9},"end":{"line":18,"column":20}}},"4":{"name":"(anonymous_4)","line":19,"loc":{"start":{"line":19,"column":54},"end":{"line":19,"column":69}}},"5":{"name":"(anonymous_5)","line":23,"loc":{"start":{"line":23,"column":6},"end":{"line":23,"column":22}}},"6":{"name":"(anonymous_6)","line":30,"loc":{"start":{"line":30,"column":29},"end":{"line":30,"column":40}}},"7":{"name":"(anonymous_7)","line":32,"loc":{"start":{"line":32,"column":4},"end":{"line":32,"column":18}}},"8":{"name":"runOnBrowser","line":38,"loc":{"start":{"line":38,"column":0},"end":{"line":38,"column":48}}},"9":{"name":"(anonymous_9)","line":41,"loc":{"start":{"line":41,"column":22},"end":{"line":41,"column":37}}},"10":{"name":"(anonymous_10)","line":44,"loc":{"start":{"line":44,"column":23},"end":{"line":44,"column":50}}},"11":{"name":"(anonymous_11)","line":54,"loc":{"start":{"line":54,"column":33},"end":{"line":54,"column":44}}},"12":{"name":"(anonymous_12)","line":56,"loc":{"start":{"line":56,"column":9},"end":{"line":56,"column":20}}},"13":{"name":"(anonymous_13)","line":59,"loc":{"start":{"line":59,"column":9},"end":{"line":59,"column":20}}},"14":{"name":"(anonymous_14)","line":63,"loc":{"start":{"line":63,"column":9},"end":{"line":63,"column":20}}},"15":{"name":"(anonymous_15)","line":67,"loc":{"start":{"line":67,"column":9},"end":{"line":67,"column":20}}},"16":{"name":"(anonymous_16)","line":69,"loc":{"start":{"line":69,"column":9},"end":{"line":69,"column":20}}},"17":{"name":"(anonymous_17)","line":71,"loc":{"start":{"line":71,"column":9},"end":{"line":71,"column":20}}},"18":{"name":"(anonymous_18)","line":73,"loc":{"start":{"line":73,"column":9},"end":{"line":73,"column":20}}},"19":{"name":"(anonymous_19)","line":75,"loc":{"start":{"line":75,"column":8},"end":{"line":75,"column":19}}},"20":{"name":"(anonymous_20)","line":77,"loc":{"start":{"line":77,"column":31},"end":{"line":77,"column":42}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":5,"column":32}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":36}},"3":{"start":{"line":11,"column":0},"end":{"line":35,"column":1}},"4":{"start":{"line":12,"column":1},"end":{"line":14,"column":15}},"5":{"start":{"line":15,"column":1},"end":{"line":16,"column":11}},"6":{"start":{"line":17,"column":1},"end":{"line":34,"column":11}},"7":{"start":{"line":18,"column":2},"end":{"line":29,"column":3}},"8":{"start":{"line":19,"column":3},"end":{"line":28,"column":6}},"9":{"start":{"line":20,"column":4},"end":{"line":20,"column":50}},"10":{"start":{"line":21,"column":4},"end":{"line":21,"column":20}},"11":{"start":{"line":22,"column":4},"end":{"line":22,"column":19}},"12":{"start":{"line":24,"column":4},"end":{"line":26,"column":5}},"13":{"start":{"line":25,"column":5},"end":{"line":25,"column":39}},"14":{"start":{"line":27,"column":4},"end":{"line":27,"column":20}},"15":{"start":{"line":31,"column":2},"end":{"line":31,"column":46}},"16":{"start":{"line":33,"column":2},"end":{"line":33,"column":10}},"17":{"start":{"line":38,"column":0},"end":{"line":82,"column":1}},"18":{"start":{"line":39,"column":1},"end":{"line":39,"column":43}},"19":{"start":{"line":40,"column":1},"end":{"line":40,"column":60}},"20":{"start":{"line":41,"column":1},"end":{"line":43,"column":4}},"21":{"start":{"line":44,"column":1},"end":{"line":49,"column":4}},"22":{"start":{"line":45,"column":2},"end":{"line":47,"column":3}},"23":{"start":{"line":46,"column":3},"end":{"line":46,"column":35}},"24":{"start":{"line":48,"column":2},"end":{"line":48,"column":76}},"25":{"start":{"line":51,"column":1},"end":{"line":51,"column":41}},"26":{"start":{"line":52,"column":1},"end":{"line":52,"column":41}},"27":{"start":{"line":54,"column":1},"end":{"line":81,"column":4}},"28":{"start":{"line":55,"column":2},"end":{"line":55,"column":29}},"29":{"start":{"line":57,"column":2},"end":{"line":57,"column":61}},"30":{"start":{"line":58,"column":2},"end":{"line":58,"column":37}},"31":{"start":{"line":60,"column":2},"end":{"line":60,"column":41}},"32":{"start":{"line":61,"column":2},"end":{"line":61,"column":27}},"33":{"start":{"line":62,"column":2},"end":{"line":62,"column":33}},"34":{"start":{"line":64,"column":2},"end":{"line":66,"column":3}},"35":{"start":{"line":65,"column":3},"end":{"line":65,"column":27}},"36":{"start":{"line":68,"column":2},"end":{"line":68,"column":47}},"37":{"start":{"line":70,"column":2},"end":{"line":70,"column":49}},"38":{"start":{"line":72,"column":2},"end":{"line":72,"column":50}},"39":{"start":{"line":74,"column":2},"end":{"line":74,"column":30}},"40":{"start":{"line":76,"column":2},"end":{"line":80,"column":3}},"41":{"start":{"line":77,"column":3},"end":{"line":79,"column":6}},"42":{"start":{"line":78,"column":4},"end":{"line":78,"column":15}},"43":{"start":{"line":84,"column":0},"end":{"line":84,"column":22}},"44":{"start":{"line":85,"column":0},"end":{"line":85,"column":41}},"45":{"start":{"line":86,"column":0},"end":{"line":86,"column":44}},"46":{"start":{"line":87,"column":0},"end":{"line":87,"column":41}}},"branchMap":{"1":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":24,"column":4}},{"start":{"line":24,"column":4},"end":{"line":24,"column":4}}]},"2":{"line":24,"type":"binary-expr","locations":[{"start":{"line":24,"column":8},"end":{"line":24,"column":33}},{"start":{"line":24,"column":37},"end":{"line":24,"column":66}}]},"3":{"line":31,"type":"cond-expr","locations":[{"start":{"line":31,"column":24},"end":{"line":31,"column":33}},{"start":{"line":31,"column":36},"end":{"line":31,"column":39}}]},"4":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":2},"end":{"line":45,"column":2}},{"start":{"line":45,"column":2},"end":{"line":45,"column":2}}]},"5":{"line":45,"type":"binary-expr","locations":[{"start":{"line":45,"column":6},"end":{"line":45,"column":10}},{"start":{"line":45,"column":14},"end":{"line":45,"column":38}}]},"6":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":21},"end":{"line":48,"column":25}},{"start":{"line":48,"column":29},"end":{"line":48,"column":31}}]},"7":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":49},"end":{"line":48,"column":53}},{"start":{"line":48,"column":57},"end":{"line":48,"column":59}}]},"8":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":2},"end":{"line":64,"column":2}},{"start":{"line":64,"column":2},"end":{"line":64,"column":2}}]},"9":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":2},"end":{"line":76,"column":2}},{"start":{"line":76,"column":2},"end":{"line":76,"column":2}}]}},"code":["var Q = require('q'),","\twd = require('wd'),","\tActions = require('./actions'),","\tMetrics = require('./metrics'),","\thelpers = require('./helpers');","","var debug = require('debug'),","\tlog = debug('bp:index'),","\tseleniumLog = debug('bp:selenium');","","function main(url, cb, cfg) {","\tvar opts = require('./options').scrub(cfg),","\t\terrors = [],","\t\tresults = [];","\tvar res = [],","\t\terr = [];","\topts.browsers.map(function(browserConfig) {","\t\treturn function() {","\t\t\treturn runOnBrowser(url, browserConfig, opts).then(function(data) {","\t\t\t\tdata._browserName = browserConfig.browserName;","\t\t\t\tdata._url = url;","\t\t\t\tres.push(data);","\t\t\t}, function(error) {","\t\t\t\tif (typeof error === \"object\" && error.code === 'ECONNREFUSED') {","\t\t\t\t\terror.errno = 'GRID_CONFIG_ERROR';","\t\t\t\t}","\t\t\t\terr.push(error);","\t\t\t});","\t\t}","\t}).reduce(Q.when, Q()).then(function() {","\t\tcb(err.length === 0 ? undefined : err, res);","\t}, function(err) {","\t\tcb(err);","\t}).done();","}","","","function runOnBrowser(url, browserConfig, opts) {","\tbrowser = wd.promiseRemote(opts.selenium);","\tlog('Selenium is on %s', browser.noAuthConfigUrl.hostname);","\tbrowser.on('status', function(data) {","\t\t//seleniumLog(data);","\t});","\tbrowser.on('command', function(meth, path, data) {","\t\tif (data && typeof data === 'object') {","\t\t\tvar data = JSON.stringify(data);","\t\t}","\t\tseleniumLog(meth, (path || '').substr(0, 70), (data || '').substr(0, 70));","\t});","","\tvar metrics = new Metrics(opts.metrics);","\tvar actions = new Actions(opts.actions);","","\treturn metrics.setup(opts).then(function() {","\t\treturn actions.setup(opts);","\t}).then(function() {","\t\tlog('Stating browser with', JSON.stringify(browserConfig));","\t\treturn browser.init(browserConfig);","\t}).then(function() {","\t\tlog('Session is ' + browser.sessionID);","\t\tlog('Running Prescript');","\t\treturn opts.preScript(browser);","\t}).then(function() {","\t\tif (url) {","\t\t\treturn browser.get(url);","\t\t}","\t}).then(function() {","\t\treturn metrics.start(browser, browserConfig);","\t}).then(function() {","\t\treturn actions.perform(browser, browserConfig);","\t}).then(function() {","\t\treturn metrics.teardown(browser, browserConfig);","\t}).then(function() {","\t\treturn metrics.getResults();","\t}).fin(function() {","\t\tif (!opts.debugBrowser) {","\t\t\treturn browser.quit().catch(function() {","\t\t\t\treturn Q();","\t\t\t});","\t\t}","\t});","}","","module.exports = main;","module.exports.actions = Actions.actions;","module.exports.runner = require('./runner');","module.exports.docs = require('../docs');"],"l":{"1":1,"7":1,"11":1,"12":1,"15":1,"17":1,"18":1,"19":1,"20":0,"21":0,"22":0,"24":0,"25":0,"27":0,"31":0,"33":0,"38":1,"39":1,"40":1,"41":1,"44":1,"45":1,"46":0,"48":1,"51":1,"52":1,"54":1,"55":1,"57":1,"58":1,"60":0,"61":0,"62":0,"64":0,"65":0,"68":0,"70":0,"72":0,"74":0,"76":0,"77":0,"78":0,"84":1,"85":1,"86":1,"87":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/actions/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/actions/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":1,"22":0,"23":0,"24":1,"25":1},"b":{"1":[1,0],"2":[1,1],"3":[0,0],"4":[1,0]},"f":{"1":1,"2":0,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0},"fnMap":{"1":{"name":"(anonymous_1)","line":9,"loc":{"start":{"line":9,"column":14},"end":{"line":9,"column":35}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":19},"end":{"line":10,"column":30}}},"3":{"name":"(anonymous_3)","line":13,"loc":{"start":{"line":13,"column":34},"end":{"line":13,"column":51}}},"4":{"name":"(anonymous_4)","line":24,"loc":{"start":{"line":24,"column":35},"end":{"line":24,"column":48}}},"5":{"name":"(anonymous_5)","line":25,"loc":{"start":{"line":25,"column":28},"end":{"line":25,"column":45}}},"6":{"name":"(anonymous_6)","line":26,"loc":{"start":{"line":26,"column":9},"end":{"line":26,"column":20}}},"7":{"name":"(anonymous_7)","line":32,"loc":{"start":{"line":32,"column":26},"end":{"line":32,"column":40}}},"8":{"name":"(anonymous_8)","line":33,"loc":{"start":{"line":33,"column":28},"end":{"line":33,"column":45}}},"9":{"name":"(anonymous_9)","line":42,"loc":{"start":{"line":42,"column":28},"end":{"line":42,"column":46}}},"10":{"name":"(anonymous_10)","line":43,"loc":{"start":{"line":43,"column":28},"end":{"line":43,"column":45}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"2":{"start":{"line":3,"column":0},"end":{"line":7,"column":2}},"3":{"start":{"line":9,"column":0},"end":{"line":22,"column":2}},"4":{"start":{"line":10,"column":1},"end":{"line":12,"column":3}},"5":{"start":{"line":11,"column":2},"end":{"line":11,"column":13}},"6":{"start":{"line":13,"column":1},"end":{"line":21,"column":4}},"7":{"start":{"line":14,"column":2},"end":{"line":20,"column":3}},"8":{"start":{"line":15,"column":3},"end":{"line":15,"column":35}},"9":{"start":{"line":16,"column":9},"end":{"line":20,"column":3}},"10":{"start":{"line":17,"column":3},"end":{"line":17,"column":17}},"11":{"start":{"line":19,"column":3},"end":{"line":19,"column":43}},"12":{"start":{"line":24,"column":0},"end":{"line":30,"column":2}},"13":{"start":{"line":25,"column":1},"end":{"line":29,"column":24}},"14":{"start":{"line":26,"column":2},"end":{"line":28,"column":3}},"15":{"start":{"line":27,"column":3},"end":{"line":27,"column":21}},"16":{"start":{"line":32,"column":0},"end":{"line":40,"column":2}},"17":{"start":{"line":33,"column":1},"end":{"line":39,"column":4}},"18":{"start":{"line":34,"column":2},"end":{"line":38,"column":3}},"19":{"start":{"line":35,"column":3},"end":{"line":35,"column":28}},"20":{"start":{"line":37,"column":3},"end":{"line":37,"column":14}},"21":{"start":{"line":42,"column":0},"end":{"line":46,"column":2}},"22":{"start":{"line":43,"column":1},"end":{"line":45,"column":4}},"23":{"start":{"line":44,"column":2},"end":{"line":44,"column":25}},"24":{"start":{"line":48,"column":0},"end":{"line":48,"column":25}},"25":{"start":{"line":49,"column":0},"end":{"line":49,"column":40}}},"branchMap":{"1":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":2},"end":{"line":14,"column":2}},{"start":{"line":14,"column":2},"end":{"line":14,"column":2}}]},"2":{"line":14,"type":"binary-expr","locations":[{"start":{"line":14,"column":6},"end":{"line":14,"column":32}},{"start":{"line":14,"column":36},"end":{"line":14,"column":74}}]},"3":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":9},"end":{"line":16,"column":9}},{"start":{"line":16,"column":9},"end":{"line":16,"column":9}}]},"4":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":2},"end":{"line":34,"column":2}},{"start":{"line":34,"column":2},"end":{"line":34,"column":2}}]}},"code":["var Q = require('q');","","var builtInActions = {","\tscroll: require('./scrollAction.js'),","\tlogin: require('./loginAction.js'),","\twait: require('./wait.js')","};","","var Actions = function(actionList) {","\tvar emptyAction = function() {","\t\treturn Q();","\t};","\tthis.actionList = actionList.map(function(action) {","\t\tif (typeof action === 'string' && builtInActions[action] !== 'undefined') {","\t\t\treturn builtInActions[action]();","\t\t} else if (typeof action === 'function') {","\t\t\treturn action;","\t\t} else {","\t\t\tthrow 'Could not find action ' + action;","\t\t}","\t});","};","","Actions.prototype.forEachAction_ = function(cb) {","\treturn this.actionList.map(function(action) {","\t\treturn function() {","\t\t\treturn cb(action);","\t\t}","\t}).reduce(Q.when, Q());","};","","Actions.prototype.setup = function(cfg) {","\treturn this.forEachAction_(function(action) {","\t\tif (typeof action.setup === 'function') {","\t\t\treturn action.setup(cfg);","\t\t} else {","\t\t\treturn Q();","\t\t}","\t});","};","","Actions.prototype.perform = function(browser) {","\treturn this.forEachAction_(function(action) {","\t\treturn action(browser);","\t});","};","","module.exports = Actions;","module.exports.actions = builtInActions;"],"l":{"1":1,"3":1,"9":1,"10":1,"11":0,"13":1,"14":1,"15":1,"16":0,"17":0,"19":0,"24":1,"25":1,"26":1,"27":1,"32":1,"33":1,"34":1,"35":1,"37":0,"42":1,"43":0,"44":0,"48":1,"49":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/actions/scrollAction.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/actions/scrollAction.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1},"b":{"1":[1,1],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[1,0],"7":[1,1,1]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":1,"7":1},"fnMap":{"1":{"name":"(anonymous_1)","line":20,"loc":{"start":{"line":20,"column":17},"end":{"line":20,"column":31}}},"2":{"name":"scroll","line":23,"loc":{"start":{"line":23,"column":1},"end":{"line":23,"column":26}}},"3":{"name":"(anonymous_3)","line":29,"loc":{"start":{"line":29,"column":15},"end":{"line":29,"column":30}}},"4":{"name":"(anonymous_4)","line":32,"loc":{"start":{"line":32,"column":46},"end":{"line":32,"column":57}}},"5":{"name":"(anonymous_5)","line":53,"loc":{"start":{"line":53,"column":11},"end":{"line":53,"column":22}}},"6":{"name":"(anonymous_6)","line":63,"loc":{"start":{"line":63,"column":16},"end":{"line":63,"column":30}}},"7":{"name":"(anonymous_7)","line":64,"loc":{"start":{"line":64,"column":34},"end":{"line":64,"column":52}}}},"statementMap":{"1":{"start":{"line":13,"column":0},"end":{"line":18,"column":33}},"2":{"start":{"line":20,"column":0},"end":{"line":78,"column":2}},"3":{"start":{"line":21,"column":1},"end":{"line":21,"column":17}},"4":{"start":{"line":23,"column":1},"end":{"line":61,"column":2}},"5":{"start":{"line":25,"column":2},"end":{"line":27,"column":99}},"6":{"start":{"line":29,"column":2},"end":{"line":43,"column":4}},"7":{"start":{"line":30,"column":3},"end":{"line":30,"column":40}},"8":{"start":{"line":31,"column":3},"end":{"line":31,"column":37}},"9":{"start":{"line":32,"column":3},"end":{"line":34,"column":6}},"10":{"start":{"line":33,"column":4},"end":{"line":33,"column":37}},"11":{"start":{"line":35,"column":3},"end":{"line":42,"column":6}},"12":{"start":{"line":45,"column":2},"end":{"line":45,"column":40}},"13":{"start":{"line":46,"column":2},"end":{"line":60,"column":4}},"14":{"start":{"line":54,"column":3},"end":{"line":54,"column":44}},"15":{"start":{"line":55,"column":3},"end":{"line":59,"column":6}},"16":{"start":{"line":63,"column":1},"end":{"line":75,"column":3}},"17":{"start":{"line":64,"column":2},"end":{"line":73,"column":5}},"18":{"start":{"line":65,"column":3},"end":{"line":71,"column":4}},"19":{"start":{"line":66,"column":4},"end":{"line":70,"column":7}},"20":{"start":{"line":72,"column":3},"end":{"line":72,"column":18}},"21":{"start":{"line":74,"column":2},"end":{"line":74,"column":16}},"22":{"start":{"line":77,"column":1},"end":{"line":77,"column":15}}},"branchMap":{"1":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":7},"end":{"line":21,"column":10}},{"start":{"line":21,"column":14},"end":{"line":21,"column":16}}]},"2":{"line":49,"type":"binary-expr","locations":[{"start":{"line":49,"column":14},"end":{"line":49,"column":27}},{"start":{"line":49,"column":31},"end":{"line":49,"column":37}}]},"3":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":10},"end":{"line":50,"column":19}},{"start":{"line":50,"column":23},"end":{"line":50,"column":26}}]},"4":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":7},"end":{"line":52,"column":24}},{"start":{"line":52,"column":28},"end":{"line":52,"column":43}}]},"5":{"line":58,"type":"binary-expr","locations":[{"start":{"line":58,"column":14},"end":{"line":58,"column":26}},{"start":{"line":58,"column":30},"end":{"line":58,"column":34}}]},"6":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":3},"end":{"line":65,"column":3}},{"start":{"line":65,"column":3},"end":{"line":65,"column":3}}]},"7":{"line":65,"type":"binary-expr","locations":[{"start":{"line":65,"column":7},"end":{"line":65,"column":26}},{"start":{"line":65,"column":31},"end":{"line":65,"column":68}},{"start":{"line":65,"column":72},"end":{"line":65,"column":108}}]}},"code":["/**","","\tcfg - <object> options for scrolling. Properties of cfg can be","\t","\tdirection <string>: up|down|left|right (default: down)","\tscrollElement <string>: Javascript code evaluated in browser to pick element to scroll (default: document.body)","\tspeed <number>: scroll speed (default: 800)","\tpollFreq <number>: frequency at which polling should be done to check if scroll is complete (default: 200)","","\tTo scroll a custom element, look at the wiki","","*/","var fs = require('fs'),","\twd = require('wd'),","\tQ = require('q'),","\tdebug = require('debug')('bp:actions:scroll'),","\tjsmin = require('jsmin').jsmin,","\thelpers = require('../helpers');","","module.exports = function(cfg) {","\tcfg = cfg || {};","","\tfunction scroll(browser) {","","\t\tvar raf_scroll = jsmin(fs.readFileSync(__dirname + '/page_scripts/raf_scroll.js', 'utf-8')),","\t\t\tchrome_scroll = jsmin(fs.readFileSync(__dirname + '/page_scripts/chrome_scroll.js', 'utf-8')),","\t\t\tgesture_common = jsmin(fs.readFileSync(__dirname + '/page_scripts/gesture_common.js', 'utf-8'));","","\t\tvar runner = function(opts) {","\t\t\tconsole.log(\"Scrolling with \", opts);","\t\t\twindow.__scrollActionDone = false;","\t\t\twindow.__scrollAction = new __ScrollAction(function() {","\t\t\t\twindow.__scrollActionDone = true;","\t\t\t});","\t\t\twindow.__scrollAction.start({","\t\t\t\telement: eval(opts.el),","\t\t\t\tleft_start_percentage: opts.left_start_percentage,","\t\t\t\ttop_start_percentage: opts.top_start_percentage,","\t\t\t\tdirection: opts.direction,","\t\t\t\tspeed: opts.speed,","\t\t\t\tgesture_source_type: opts.gesture_source_type","\t\t\t});","\t\t};","","\t\tdebug('Initializing Scroll function');","\t\treturn browser.execute(gesture_common + chrome_scroll + raf_scroll + helpers.fnCall(runner, {","\t\t\tleft_start_percentage: 0.5,","\t\t\ttop_start_percentage: 0.5,","\t\t\tdirection: cfg.direction || 'down',","\t\t\tspeed: cfg.speed || 800,","\t\t\tgesture_source_type: 0,","\t\t\tel: cfg.scrollElement || 'document.body'","\t\t})).then(function() {","\t\t\tdebug('Waiting for Scrolling to finish');","\t\t\treturn browser.waitFor({","\t\t\t\tasserter: wd.asserters.jsCondition('(window.__scrollActionDone === true)', false),","\t\t\t\ttimeout: 1000 * 60 * 10,","\t\t\t\tpollFreq: cfg.pollFreq || 2000","\t\t\t});","\t\t})","\t};","","\tscroll.setup = function(cfg) {","\t\tcfg.browsers = cfg.browsers.map(function(browser) {","\t\t\tif (browser.browserName && (browser.browserName.match(/android/i) || browser.browserName.match(/chrome/i))) {","\t\t\t\thelpers.extend(browser, {","\t\t\t\t\tchromeOptions: {","\t\t\t\t\t\targs: ['--enable-gpu-benchmarking', '--enable-thread-composting']","\t\t\t\t\t}","\t\t\t\t});","\t\t\t}","\t\t\treturn browser;","\t\t});","\t\treturn Q(cfg);","\t};","","\treturn scroll;","};",""],"l":{"13":1,"20":1,"21":1,"23":1,"25":0,"29":0,"30":0,"31":0,"32":0,"33":0,"35":0,"45":0,"46":0,"54":0,"55":0,"63":1,"64":1,"65":1,"66":1,"72":1,"74":1,"77":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/helpers.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/helpers.js","s":{"1":1,"2":9,"3":0,"4":9,"5":0,"6":9,"7":6,"8":0,"9":6,"10":3,"11":3,"12":9,"13":1,"14":2,"15":2,"16":2,"17":0,"18":2,"19":0,"20":2,"21":2,"22":1,"23":0,"24":1,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":1,"33":1,"34":0,"35":0,"36":0,"37":0},"b":{"1":[0,9],"2":[9,0],"3":[0,9],"4":[9,0],"5":[0,6],"6":[6,0],"7":[3,3],"8":[6,3,3,3],"9":[0,2],"10":[2,2],"11":[0,2],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},"f":{"1":9,"2":2,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":13},"end":{"line":1,"column":34}}},"2":{"name":"(anonymous_2)","line":20,"loc":{"start":{"line":20,"column":17},"end":{"line":20,"column":45}}},"3":{"name":"(anonymous_3)","line":35,"loc":{"start":{"line":35,"column":14},"end":{"line":35,"column":72}}},"4":{"name":"(anonymous_4)","line":46,"loc":{"start":{"line":46,"column":17},"end":{"line":46,"column":34}}},"5":{"name":"(anonymous_5)","line":51,"loc":{"start":{"line":51,"column":14},"end":{"line":51,"column":26}}},"6":{"name":"(anonymous_6)","line":62,"loc":{"start":{"line":62,"column":9},"end":{"line":62,"column":28}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":18,"column":1}},"2":{"start":{"line":2,"column":1},"end":{"line":4,"column":2}},"3":{"start":{"line":3,"column":2},"end":{"line":3,"column":12}},"4":{"start":{"line":5,"column":1},"end":{"line":7,"column":2}},"5":{"start":{"line":6,"column":2},"end":{"line":6,"column":12}},"6":{"start":{"line":8,"column":1},"end":{"line":16,"column":2}},"7":{"start":{"line":9,"column":2},"end":{"line":15,"column":3}},"8":{"start":{"line":10,"column":3},"end":{"line":10,"column":43}},"9":{"start":{"line":11,"column":9},"end":{"line":15,"column":3}},"10":{"start":{"line":12,"column":3},"end":{"line":12,"column":44}},"11":{"start":{"line":14,"column":3},"end":{"line":14,"column":25}},"12":{"start":{"line":17,"column":1},"end":{"line":17,"column":13}},"13":{"start":{"line":20,"column":0},"end":{"line":33,"column":2}},"14":{"start":{"line":21,"column":1},"end":{"line":21,"column":29}},"15":{"start":{"line":22,"column":1},"end":{"line":31,"column":2}},"16":{"start":{"line":23,"column":2},"end":{"line":25,"column":3}},"17":{"start":{"line":24,"column":3},"end":{"line":24,"column":16}},"18":{"start":{"line":27,"column":2},"end":{"line":29,"column":3}},"19":{"start":{"line":28,"column":3},"end":{"line":28,"column":16}},"20":{"start":{"line":30,"column":2},"end":{"line":30,"column":28}},"21":{"start":{"line":32,"column":1},"end":{"line":32,"column":23}},"22":{"start":{"line":35,"column":0},"end":{"line":44,"column":1}},"23":{"start":{"line":36,"column":1},"end":{"line":43,"column":2}},"24":{"start":{"line":46,"column":0},"end":{"line":49,"column":2}},"25":{"start":{"line":47,"column":1},"end":{"line":47,"column":39}},"26":{"start":{"line":48,"column":1},"end":{"line":48,"column":22}},"27":{"start":{"line":51,"column":0},"end":{"line":57,"column":1}},"28":{"start":{"line":52,"column":1},"end":{"line":52,"column":14}},"29":{"start":{"line":53,"column":1},"end":{"line":55,"column":2}},"30":{"start":{"line":54,"column":2},"end":{"line":54,"column":36}},"31":{"start":{"line":56,"column":1},"end":{"line":56,"column":12}},"32":{"start":{"line":59,"column":0},"end":{"line":59,"column":35}},"33":{"start":{"line":61,"column":0},"end":{"line":72,"column":2}},"34":{"start":{"line":63,"column":2},"end":{"line":63,"column":20}},"35":{"start":{"line":64,"column":2},"end":{"line":66,"column":3}},"36":{"start":{"line":65,"column":3},"end":{"line":65,"column":31}},"37":{"start":{"line":67,"column":2},"end":{"line":67,"column":57}}},"branchMap":{"1":{"line":2,"type":"if","locations":[{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},{"start":{"line":2,"column":1},"end":{"line":2,"column":1}}]},"2":{"line":2,"type":"binary-expr","locations":[{"start":{"line":2,"column":5},"end":{"line":2,"column":29}},{"start":{"line":2,"column":33},"end":{"line":2,"column":38}}]},"3":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},{"start":{"line":5,"column":1},"end":{"line":5,"column":1}}]},"4":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":5},"end":{"line":5,"column":29}},{"start":{"line":5,"column":33},"end":{"line":5,"column":38}}]},"5":{"line":9,"type":"if","locations":[{"start":{"line":9,"column":2},"end":{"line":9,"column":2}},{"start":{"line":9,"column":2},"end":{"line":9,"column":2}}]},"6":{"line":9,"type":"binary-expr","locations":[{"start":{"line":9,"column":6},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":58}}]},"7":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":9},"end":{"line":11,"column":9}},{"start":{"line":11,"column":9},"end":{"line":11,"column":9}}]},"8":{"line":11,"type":"binary-expr","locations":[{"start":{"line":11,"column":13},"end":{"line":11,"column":42}},{"start":{"line":11,"column":46},"end":{"line":11,"column":75}},{"start":{"line":11,"column":79},"end":{"line":11,"column":104}},{"start":{"line":11,"column":108},"end":{"line":11,"column":133}}]},"9":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":2},"end":{"line":23,"column":2}},{"start":{"line":23,"column":2},"end":{"line":23,"column":2}}]},"10":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":6},"end":{"line":23,"column":32}},{"start":{"line":23,"column":36},"end":{"line":23,"column":51}}]},"11":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":2},"end":{"line":27,"column":2}},{"start":{"line":27,"column":2},"end":{"line":27,"column":2}}]},"12":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":8},"end":{"line":38,"column":12}},{"start":{"line":38,"column":16},"end":{"line":38,"column":20}}]},"13":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":8},"end":{"line":41,"column":12}},{"start":{"line":41,"column":16},"end":{"line":41,"column":18}}]},"14":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":14},"end":{"line":42,"column":24}},{"start":{"line":42,"column":28},"end":{"line":42,"column":29}}]},"15":{"line":63,"type":"binary-expr","locations":[{"start":{"line":63,"column":9},"end":{"line":63,"column":13}},{"start":{"line":63,"column":17},"end":{"line":63,"column":19}}]},"16":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":2},"end":{"line":64,"column":2}},{"start":{"line":64,"column":2},"end":{"line":64,"column":2}}]}},"code":["var extend = function(obj1, obj2) {","\tif (typeof obj1 !== 'object' && !obj1) {","\t\tobj1 = {};","\t}","\tif (typeof obj2 !== 'object' && !obj2) {","\t\tobj2 = {};","\t}","\tfor (var key in obj2) {","\t\tif (Array.isArray(obj1[key]) && Array.isArray(obj2[key])) {","\t\t\tobj1[key] = obj1[key].concat(obj2[key]);","\t\t} else if (typeof obj1[key] === 'object' && typeof obj2[key] === 'object' && !Array.isArray(obj1[key]) && !Array.isArray(obj2[key])) {","\t\t\tobj1[key] = extend(obj1[key], obj2[key]);","\t\t} else {","\t\t\tobj1[key] = obj2[key];","\t\t}","\t}","\treturn obj1;","}","","var deepEquals = function(global, prop, val) {","\tvar props = prop.split('.');","\tfor (var i = 0; i < props.length; i++) {","\t\tif (typeof global !== 'object' || global === null){","\t\t\treturn false;","\t\t}","\t\t","\t\tif (typeof global[props[i]] === 'undefined') {","\t\t\treturn false;","\t\t}","\t\tglobal = global[props[i]];","\t}","\treturn global === val;","};","","var metrics = function(value, category, source, unit, importance, tags) {","\treturn {","\t\tvalue: value,","\t\tunit: unit || 'ms',","\t\tcategory: category,","\t\tsource: source,","\t\ttags: tags || [],","\t\timportance: importance || 0","\t}","}","","metrics.format = function(metric) {","\tvar res = [metric.value, metric.unit];","\treturn res.join(' ');","};","","metrics.log = function(m) {","\tvar res = {};","\tfor (var key in m) {","\t\tres[key] = metrics.format(m[key]);","\t}","\treturn res;","}","","var jsmin = require('jsmin').jsmin;","","module.exports = {","\tfnCall: function(fn, args) {","\t\targs = args || '';","\t\tif (typeof args === 'object') {","\t\t\targs = JSON.stringify(args);","\t\t}","\t\treturn '(' + jsmin(fn.toString()) + '(' + args + '));';","\t},","\tmetrics: metrics,","\textend: extend,","\tdeepEquals: deepEquals","};"],"l":{"1":1,"2":9,"3":0,"5":9,"6":0,"8":9,"9":6,"10":0,"11":6,"12":3,"14":3,"17":9,"20":1,"21":2,"22":2,"23":2,"24":0,"27":2,"28":0,"30":2,"32":2,"35":1,"36":0,"46":1,"47":0,"48":0,"51":1,"52":0,"53":0,"54":0,"56":0,"59":1,"61":1,"63":0,"64":0,"65":0,"67":0}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/actions/loginAction.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/actions/loginAction.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":17},"end":{"line":1,"column":31}}},"2":{"name":"(anonymous_2)","line":4,"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":26}}},"3":{"name":"(anonymous_3)","line":6,"loc":{"start":{"line":6,"column":36},"end":{"line":6,"column":47}}},"4":{"name":"(anonymous_4)","line":9,"loc":{"start":{"line":9,"column":10},"end":{"line":9,"column":23}}},"5":{"name":"(anonymous_5)","line":11,"loc":{"start":{"line":11,"column":10},"end":{"line":11,"column":21}}},"6":{"name":"(anonymous_6)","line":14,"loc":{"start":{"line":14,"column":10},"end":{"line":14,"column":23}}},"7":{"name":"(anonymous_7)","line":16,"loc":{"start":{"line":16,"column":10},"end":{"line":16,"column":21}}},"8":{"name":"(anonymous_8)","line":18,"loc":{"start":{"line":18,"column":10},"end":{"line":18,"column":23}}},"9":{"name":"(anonymous_9)","line":21,"loc":{"start":{"line":21,"column":10},"end":{"line":21,"column":21}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":25,"column":2}},"2":{"start":{"line":2,"column":1},"end":{"line":2,"column":17}},"3":{"start":{"line":3,"column":1},"end":{"line":3,"column":46}},"4":{"start":{"line":4,"column":1},"end":{"line":24,"column":2}},"5":{"start":{"line":5,"column":2},"end":{"line":5,"column":30}},"6":{"start":{"line":6,"column":2},"end":{"line":23,"column":5}},"7":{"start":{"line":7,"column":3},"end":{"line":7,"column":32}},"8":{"start":{"line":8,"column":3},"end":{"line":8,"column":58}},"9":{"start":{"line":10,"column":3},"end":{"line":10,"column":58}},"10":{"start":{"line":12,"column":3},"end":{"line":12,"column":32}},"11":{"start":{"line":13,"column":3},"end":{"line":13,"column":59}},"12":{"start":{"line":15,"column":3},"end":{"line":15,"column":58}},"13":{"start":{"line":17,"column":3},"end":{"line":17,"column":57}},"14":{"start":{"line":19,"column":3},"end":{"line":19,"column":28}},"15":{"start":{"line":20,"column":3},"end":{"line":20,"column":21}},"16":{"start":{"line":22,"column":3},"end":{"line":22,"column":30}}},"branchMap":{"1":{"line":2,"type":"binary-expr","locations":[{"start":{"line":2,"column":7},"end":{"line":2,"column":10}},{"start":{"line":2,"column":14},"end":{"line":2,"column":16}}]},"2":{"line":10,"type":"binary-expr","locations":[{"start":{"line":10,"column":18},"end":{"line":10,"column":34}},{"start":{"line":10,"column":38},"end":{"line":10,"column":56}}]},"3":{"line":15,"type":"binary-expr","locations":[{"start":{"line":15,"column":18},"end":{"line":15,"column":34}},{"start":{"line":15,"column":38},"end":{"line":15,"column":56}}]}},"code":["module.exports = function(cfg) {","\tcfg = cfg || {};","\tdebug = require('debug')('bp:actions:login');","\treturn function(browser) {","\t\tdebug('Loading login form');","\t\treturn browser.get(cfg.page).then(function() {","\t\t\tdebug('Filling in Username');","\t\t\treturn browser.elementByCssSelector(cfg.username.field)","\t\t}).then(function(el) {","\t\t\treturn el.type(cfg.username.val || cfg.username.value);","\t\t}).then(function() {","\t\t\tdebug('Filling in Password');","\t\t\treturn browser.elementByCssSelector(cfg.password.field);","\t\t}).then(function(el) {","\t\t\treturn el.type(cfg.password.val || cfg.password.value);","\t\t}).then(function() {","\t\t\treturn browser.elementByCssSelector(cfg.submit.field);","\t\t}).then(function(el) {","\t\t\tdebug('Clicking submit');","\t\t\treturn el.click();","\t\t}).then(function() {","\t\t\treturn browser.sleep(5000);","\t\t});","\t}","};"],"l":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"10":0,"12":0,"13":0,"15":0,"17":0,"19":0,"20":0,"22":0}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/actions/wait.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/actions/wait.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":17},"end":{"line":1,"column":31}}},"2":{"name":"(anonymous_2)","line":4,"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":26}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":9,"column":2}},"2":{"start":{"line":2,"column":1},"end":{"line":2,"column":17}},"3":{"start":{"line":3,"column":1},"end":{"line":3,"column":49}},"4":{"start":{"line":4,"column":1},"end":{"line":8,"column":2}},"5":{"start":{"line":5,"column":2},"end":{"line":5,"column":29}},"6":{"start":{"line":6,"column":2},"end":{"line":6,"column":48}},"7":{"start":{"line":7,"column":2},"end":{"line":7,"column":33}}},"branchMap":{"1":{"line":2,"type":"binary-expr","locations":[{"start":{"line":2,"column":7},"end":{"line":2,"column":10}},{"start":{"line":2,"column":14},"end":{"line":2,"column":16}}]},"2":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":17},"end":{"line":5,"column":20}},{"start":{"line":5,"column":24},"end":{"line":5,"column":28}}]}},"code":["module.exports = function(cfg) {","\tcfg = cfg || {};","\tvar debug = require('debug')('bp:actions:wait');","\treturn function(browser) {","\t\tvar duration = cfg || 5000;","\t\tdebug('Waiting for some time - %d', duration);","\t\treturn browser.sleep(duration);","\t}","};"],"l":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":5,"7":5,"8":5,"9":5,"10":0,"11":0,"12":5,"13":5,"14":5,"15":1,"16":1,"17":5,"18":5,"19":3,"20":3,"21":2,"22":1,"23":1,"24":1,"25":1,"26":1,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":1},"b":{"1":[5,0],"2":[0,0],"3":[3,2],"4":[0,0],"5":[0,0]},"f":{"1":1,"2":5,"3":5,"4":1,"5":5,"6":5,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"fnMap":{"1":{"name":"Metrics","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":28},"end":{"line":10,"column":45}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":11},"end":{"line":20,"column":28}}},"4":{"name":"(anonymous_4)","line":25,"loc":{"start":{"line":25,"column":31},"end":{"line":25,"column":54}}},"5":{"name":"(anonymous_5)","line":26,"loc":{"start":{"line":26,"column":25},"end":{"line":26,"column":42}}},"6":{"name":"(anonymous_6)","line":27,"loc":{"start":{"line":27,"column":9},"end":{"line":27,"column":20}}},"7":{"name":"(anonymous_7)","line":38,"loc":{"start":{"line":38,"column":26},"end":{"line":38,"column":40}}},"8":{"name":"(anonymous_8)","line":40,"loc":{"start":{"line":40,"column":45},"end":{"line":40,"column":56}}},"9":{"name":"(anonymous_9)","line":45,"loc":{"start":{"line":45,"column":26},"end":{"line":45,"column":60}}},"10":{"name":"(anonymous_10)","line":47,"loc":{"start":{"line":47,"column":50},"end":{"line":47,"column":61}}},"11":{"name":"(anonymous_11)","line":51,"loc":{"start":{"line":51,"column":29},"end":{"line":51,"column":63}}},"12":{"name":"(anonymous_12)","line":53,"loc":{"start":{"line":53,"column":65},"end":{"line":53,"column":76}}},"13":{"name":"(anonymous_13)","line":58,"loc":{"start":{"line":58,"column":31},"end":{"line":58,"column":42}}},"14":{"name":"(anonymous_14)","line":61,"loc":{"start":{"line":61,"column":38},"end":{"line":61,"column":55}}},"15":{"name":"(anonymous_15)","line":68,"loc":{"start":{"line":68,"column":12},"end":{"line":68,"column":23}}},"16":{"name":"(anonymous_16)","line":70,"loc":{"start":{"line":70,"column":51},"end":{"line":70,"column":65}}},"17":{"name":"(anonymous_17)","line":76,"loc":{"start":{"line":76,"column":4},"end":{"line":76,"column":18}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":4,"column":37}},"2":{"start":{"line":6,"column":0},"end":{"line":23,"column":1}},"3":{"start":{"line":7,"column":1},"end":{"line":7,"column":31}},"4":{"start":{"line":8,"column":1},"end":{"line":9,"column":56}},"5":{"start":{"line":10,"column":1},"end":{"line":22,"column":4}},"6":{"start":{"line":11,"column":2},"end":{"line":11,"column":17}},"7":{"start":{"line":12,"column":2},"end":{"line":17,"column":3}},"8":{"start":{"line":13,"column":3},"end":{"line":13,"column":35}},"9":{"start":{"line":14,"column":3},"end":{"line":14,"column":18}},"10":{"start":{"line":15,"column":9},"end":{"line":17,"column":3}},"11":{"start":{"line":16,"column":3},"end":{"line":16,"column":16}},"12":{"start":{"line":18,"column":2},"end":{"line":18,"column":30}},"13":{"start":{"line":19,"column":2},"end":{"line":19,"column":13}},"14":{"start":{"line":21,"column":2},"end":{"line":21,"column":37}},"15":{"start":{"line":25,"column":0},"end":{"line":36,"column":1}},"16":{"start":{"line":26,"column":1},"end":{"line":35,"column":24}},"17":{"start":{"line":27,"column":2},"end":{"line":34,"column":3}},"18":{"start":{"line":28,"column":3},"end":{"line":33,"column":4}},"19":{"start":{"line":29,"column":4},"end":{"line":29,"column":39}},"20":{"start":{"line":30,"column":4},"end":{"line":30,"column":46}},"21":{"start":{"line":32,"column":4},"end":{"line":32,"column":15}},"22":{"start":{"line":38,"column":0},"end":{"line":43,"column":2}},"23":{"start":{"line":39,"column":1},"end":{"line":39,"column":15}},"24":{"start":{"line":40,"column":1},"end":{"line":42,"column":4}},"25":{"start":{"line":41,"column":2},"end":{"line":41,"column":36}},"26":{"start":{"line":45,"column":0},"end":{"line":50,"column":1}},"27":{"start":{"line":46,"column":1},"end":{"line":46,"column":15}},"28":{"start":{"line":47,"column":1},"end":{"line":49,"column":4}},"29":{"start":{"line":48,"column":2},"end":{"line":48,"column":56}},"30":{"start":{"line":51,"column":0},"end":{"line":56,"column":1}},"31":{"start":{"line":52,"column":1},"end":{"line":52,"column":15}},"32":{"start":{"line":53,"column":1},"end":{"line":55,"column":4}},"33":{"start":{"line":54,"column":2},"end":{"line":54,"column":47}},"34":{"start":{"line":58,"column":0},"end":{"line":79,"column":2}},"35":{"start":{"line":59,"column":1},"end":{"line":59,"column":26}},"36":{"start":{"line":60,"column":1},"end":{"line":60,"column":22}},"37":{"start":{"line":61,"column":1},"end":{"line":78,"column":3}},"38":{"start":{"line":62,"column":2},"end":{"line":67,"column":3}},"39":{"start":{"line":63,"column":3},"end":{"line":63,"column":45}},"40":{"start":{"line":64,"column":3},"end":{"line":64,"column":48}},"41":{"start":{"line":66,"column":3},"end":{"line":66,"column":14}},"42":{"start":{"line":69,"column":2},"end":{"line":69,"column":15}},"43":{"start":{"line":70,"column":2},"end":{"line":74,"column":5}},"44":{"start":{"line":71,"column":3},"end":{"line":73,"column":4}},"45":{"start":{"line":72,"column":4},"end":{"line":72,"column":35}},"46":{"start":{"line":75,"column":2},"end":{"line":75,"column":13}},"47":{"start":{"line":77,"column":2},"end":{"line":77,"column":13}},"48":{"start":{"line":82,"column":0},"end":{"line":82,"column":25}},"49":{"start":{"line":83,"column":0},"end":{"line":89,"column":2}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":12,"column":2}},{"start":{"line":12,"column":2},"end":{"line":12,"column":2}}]},"2":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":9},"end":{"line":15,"column":9}},{"start":{"line":15,"column":9},"end":{"line":15,"column":9}}]},"3":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":3},"end":{"line":28,"column":3}},{"start":{"line":28,"column":3},"end":{"line":28,"column":3}}]},"4":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":2},"end":{"line":62,"column":2}},{"start":{"line":62,"column":2},"end":{"line":62,"column":2}}]},"5":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":3},"end":{"line":71,"column":3}},{"start":{"line":71,"column":3},"end":{"line":71,"column":3}}]}},"code":["var Q = require('q'),","\tdebug = require('debug')('bp:metrics'),","\thelpers = require('../helpers'),","\tProbeManager = require('../probes');","","function Metrics(metrics) {","\tdebug('Initializing Metrics');","\tvar me = this,","\t\tprobeManager = this.probeManager = new ProbeManager();","\tthis.metrics = metrics.map(function(metric) {","\t\tvar res = null;","\t\tif (typeof metric === 'string') {","\t\t\tvar fn = require('./' + metric);","\t\t\tres = new fn();","\t\t} else if (typeof metric === 'object') {","\t\t\tres = metric;","\t\t}","\t\tprobeManager.addProbes(res);","\t\treturn res;","\t}).filter(function(metric) {","\t\treturn (typeof metric === 'object')","\t});","}","","Metrics.prototype.allMetrics = function(method, args) {","\treturn this.metrics.map(function(metric) {","\t\treturn function() {","\t\t\tif (typeof metric[method] === 'function') {","\t\t\t\tdebug(metric.id, method, 'called');","\t\t\t\treturn metric[method].apply(metric, args);","\t\t\t} else {","\t\t\t\treturn Q();","\t\t\t}","\t\t}","\t}).reduce(Q.when, Q());","}","","Metrics.prototype.setup = function(cfg) {","\tvar me = this;","\treturn this.allMetrics('setup', [cfg]).then(function() {","\t\treturn me.probeManager.setup(cfg);","\t});","};","","Metrics.prototype.start = function(browsers, browserConfig) {","\tvar me = this;","\treturn this.allMetrics('start', [browsers]).then(function() {","\t\treturn me.probeManager.start(browsers, browserConfig);","\t});","}","Metrics.prototype.teardown = function(browsers, browserConfig) {","\tvar me = this;","\treturn this.probeManager.teardown(browsers, browserConfig).then(function() {","\t\treturn me.allMetrics('teardown', [browsers]);","\t});","}","","Metrics.prototype.getResults = function() {","\tdebug('Getting Results');","\tvar args = arguments;","\treturn Q.allSettled(this.metrics.map(function(metric) {","\t\tif (typeof metric.getResults === 'function') {","\t\t\tdebug('Getting results from ', metric.id);","\t\t\treturn metric.getResults.apply(metric, args);","\t\t} else {","\t\t\treturn Q();","\t\t}","\t})).spread(function() {","\t\tvar res = {};","\t\tArray.prototype.slice.call(arguments, 0).forEach(function(val) {","\t\t\tif (val.state === 'fulfilled') {","\t\t\t\thelpers.extend(res, val.value);","\t\t\t}","\t\t});","\t\treturn res;","\t}, function(err) {","\t\treturn err;","\t})","};","","","module.exports = Metrics;","module.exports.builtIns = [","\t'TimelineMetrics',","\t'ChromeTracingMetrics',","\t'RafRenderingStats',","\t'NetworkTimings',","\t'NetworkResources'","];"],"l":{"1":1,"6":1,"7":1,"8":1,"10":1,"11":5,"12":5,"13":5,"14":5,"15":0,"16":0,"18":5,"19":5,"21":5,"25":1,"26":1,"27":5,"28":5,"29":3,"30":3,"32":2,"38":1,"39":1,"40":1,"41":1,"45":1,"46":0,"47":0,"48":0,"51":1,"52":0,"53":0,"54":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"66":0,"69":0,"70":0,"71":0,"72":0,"75":0,"77":0,"82":1,"83":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/probes/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/probes/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":5,"6":5,"7":5,"8":7,"9":7,"10":2,"11":5,"12":5,"13":7,"14":0,"15":7,"16":5,"17":7,"18":7,"19":7,"20":1,"21":3,"22":1,"23":1,"24":1,"25":5,"26":5,"27":5,"28":3,"29":3,"30":2,"31":1,"32":1,"33":1,"34":1},"b":{"1":[5,0],"2":[7,0],"3":[2,5],"4":[0,7],"5":[7,7],"6":[5,2],"7":[7,7],"8":[7,7],"9":[3,2]},"f":{"1":1,"2":5,"3":7,"4":3,"5":1,"6":5,"7":5},"fnMap":{"1":{"name":"ProbeManager","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":24}}},"2":{"name":"(anonymous_2)","line":9,"loc":{"start":{"line":9,"column":35},"end":{"line":9,"column":52}}},"3":{"name":"(anonymous_3)","line":12,"loc":{"start":{"line":12,"column":23},"end":{"line":12,"column":39}}},"4":{"name":"promise","line":35,"loc":{"start":{"line":35,"column":0},"end":{"line":35,"column":25}}},"5":{"name":"(anonymous_5)","line":36,"loc":{"start":{"line":36,"column":8},"end":{"line":36,"column":19}}},"6":{"name":"(anonymous_6)","line":40,"loc":{"start":{"line":40,"column":38},"end":{"line":40,"column":57}}},"7":{"name":"(anonymous_7)","line":41,"loc":{"start":{"line":41,"column":10},"end":{"line":41,"column":21}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":3,"column":39}},"2":{"start":{"line":5,"column":0},"end":{"line":7,"column":1}},"3":{"start":{"line":6,"column":1},"end":{"line":6,"column":18}},"4":{"start":{"line":9,"column":0},"end":{"line":33,"column":2}},"5":{"start":{"line":10,"column":1},"end":{"line":10,"column":15}},"6":{"start":{"line":11,"column":1},"end":{"line":11,"column":37}},"7":{"start":{"line":12,"column":1},"end":{"line":32,"column":4}},"8":{"start":{"line":13,"column":2},"end":{"line":21,"column":3}},"9":{"start":{"line":15,"column":3},"end":{"line":20,"column":4}},"10":{"start":{"line":16,"column":4},"end":{"line":16,"column":29}},"11":{"start":{"line":18,"column":4},"end":{"line":18,"column":35}},"12":{"start":{"line":19,"column":4},"end":{"line":19,"column":21}},"13":{"start":{"line":23,"column":2},"end":{"line":25,"column":3}},"14":{"start":{"line":24,"column":3},"end":{"line":24,"column":90}},"15":{"start":{"line":26,"column":2},"end":{"line":28,"column":3}},"16":{"start":{"line":27,"column":3},"end":{"line":27,"column":31}},"17":{"start":{"line":29,"column":2},"end":{"line":29,"column":39}},"18":{"start":{"line":30,"column":2},"end":{"line":30,"column":88}},"19":{"start":{"line":31,"column":2},"end":{"line":31,"column":91}},"20":{"start":{"line":35,"column":0},"end":{"line":52,"column":1}},"21":{"start":{"line":36,"column":1},"end":{"line":51,"column":2}},"22":{"start":{"line":37,"column":2},"end":{"line":38,"column":13}},"23":{"start":{"line":39,"column":2},"end":{"line":39,"column":21}},"24":{"start":{"line":40,"column":2},"end":{"line":50,"column":25}},"25":{"start":{"line":41,"column":3},"end":{"line":49,"column":4}},"26":{"start":{"line":42,"column":4},"end":{"line":42,"column":32}},"27":{"start":{"line":43,"column":4},"end":{"line":48,"column":5}},"28":{"start":{"line":44,"column":5},"end":{"line":44,"column":39}},"29":{"start":{"line":45,"column":5},"end":{"line":45,"column":45}},"30":{"start":{"line":47,"column":5},"end":{"line":47,"column":16}},"31":{"start":{"line":54,"column":0},"end":{"line":54,"column":48}},"32":{"start":{"line":55,"column":0},"end":{"line":55,"column":48}},"33":{"start":{"line":56,"column":0},"end":{"line":56,"column":54}},"34":{"start":{"line":57,"column":0},"end":{"line":57,"column":30}}},"branchMap":{"1":{"line":11,"type":"binary-expr","locations":[{"start":{"line":11,"column":17},"end":{"line":11,"column":30}},{"start":{"line":11,"column":34},"end":{"line":11,"column":36}}]},"2":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":2},"end":{"line":13,"column":2}},{"start":{"line":13,"column":2},"end":{"line":13,"column":2}}]},"3":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":3},"end":{"line":15,"column":3}},{"start":{"line":15,"column":3},"end":{"line":15,"column":3}}]},"4":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":2},"end":{"line":23,"column":2}},{"start":{"line":23,"column":2},"end":{"line":23,"column":2}}]},"5":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":6},"end":{"line":23,"column":31}},{"start":{"line":23,"column":35},"end":{"line":23,"column":66}}]},"6":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":2},"end":{"line":26,"column":2}},{"start":{"line":26,"column":2},"end":{"line":26,"column":2}}]},"7":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":3},"end":{"line":30,"column":38}},{"start":{"line":30,"column":43},"end":{"line":30,"column":87}}]},"8":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":3},"end":{"line":31,"column":39}},{"start":{"line":31,"column":44},"end":{"line":31,"column":90}}]},"9":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":4},"end":{"line":43,"column":4}},{"start":{"line":43,"column":4},"end":{"line":43,"column":4}}]}},"code":["var Q = require('q'),","\thelpers = require('../helpers'),","\tdebug = require('debug')('bp:probes');","","function ProbeManager() {","\tthis.probes = {};","}","","ProbeManager.prototype.addProbes = function(metric) {","\tvar me = this;","\tmetric.probes = metric.probes || [];","\tmetric.probes.forEach(function(probe) {","\t\tif (typeof probe === 'string') {","","\t\t\tif (typeof me.probes[probe] === 'object') {","\t\t\t\tprobe = me.probes[probe];","\t\t\t} else {","\t\t\t\tvar fn = require('./' + probe);","\t\t\t\tprobe = new fn();","\t\t\t}","\t\t}","","\t\tif (typeof probe !== 'object' || typeof probe.id === 'undefined') {","\t\t\tthrow 'Probe needs to be an object and is ' + typeof probes + ' and should have an id';","\t\t}","\t\tif (typeof me.probes[probe.id] === 'undefined') {","\t\t\tme.probes[probe.id] = probe;","\t\t}","\t\tdebug('Registering probe', probe.id);","\t\t(typeof metric.onData === 'function') && probe.on('data', metric.onData.bind(metric));","\t\t(typeof metric.onError === 'function') && probe.on('error', metric.onError.bind(metric));","\t});","};","","function promise(method) {","\treturn function() {","\t\tvar args = arguments,","\t\t\tme = this;","\t\tdebug('' + method);","\t\treturn Object.keys(this.probes).map(function(probeKey) {","\t\t\treturn function() {","\t\t\t\tprobe = me.probes[probeKey];","\t\t\t\tif (typeof probe[method] === 'function') {","\t\t\t\t\tdebug(probe.id, method, 'called');","\t\t\t\t\treturn probe[method].apply(probe, args);","\t\t\t\t} else {","\t\t\t\t\treturn Q();","\t\t\t\t}","\t\t\t}","\t\t}).reduce(Q.when, Q());","\t}","}","","ProbeManager.prototype.setup = promise('setup');","ProbeManager.prototype.start = promise('start');","ProbeManager.prototype.teardown = promise('teardown');","module.exports = ProbeManager;"],"l":{"1":1,"5":1,"6":1,"9":1,"10":5,"11":5,"12":5,"13":7,"15":7,"16":2,"18":5,"19":5,"23":7,"24":0,"26":7,"27":5,"29":7,"30":7,"31":7,"35":1,"36":3,"37":1,"39":1,"40":1,"41":5,"42":5,"43":5,"44":3,"45":3,"47":2,"54":1,"55":1,"56":1,"57":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/runner.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/runner.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"fnMap":{"1":{"name":"Runner","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":22}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":33},"end":{"line":17,"column":44}}},"3":{"name":"(anonymous_3)","line":27,"loc":{"start":{"line":27,"column":34},"end":{"line":27,"column":54}}},"4":{"name":"(anonymous_4)","line":30,"loc":{"start":{"line":30,"column":28},"end":{"line":30,"column":43}}},"5":{"name":"(anonymous_5)","line":33,"loc":{"start":{"line":33,"column":29},"end":{"line":33,"column":56}}},"6":{"name":"(anonymous_6)","line":45,"loc":{"start":{"line":45,"column":26},"end":{"line":45,"column":39}}},"7":{"name":"(anonymous_7)","line":47,"loc":{"start":{"line":47,"column":27},"end":{"line":47,"column":38}}},"8":{"name":"(anonymous_8)","line":49,"loc":{"start":{"line":49,"column":4},"end":{"line":49,"column":18}}},"9":{"name":"(anonymous_9)","line":54,"loc":{"start":{"line":54,"column":25},"end":{"line":54,"column":49}}},"10":{"name":"(anonymous_10)","line":57,"loc":{"start":{"line":57,"column":7},"end":{"line":57,"column":18}}},"11":{"name":"(anonymous_11)","line":59,"loc":{"start":{"line":59,"column":27},"end":{"line":59,"column":38}}},"12":{"name":"(anonymous_12)","line":61,"loc":{"start":{"line":61,"column":9},"end":{"line":61,"column":20}}},"13":{"name":"(anonymous_13)","line":66,"loc":{"start":{"line":66,"column":24},"end":{"line":66,"column":37}}},"14":{"name":"(anonymous_14)","line":68,"loc":{"start":{"line":68,"column":42},"end":{"line":68,"column":53}}},"15":{"name":"(anonymous_15)","line":70,"loc":{"start":{"line":70,"column":9},"end":{"line":70,"column":24}}},"16":{"name":"(anonymous_16)","line":72,"loc":{"start":{"line":72,"column":4},"end":{"line":72,"column":18}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":7,"column":20}},"2":{"start":{"line":9,"column":0},"end":{"line":9,"column":19}},"3":{"start":{"line":11,"column":0},"end":{"line":15,"column":1}},"4":{"start":{"line":12,"column":1},"end":{"line":12,"column":33}},"5":{"start":{"line":13,"column":1},"end":{"line":13,"column":21}},"6":{"start":{"line":14,"column":1},"end":{"line":14,"column":21}},"7":{"start":{"line":17,"column":0},"end":{"line":25,"column":2}},"8":{"start":{"line":18,"column":1},"end":{"line":18,"column":15}},"9":{"start":{"line":19,"column":1},"end":{"line":24,"column":2}},"10":{"start":{"line":20,"column":2},"end":{"line":20,"column":48}},"11":{"start":{"line":21,"column":2},"end":{"line":21,"column":39}},"12":{"start":{"line":23,"column":2},"end":{"line":23,"column":13}},"13":{"start":{"line":27,"column":0},"end":{"line":43,"column":2}},"14":{"start":{"line":28,"column":1},"end":{"line":42,"column":2}},"15":{"start":{"line":29,"column":2},"end":{"line":29,"column":54}},"16":{"start":{"line":30,"column":2},"end":{"line":32,"column":5}},"17":{"start":{"line":33,"column":2},"end":{"line":38,"column":5}},"18":{"start":{"line":34,"column":3},"end":{"line":36,"column":4}},"19":{"start":{"line":35,"column":4},"end":{"line":35,"column":36}},"20":{"start":{"line":37,"column":3},"end":{"line":37,"column":71}},"21":{"start":{"line":39,"column":2},"end":{"line":39,"column":40}},"22":{"start":{"line":41,"column":2},"end":{"line":41,"column":13}},"23":{"start":{"line":45,"column":0},"end":{"line":52,"column":1}},"24":{"start":{"line":46,"column":1},"end":{"line":46,"column":15}},"25":{"start":{"line":47,"column":1},"end":{"line":51,"column":4}},"26":{"start":{"line":48,"column":2},"end":{"line":48,"column":20}},"27":{"start":{"line":50,"column":2},"end":{"line":50,"column":10}},"28":{"start":{"line":54,"column":0},"end":{"line":64,"column":2}},"29":{"start":{"line":55,"column":1},"end":{"line":55,"column":15}},"30":{"start":{"line":56,"column":1},"end":{"line":58,"column":2}},"31":{"start":{"line":57,"column":2},"end":{"line":57,"column":21}},"32":{"start":{"line":59,"column":1},"end":{"line":63,"column":4}},"33":{"start":{"line":60,"column":2},"end":{"line":60,"column":38}},"34":{"start":{"line":62,"column":2},"end":{"line":62,"column":44}},"35":{"start":{"line":66,"column":0},"end":{"line":75,"column":2}},"36":{"start":{"line":67,"column":1},"end":{"line":67,"column":15}},"37":{"start":{"line":68,"column":1},"end":{"line":74,"column":4}},"38":{"start":{"line":69,"column":2},"end":{"line":69,"column":33}},"39":{"start":{"line":71,"column":2},"end":{"line":71,"column":22}},"40":{"start":{"line":73,"column":2},"end":{"line":73,"column":16}},"41":{"start":{"line":77,"column":0},"end":{"line":77,"column":24}}},"branchMap":{"1":{"line":19,"type":"if","locations":[{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},{"start":{"line":19,"column":1},"end":{"line":19,"column":1}}]},"2":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},{"start":{"line":28,"column":1},"end":{"line":28,"column":1}}]},"3":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":3},"end":{"line":34,"column":3}},{"start":{"line":34,"column":3},"end":{"line":34,"column":3}}]},"4":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":7},"end":{"line":34,"column":11}},{"start":{"line":34,"column":15},"end":{"line":34,"column":39}}]},"5":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":16},"end":{"line":37,"column":20}},{"start":{"line":37,"column":24},"end":{"line":37,"column":26}}]},"6":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":44},"end":{"line":37,"column":48}},{"start":{"line":37,"column":52},"end":{"line":37,"column":54}}]},"7":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},{"start":{"line":56,"column":1},"end":{"line":56,"column":1}}]}},"code":["/* Module to be used by other web driver runners like protractor*/","var Metrics = require('./metrics'),","\toptions = require('./options'),","\thelpers = require('./helpers'),","\tQ = require('q'),","\tdebug = require('debug')('bp:selenium:runner'),","\twd = require('wd');","","var metrics = null;","","function Runner(opts) {","\tthis.opts = options.scrub(opts);","\tthis.metrics = null;","\tthis.browser = null;","};","","Runner.prototype.setupMetrics_ = function() {","\tvar me = this;","\tif (this.metrics === null) {","\t\tthis.metrics = new Metrics(this.opts.metrics);","\t\treturn this.metrics.setup(this.opts);","\t} else {","\t\treturn Q();","\t}","};","","Runner.prototype.attachBrowser_ = function(sessionId) {","\tif (this.browser === null) {","\t\tthis.browser = wd.promiseRemote(this.opts.selenium);","\t\tthis.browser.on('status', function(data) {","\t\t\t//log.debug(data);","\t\t});","\t\tthis.browser.on('command', function(meth, path, data) {","\t\t\tif (data && typeof data === 'object') {","\t\t\t\tvar data = JSON.stringify(data);","\t\t\t}","\t\t\tdebug(meth, (path || '').substr(0, 70), (data || '').substr(0, 70));","\t\t});","\t\treturn this.browser.attach(sessionId);","\t} else {","\t\treturn Q();","\t}","};","","Runner.prototype.config = function(cb) {","\tvar me = this;","\tthis.setupMetrics_().then(function() {","\t\tcb(null, me.opts);","\t}, function(err) {","\t\tcb(err);","\t});","}","","Runner.prototype.start = function(sessionId, cb) {","\tvar me = this;","\tif (typeof cb !== 'function') {","\t\tcb = function() {};","\t}","\tthis.setupMetrics_().then(function() {","\t\treturn me.attachBrowser_(sessionId);","\t}).then(function() {","\t\tme.metrics.start(me.browser).then(cb, cb);","\t});","};","","Runner.prototype.stop = function(cb) {","\tvar me = this;","\tthis.metrics.teardown(this.browser).then(function() {","\t\treturn me.metrics.getResults();","\t}).then(function(data) {","\t\tcb(undefined, data);","\t}, function(err) {","\t\tcb(err, null);","\t});","};","","module.exports = Runner;"],"l":{"2":1,"9":1,"11":1,"12":0,"13":0,"14":0,"17":1,"18":0,"19":0,"20":0,"21":0,"23":0,"27":1,"28":0,"29":0,"30":0,"33":0,"34":0,"35":0,"37":0,"39":0,"41":0,"45":1,"46":0,"47":0,"48":0,"50":0,"54":1,"55":0,"56":0,"57":0,"59":0,"60":0,"62":0,"66":1,"67":0,"68":0,"69":0,"71":0,"73":0,"77":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/options.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/options.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":1,"18":1,"19":1,"20":0,"21":1,"22":0,"23":1,"24":1,"25":1,"26":0,"27":1,"28":0,"29":1,"30":1,"31":1,"32":0,"33":1,"34":1,"35":1,"36":1,"37":1,"38":0,"39":0,"40":1,"41":1,"42":1,"43":1,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":1,"53":1,"54":0,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":1,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":1,"79":1,"80":1,"81":1,"82":0,"83":0,"84":0,"85":1,"86":0,"87":1,"88":1,"89":1,"90":1,"91":0,"92":0,"93":1,"94":1,"95":1,"96":0,"97":1,"98":0,"99":1,"100":1,"101":1,"102":1,"103":1,"104":1,"105":9,"106":1},"b":{"1":[1,0],"2":[0,1],"3":[0,0],"4":[0,0],"5":[1,1],"6":[1,0],"7":[0,1],"8":[1,1],"9":[0,1],"10":[0,1],"11":[0,1],"12":[1,0],"13":[0,1],"14":[1,1],"15":[1,0],"16":[0,0],"17":[0,1],"18":[0,1],"19":[0,0],"20":[0,0],"21":[0,1],"22":[1,1],"23":[0,0],"24":[0,0],"25":[1,0],"26":[1,0],"27":[0,1],"28":[1,1],"29":[1,1],"30":[0,1],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,1],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,1],"40":[1,1],"41":[1,1],"42":[1,0],"43":[0,0],"44":[1,1],"45":[0,1],"46":[0,1],"47":[1,1],"48":[1,0]},"f":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":1,"9":0,"10":1,"11":1,"12":1,"13":1,"14":9},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":1},"end":{"line":3,"column":16}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":1},"end":{"line":11,"column":16}}},"3":{"name":"(anonymous_3)","line":33,"loc":{"start":{"line":33,"column":1},"end":{"line":33,"column":16}}},"4":{"name":"(anonymous_4)","line":65,"loc":{"start":{"line":65,"column":1},"end":{"line":65,"column":16}}},"5":{"name":"(anonymous_5)","line":79,"loc":{"start":{"line":79,"column":25},"end":{"line":79,"column":49}}},"6":{"name":"(anonymous_6)","line":114,"loc":{"start":{"line":114,"column":1},"end":{"line":114,"column":16}}},"7":{"name":"(anonymous_7)","line":129,"loc":{"start":{"line":129,"column":26},"end":{"line":129,"column":44}}},"8":{"name":"(anonymous_8)","line":146,"loc":{"start":{"line":146,"column":1},"end":{"line":146,"column":16}}},"9":{"name":"(anonymous_9)","line":152,"loc":{"start":{"line":152,"column":37},"end":{"line":152,"column":55}}},"10":{"name":"(anonymous_10)","line":159,"loc":{"start":{"line":159,"column":1},"end":{"line":159,"column":16}}},"11":{"name":"(anonymous_11)","line":170,"loc":{"start":{"line":170,"column":1},"end":{"line":170,"column":16}}},"12":{"name":"(anonymous_12)","line":186,"loc":{"start":{"line":186,"column":4},"end":{"line":186,"column":20}}},"13":{"name":"(anonymous_13)","line":194,"loc":{"start":{"line":194,"column":8},"end":{"line":194,"column":22}}},"14":{"name":"(anonymous_14)","line":196,"loc":{"start":{"line":196,"column":21},"end":{"line":196,"column":44}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":190,"column":2}},"2":{"start":{"line":4,"column":2},"end":{"line":6,"column":3}},"3":{"start":{"line":5,"column":3},"end":{"line":5,"column":29}},"4":{"start":{"line":7,"column":2},"end":{"line":7,"column":14}},"5":{"start":{"line":12,"column":2},"end":{"line":12,"column":25}},"6":{"start":{"line":13,"column":2},"end":{"line":28,"column":3}},"7":{"start":{"line":14,"column":3},"end":{"line":26,"column":4}},"8":{"start":{"line":15,"column":4},"end":{"line":15,"column":67}},"9":{"start":{"line":16,"column":4},"end":{"line":22,"column":5}},"10":{"start":{"line":17,"column":5},"end":{"line":21,"column":6}},"11":{"start":{"line":18,"column":6},"end":{"line":20,"column":7}},"12":{"start":{"line":19,"column":7},"end":{"line":19,"column":31}},"13":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"14":{"start":{"line":25,"column":4},"end":{"line":25,"column":73}},"15":{"start":{"line":27,"column":3},"end":{"line":27,"column":26}},"16":{"start":{"line":29,"column":2},"end":{"line":29,"column":14}},"17":{"start":{"line":34,"column":2},"end":{"line":34,"column":66}},"18":{"start":{"line":35,"column":2},"end":{"line":45,"column":3}},"19":{"start":{"line":36,"column":3},"end":{"line":38,"column":4}},"20":{"start":{"line":37,"column":4},"end":{"line":37,"column":46}},"21":{"start":{"line":40,"column":3},"end":{"line":42,"column":4}},"22":{"start":{"line":41,"column":4},"end":{"line":41,"column":45}},"23":{"start":{"line":43,"column":3},"end":{"line":43,"column":28}},"24":{"start":{"line":44,"column":3},"end":{"line":44,"column":44}},"25":{"start":{"line":47,"column":2},"end":{"line":49,"column":3}},"26":{"start":{"line":48,"column":3},"end":{"line":48,"column":38}},"27":{"start":{"line":51,"column":2},"end":{"line":53,"column":3}},"28":{"start":{"line":52,"column":3},"end":{"line":52,"column":38}},"29":{"start":{"line":54,"column":2},"end":{"line":56,"column":3}},"30":{"start":{"line":55,"column":3},"end":{"line":55,"column":57}},"31":{"start":{"line":57,"column":2},"end":{"line":59,"column":3}},"32":{"start":{"line":58,"column":3},"end":{"line":58,"column":29}},"33":{"start":{"line":61,"column":2},"end":{"line":61,"column":14}},"34":{"start":{"line":66,"column":2},"end":{"line":66,"column":25}},"35":{"start":{"line":68,"column":2},"end":{"line":68,"column":53}},"36":{"start":{"line":69,"column":2},"end":{"line":76,"column":3}},"37":{"start":{"line":70,"column":3},"end":{"line":73,"column":6}},"38":{"start":{"line":74,"column":9},"end":{"line":76,"column":3}},"39":{"start":{"line":75,"column":3},"end":{"line":75,"column":49}},"40":{"start":{"line":78,"column":2},"end":{"line":78,"column":18}},"41":{"start":{"line":79,"column":2},"end":{"line":108,"column":5}},"42":{"start":{"line":80,"column":3},"end":{"line":82,"column":22}},"43":{"start":{"line":84,"column":3},"end":{"line":91,"column":4}},"44":{"start":{"line":85,"column":4},"end":{"line":85,"column":113}},"45":{"start":{"line":86,"column":4},"end":{"line":90,"column":5}},"46":{"start":{"line":87,"column":5},"end":{"line":89,"column":6}},"47":{"start":{"line":88,"column":6},"end":{"line":88,"column":51}},"48":{"start":{"line":93,"column":3},"end":{"line":98,"column":4}},"49":{"start":{"line":94,"column":4},"end":{"line":94,"column":68}},"50":{"start":{"line":95,"column":4},"end":{"line":97,"column":5}},"51":{"start":{"line":96,"column":5},"end":{"line":96,"column":71}},"52":{"start":{"line":101,"column":3},"end":{"line":105,"column":4}},"53":{"start":{"line":102,"column":4},"end":{"line":104,"column":5}},"54":{"start":{"line":103,"column":5},"end":{"line":103,"column":40}},"55":{"start":{"line":107,"column":3},"end":{"line":107,"column":30}},"56":{"start":{"line":109,"column":2},"end":{"line":109,"column":25}},"57":{"start":{"line":110,"column":2},"end":{"line":110,"column":14}},"58":{"start":{"line":115,"column":2},"end":{"line":115,"column":51}},"59":{"start":{"line":116,"column":2},"end":{"line":116,"column":23}},"60":{"start":{"line":117,"column":2},"end":{"line":138,"column":3}},"61":{"start":{"line":118,"column":3},"end":{"line":118,"column":62}},"62":{"start":{"line":119,"column":3},"end":{"line":119,"column":65}},"63":{"start":{"line":120,"column":3},"end":{"line":124,"column":4}},"64":{"start":{"line":121,"column":4},"end":{"line":121,"column":74}},"65":{"start":{"line":122,"column":4},"end":{"line":122,"column":32}},"66":{"start":{"line":123,"column":4},"end":{"line":123,"column":31}},"67":{"start":{"line":125,"column":9},"end":{"line":138,"column":3}},"68":{"start":{"line":126,"column":3},"end":{"line":126,"column":76}},"69":{"start":{"line":127,"column":3},"end":{"line":127,"column":67}},"70":{"start":{"line":128,"column":3},"end":{"line":137,"column":4}},"71":{"start":{"line":129,"column":4},"end":{"line":132,"column":7}},"72":{"start":{"line":130,"column":5},"end":{"line":130,"column":63}},"73":{"start":{"line":131,"column":5},"end":{"line":131,"column":57}},"74":{"start":{"line":133,"column":4},"end":{"line":133,"column":38}},"75":{"start":{"line":134,"column":4},"end":{"line":134,"column":33}},"76":{"start":{"line":135,"column":4},"end":{"line":135,"column":30}},"77":{"start":{"line":136,"column":4},"end":{"line":136,"column":29}},"78":{"start":{"line":140,"column":2},"end":{"line":140,"column":23}},"79":{"start":{"line":141,"column":2},"end":{"line":141,"column":23}},"80":{"start":{"line":142,"column":2},"end":{"line":142,"column":14}},"81":{"start":{"line":147,"column":2},"end":{"line":151,"column":3}},"82":{"start":{"line":148,"column":3},"end":{"line":148,"column":30}},"83":{"start":{"line":149,"column":3},"end":{"line":149,"column":62}},"84":{"start":{"line":150,"column":3},"end":{"line":150,"column":29}},"85":{"start":{"line":152,"column":2},"end":{"line":154,"column":4}},"86":{"start":{"line":153,"column":3},"end":{"line":153,"column":10}},"87":{"start":{"line":155,"column":2},"end":{"line":155,"column":14}},"88":{"start":{"line":160,"column":2},"end":{"line":160,"column":42}},"89":{"start":{"line":161,"column":2},"end":{"line":165,"column":3}},"90":{"start":{"line":162,"column":3},"end":{"line":162,"column":45}},"91":{"start":{"line":163,"column":9},"end":{"line":165,"column":3}},"92":{"start":{"line":164,"column":3},"end":{"line":164,"column":33}},"93":{"start":{"line":166,"column":2},"end":{"line":166,"column":14}},"94":{"start":{"line":171,"column":2},"end":{"line":171,"column":63}},"95":{"start":{"line":172,"column":2},"end":{"line":176,"column":3}},"96":{"start":{"line":173,"column":3},"end":{"line":173,"column":45}},"97":{"start":{"line":174,"column":9},"end":{"line":176,"column":3}},"98":{"start":{"line":175,"column":3},"end":{"line":175,"column":33}},"99":{"start":{"line":177,"column":2},"end":{"line":177,"column":14}},"100":{"start":{"line":187,"column":8},"end":{"line":187,"column":54}},"101":{"start":{"line":188,"column":8},"end":{"line":188,"column":20}},"102":{"start":{"line":193,"column":0},"end":{"line":202,"column":2}},"103":{"start":{"line":195,"column":2},"end":{"line":195,"column":18}},"104":{"start":{"line":196,"column":2},"end":{"line":198,"column":5}},"105":{"start":{"line":197,"column":3},"end":{"line":197,"column":24}},"106":{"start":{"line":199,"column":2},"end":{"line":199,"column":13}}},"branchMap":{"1":{"line":4,"type":"if","locations":[{"start":{"line":4,"column":2},"end":{"line":4,"column":2}},{"start":{"line":4,"column":2},"end":{"line":4,"column":2}}]},"2":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":2},"end":{"line":13,"column":2}},{"start":{"line":13,"column":2},"end":{"line":13,"column":2}}]},"3":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":16,"column":4}},{"start":{"line":16,"column":4},"end":{"line":16,"column":4}}]},"4":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":6},"end":{"line":18,"column":6}},{"start":{"line":18,"column":6},"end":{"line":18,"column":6}}]},"5":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":18},"end":{"line":34,"column":31}},{"start":{"line":34,"column":35},"end":{"line":34,"column":65}}]},"6":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":2},"end":{"line":35,"column":2}},{"start":{"line":35,"column":2},"end":{"line":35,"column":2}}]},"7":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":3},"end":{"line":36,"column":3}},{"start":{"line":36,"column":3},"end":{"line":36,"column":3}}]},"8":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":7},"end":{"line":36,"column":49}},{"start":{"line":36,"column":53},"end":{"line":36,"column":93}}]},"9":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":3},"end":{"line":40,"column":3}},{"start":{"line":40,"column":3},"end":{"line":40,"column":3}}]},"10":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":2},"end":{"line":47,"column":2}},{"start":{"line":47,"column":2},"end":{"line":47,"column":2}}]},"11":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":2},"end":{"line":51,"column":2}},{"start":{"line":51,"column":2},"end":{"line":51,"column":2}}]},"12":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":2},"end":{"line":54,"column":2}},{"start":{"line":54,"column":2},"end":{"line":54,"column":2}}]},"13":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":2},"end":{"line":57,"column":2}},{"start":{"line":57,"column":2},"end":{"line":57,"column":2}}]},"14":{"line":68,"type":"binary-expr","locations":[{"start":{"line":68,"column":23},"end":{"line":68,"column":36}},{"start":{"line":68,"column":40},"end":{"line":68,"column":52}}]},"15":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":2},"end":{"line":69,"column":2}},{"start":{"line":69,"column":2},"end":{"line":69,"column":2}}]},"16":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":9},"end":{"line":74,"column":9}},{"start":{"line":74,"column":9},"end":{"line":74,"column":9}}]},"17":{"line":80,"type":"cond-expr","locations":[{"start":{"line":80,"column":56},"end":{"line":82,"column":4}},{"start":{"line":82,"column":7},"end":{"line":82,"column":20}}]},"18":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":3},"end":{"line":84,"column":3}},{"start":{"line":84,"column":3},"end":{"line":84,"column":3}}]},"19":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":29},"end":{"line":85,"column":69}},{"start":{"line":85,"column":73},"end":{"line":85,"column":113}}]},"20":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":5},"end":{"line":87,"column":5}},{"start":{"line":87,"column":5},"end":{"line":87,"column":5}}]},"21":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":3},"end":{"line":93,"column":3}},{"start":{"line":93,"column":3},"end":{"line":93,"column":3}}]},"22":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":7},"end":{"line":93,"column":32}},{"start":{"line":93,"column":36},"end":{"line":93,"column":80}}]},"23":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":34},"end":{"line":94,"column":61}},{"start":{"line":94,"column":65},"end":{"line":94,"column":67}}]},"24":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":4},"end":{"line":95,"column":4}},{"start":{"line":95,"column":4},"end":{"line":95,"column":4}}]},"25":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":3},"end":{"line":101,"column":3}},{"start":{"line":101,"column":3},"end":{"line":101,"column":3}}]},"26":{"line":101,"type":"binary-expr","locations":[{"start":{"line":101,"column":7},"end":{"line":101,"column":52}},{"start":{"line":101,"column":56},"end":{"line":101,"column":105}}]},"27":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":4},"end":{"line":102,"column":4}},{"start":{"line":102,"column":4},"end":{"line":102,"column":4}}]},"28":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":8},"end":{"line":102,"column":62}},{"start":{"line":102,"column":66},"end":{"line":102,"column":118}}]},"29":{"line":115,"type":"binary-expr","locations":[{"start":{"line":115,"column":19},"end":{"line":115,"column":33}},{"start":{"line":115,"column":37},"end":{"line":115,"column":50}}]},"30":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":2},"end":{"line":117,"column":2}},{"start":{"line":117,"column":2},"end":{"line":117,"column":2}}]},"31":{"line":118,"type":"binary-expr","locations":[{"start":{"line":118,"column":25},"end":{"line":118,"column":44}},{"start":{"line":118,"column":48},"end":{"line":118,"column":61}}]},"32":{"line":119,"type":"binary-expr","locations":[{"start":{"line":119,"column":26},"end":{"line":119,"column":46}},{"start":{"line":119,"column":50},"end":{"line":119,"column":64}}]},"33":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":3},"end":{"line":120,"column":3}},{"start":{"line":120,"column":3},"end":{"line":120,"column":3}}]},"34":{"line":120,"type":"binary-expr","locations":[{"start":{"line":120,"column":7},"end":{"line":120,"column":49}},{"start":{"line":120,"column":53},"end":{"line":120,"column":96}}]},"35":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":9},"end":{"line":125,"column":9}},{"start":{"line":125,"column":9},"end":{"line":125,"column":9}}]},"36":{"line":126,"type":"binary-expr","locations":[{"start":{"line":126,"column":32},"end":{"line":126,"column":58}},{"start":{"line":126,"column":62},"end":{"line":126,"column":75}}]},"37":{"line":127,"type":"binary-expr","locations":[{"start":{"line":127,"column":27},"end":{"line":127,"column":48}},{"start":{"line":127,"column":52},"end":{"line":127,"column":66}}]},"38":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":3},"end":{"line":128,"column":3}},{"start":{"line":128,"column":3},"end":{"line":128,"column":3}}]},"39":{"line":147,"type":"if","locations":[{"start":{"line":147,"column":2},"end":{"line":147,"column":2}},{"start":{"line":147,"column":2},"end":{"line":147,"column":2}}]},"40":{"line":152,"type":"binary-expr","locations":[{"start":{"line":152,"column":19},"end":{"line":152,"column":33}},{"start":{"line":152,"column":37},"end":{"line":154,"column":3}}]},"41":{"line":160,"type":"binary-expr","locations":[{"start":{"line":160,"column":17},"end":{"line":160,"column":29}},{"start":{"line":160,"column":33},"end":{"line":160,"column":41}}]},"42":{"line":161,"type":"if","locations":[{"start":{"line":161,"column":2},"end":{"line":161,"column":2}},{"start":{"line":161,"column":2},"end":{"line":161,"column":2}}]},"43":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":9},"end":{"line":163,"column":9}},{"start":{"line":163,"column":9},"end":{"line":163,"column":9}}]},"44":{"line":171,"type":"binary-expr","locations":[{"start":{"line":171,"column":17},"end":{"line":171,"column":29}},{"start":{"line":171,"column":33},"end":{"line":171,"column":62}}]},"45":{"line":172,"type":"if","locations":[{"start":{"line":172,"column":2},"end":{"line":172,"column":2}},{"start":{"line":172,"column":2},"end":{"line":172,"column":2}}]},"46":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":9},"end":{"line":174,"column":9}},{"start":{"line":174,"column":9},"end":{"line":174,"column":9}}]},"47":{"line":187,"type":"binary-expr","locations":[{"start":{"line":187,"column":29},"end":{"line":187,"column":47}},{"start":{"line":187,"column":51},"end":{"line":187,"column":53}}]},"48":{"line":195,"type":"binary-expr","locations":[{"start":{"line":195,"column":8},"end":{"line":195,"column":11}},{"start":{"line":195,"column":15},"end":{"line":195,"column":17}}]}},"code":["var sanitizers = [","\t// debugBrowser","\tfunction(opts) {","\t\tif (typeof opts.debugBrowser === 'undefined') {","\t\t\topts.debugBrowser = false;","\t\t}","\t\treturn opts;","\t},","","\t// configFile","\tfunction(opts) {","\t\tvar fs = require('fs');","\t\tif (opts.configFile) {","\t\t\ttry {","\t\t\t\tconfig = JSON.parse(fs.readFileSync(opts.configFile, 'utf-8'));","\t\t\t\tif (config) {","\t\t\t\t\tfor (var key in opts) {","\t\t\t\t\t\tif (typeof opts[key] !== 'undefined') {","\t\t\t\t\t\t\tconfig[key] = opts[key];","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\topts = config;","\t\t\t} catch (e) {","\t\t\t\tthrow new Error('Could not read or parse configuration file - ' + e);","\t\t\t}","\t\t\tdelete opts.configFile;","\t\t}","\t\treturn opts;","\t},","","\t// selenium","\tfunction(opts) {","\t\topts.selenium = opts.selenium || 'http://localhost:4444/wd/hub';","\t\tif (typeof opts.selenium === 'string') {","\t\t\tif (opts.selenium === 'ondemand.saucelabs.com' || opts.selenium === 'hub.browserstack.com') {","\t\t\t\topts.selenium = opts.selenium + '/wd/hub';","\t\t\t}","","\t\t\tif (!opts.selenium.match(/^http:\\/\\//)) {","\t\t\t\topts.selenium = 'http://' + opts.selenium","\t\t\t}","\t\t\tvar url = require('url');","\t\t\topts.selenium = url.parse(opts.selenium);","\t\t}","","\t\tif (typeof opts.username !== 'undefined') {","\t\t\topts.selenium.user = opts.username;","\t\t}","","\t\tif (typeof opts.accesskey !== 'undefined') {","\t\t\topts.selenium.pwd = opts.accesskey;","\t\t}","\t\tif (typeof opts.selenium.port !== 'number') {","\t\t\topts.selenium.port = parseInt(opts.selenium.port, 10);","\t\t}","\t\tif (isNaN(opts.selenium.port)) {","\t\t\topts.selenium.port = null;","\t\t}","","\t\treturn opts;","\t},","","\t// browsers","\tfunction(opts) {","\t\tvar browserConfig = {}; // Defaults for browsers to be added here","","\t\tvar passedBrowsers = opts.browsers || opts.browser;","\t\tif (typeof passedBrowsers === 'undefined') {","\t\t\tpassedBrowsers = [{","\t\t\t\tbrowserName: 'chrome',","\t\t\t\tversion: 35","\t\t\t}];","\t\t} else if (typeof passedBrowsers === 'string') {","\t\t\tpassedBrowsers = passedBrowsers.split(/[,;]/);","\t\t}","","\t\tvar result = [];","\t\tpassedBrowsers.forEach(function(passedBrowser) {","\t\t\tpassedBrowser = (typeof passedBrowser === 'string' ? {","\t\t\t\t'browserName': passedBrowser","\t\t\t} : passedBrowser);","","\t\t\tif (typeof browserConfig[passedBrowser.browserName] !== 'undefined') {","\t\t\t\tvar matchingBrowserCfg = browserConfig[passedBrowser.browserName] || browserConfig[passedBrowser.browserName]","\t\t\t\tfor (var key in matchingBrowserCfg) {","\t\t\t\t\tif (typeof passedBrowser[key] === 'undefined') {","\t\t\t\t\t\tpassedBrowser[key] = matchingBrowserCfg[key];","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","\t\t\t// Add activity name for android browsers","\t\t\tif (passedBrowser.browserName && passedBrowser.browserName.match(/android/gi)) {","\t\t\t\tpassedBrowser.chromeOptions = passedBrowser.chromeOptions || {};","\t\t\t\tif (typeof passedBrowser.chromeOptions.androidPackage === 'undefined') {","\t\t\t\t\tpassedBrowser.chromeOptions.androidPackage = 'com.android.chrome';","\t\t\t\t}","\t\t\t}","","\t\t\t// Setting platform if it does not exist","\t\t\tif (typeof passedBrowser.platform === 'undefined' || typeof passedBrowser.platformName === 'undefined') {","\t\t\t\tif (opts.selenium.hostname.match(/ondemand.saucelabs.com/) || opts.selenium.hostname.match(/hub.browserstack.com/)) {","\t\t\t\t\tpassedBrowser.platform = 'WINDOWS';","\t\t\t\t}","\t\t\t}","","\t\t\tresult.push(passedBrowser);","\t\t});","\t\topts.browsers = result;","\t\treturn opts;","\t},","","\t// username and accesskey or password","\tfunction(opts) {","\t\topts.accesskey = opts.accesskey || opts.password;","\t\tdelete opts.password;","\t\tif (opts.selenium.hostname.match(/ondemand.saucelabs.com/)) {","\t\t\topts.SAUCE_USERNAME = opts.SAUCE_USERNAME || opts.username;","\t\t\topts.SAUCE_ACCESSKEY = opts.SAUCE_ACCESSKEY || opts.accesskey;","\t\t\tif (typeof opts.SAUCE_USERNAME !== 'undefined' && typeof opts.SAUCE_ACCESSKEY !== 'undefined') {","\t\t\t\topts.selenium.auth = opts.SAUCE_USERNAME + ':' + opts.SAUCE_ACCESSKEY;","\t\t\t\tdelete opts.SAUCE_ACCESSKEY;","\t\t\t\tdelete opts.SAUCE_USERNAME;","\t\t\t}","\t\t} else if (opts.selenium.hostname.match(/hub.browserstack.com/)) {","\t\t\topts.BROWSERSTACK_USERNAME = opts.BROWSERSTACK_USERNAME || opts.username;","\t\t\topts.BROWSERSTACK_KEY = opts.BROWSERSTACK_KEY || opts.accesskey;","\t\t\tif (typeof opts.BROWSERSTACK_USERNAME !== 'undefined') {","\t\t\t\topts.browsers.forEach(function(browser) {","\t\t\t\t\tbrowser['browserstack.user'] = opts.BROWSERSTACK_USERNAME;","\t\t\t\t\tbrowser['browserstack.key'] = opts.BROWSERSTACK_KEY;","\t\t\t\t});","\t\t\t\tdelete opts.BROWSERSTACK_USERNAME;","\t\t\t\tdelete opts.BROWSERSTACK_KEY;","\t\t\t\tdelete opts.selenium.user;","\t\t\t\tdelete opts.selenium.pwd;","\t\t\t}","\t\t}","","\t\tdelete opts.username;","\t\tdelete opts.password;","\t\treturn opts;","\t},","","\t// preScript, preScriptFile","\tfunction(opts) {","\t\tif (opts.preScriptFile) {","\t\t\tvar path = require('path');","\t\t\topts.preScript = require(path.resolve(opts.preScriptFile));","\t\t\tdelete opts.preScriptFile;","\t\t}","\t\topts.preScript = opts.preScript || function(browser) {","\t\t\treturn;","\t\t};","\t\treturn opts;","\t},","","\t// actions","\tfunction(opts) {","\t\topts.actions = opts.actions || 'scroll';","\t\tif (typeof opts.actions === 'string') {","\t\t\topts.actions = opts.actions.split(/[,;]/);","\t\t} else if (typeof opts.actions === 'function') {","\t\t\topts.actions = [opts.actions];","\t\t}","\t\treturn opts;","\t},","","\t// metrics","\tfunction(opts) {","\t\topts.metrics = opts.metrics || require('./metrics').builtIns;","\t\tif (typeof opts.metrics === 'string') {","\t\t\topts.metrics = opts.metrics.split(/[,;]/);","\t\t} else if (typeof opts.metrics === 'function') {","\t\t\topts.metrics = [opts.metrics];","\t\t}","\t\treturn opts;","\t},","","    /**","     * Metric options","     *","     * @example opts.metricOptions = { \"METRIC_ID\" : { option1 : value1, ... , optionN : valueN } }","     * @param {object} opts","     */","    function (opts) {","        opts.metricOptions = opts.metricOptions || {};","        return opts;","    }","];","","","module.exports = {","\tscrub: function(cfg) {","\t\tcfg = cfg || {};","\t\tsanitizers.forEach(function(sanitizer, i) {","\t\t\tcfg = sanitizer(cfg);","\t\t});","\t\treturn cfg;","\t},","\tsanitizers: sanitizers","};"],"l":{"1":1,"4":1,"5":1,"7":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"23":0,"25":0,"27":0,"29":1,"34":1,"35":1,"36":1,"37":0,"40":1,"41":0,"43":1,"44":1,"47":1,"48":0,"51":1,"52":0,"54":1,"55":1,"57":1,"58":0,"61":1,"66":1,"68":1,"69":1,"70":1,"74":0,"75":0,"78":1,"79":1,"80":1,"84":1,"85":0,"86":0,"87":0,"88":0,"93":1,"94":0,"95":0,"96":0,"101":1,"102":1,"103":0,"107":1,"109":1,"110":1,"115":1,"116":1,"117":1,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"125":1,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"133":0,"134":0,"135":0,"136":0,"140":1,"141":1,"142":1,"147":1,"148":0,"149":0,"150":0,"152":1,"153":0,"155":1,"160":1,"161":1,"162":1,"163":0,"164":0,"166":1,"171":1,"172":1,"173":0,"174":1,"175":0,"177":1,"187":1,"188":1,"193":1,"195":1,"196":1,"197":9,"199":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/docs/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/docs/index.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":1,"20":0,"21":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":11},"end":{"line":1,"column":28}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":36}}},"3":{"name":"(anonymous_3)","line":28,"loc":{"start":{"line":28,"column":21},"end":{"line":28,"column":38}}},"4":{"name":"(anonymous_4)","line":32,"loc":{"start":{"line":32,"column":25},"end":{"line":32,"column":48}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":26,"column":2}},"2":{"start":{"line":2,"column":1},"end":{"line":2,"column":28}},"3":{"start":{"line":3,"column":1},"end":{"line":3,"column":24}},"4":{"start":{"line":4,"column":1},"end":{"line":4,"column":28}},"5":{"start":{"line":6,"column":1},"end":{"line":6,"column":11}},"6":{"start":{"line":7,"column":1},"end":{"line":17,"column":2}},"7":{"start":{"line":8,"column":2},"end":{"line":8,"column":29}},"8":{"start":{"line":9,"column":8},"end":{"line":17,"column":2}},"9":{"start":{"line":10,"column":2},"end":{"line":12,"column":5}},"10":{"start":{"line":11,"column":3},"end":{"line":11,"column":65}},"11":{"start":{"line":14,"column":2},"end":{"line":16,"column":5}},"12":{"start":{"line":19,"column":1},"end":{"line":19,"column":19}},"13":{"start":{"line":20,"column":1},"end":{"line":25,"column":2}},"14":{"start":{"line":21,"column":2},"end":{"line":21,"column":89}},"15":{"start":{"line":22,"column":2},"end":{"line":24,"column":3}},"16":{"start":{"line":23,"column":3},"end":{"line":23,"column":40}},"17":{"start":{"line":28,"column":0},"end":{"line":30,"column":2}},"18":{"start":{"line":29,"column":1},"end":{"line":29,"column":35}},"19":{"start":{"line":32,"column":0},"end":{"line":34,"column":2}},"20":{"start":{"line":33,"column":1},"end":{"line":33,"column":95}},"21":{"start":{"line":36,"column":0},"end":{"line":36,"column":22}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},{"start":{"line":7,"column":1},"end":{"line":7,"column":1}}]},"2":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":5},"end":{"line":7,"column":34}},{"start":{"line":7,"column":38},"end":{"line":7,"column":64}}]},"3":{"line":9,"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":9,"column":8}},{"start":{"line":9,"column":8},"end":{"line":9,"column":8}}]},"4":{"line":11,"type":"cond-expr","locations":[{"start":{"line":11,"column":51},"end":{"line":11,"column":58}},{"start":{"line":11,"column":61},"end":{"line":11,"column":63}}]},"5":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":8},"end":{"line":29,"column":28}},{"start":{"line":29,"column":32},"end":{"line":29,"column":34}}]},"6":{"line":33,"type":"cond-expr","locations":[{"start":{"line":33,"column":55},"end":{"line":33,"column":81}},{"start":{"line":33,"column":84},"end":{"line":33,"column":93}}]}},"code":["var Docs = function(source) {","\tvar glob = require('glob');","\tvar fs = require('fs');","\tvar path = require('path');","","\tvar files;","\tif (typeof source !== 'undefined' && typeof source === 'string') {","\t\tfiles = [source + '.json'];","\t} else if (Array.isArray(source)) {","\t\tfiles = source.map(function(file) {","\t\t\treturn file + (path.extname(file) !== '.json' ? '.json' : '');","\t\t});","\t} else {","\t\tfiles = glob.sync('*.json', {","\t\t\tcwd: __dirname","\t\t});","\t}","","\tthis.metrics = {};","\tfor (var i = 0; i < files.length; i++) {","\t\tvar fileContent = JSON.parse(fs.readFileSync(path.join(__dirname, files[i]), 'utf-8'));","\t\tfor (var key in fileContent) {","\t\t\tthis.metrics[key] = fileContent[key];","\t\t}","\t}","};","","Docs.prototype.get = function(metric) {","\treturn this.metrics[metric] || {};","};","","Docs.prototype.getProp = function(metric, prop) {","\treturn (typeof this.metrics[metric] !== 'undefined' ? this.metrics[metric][prop] : undefined);","};","","module.exports = Docs;"],"l":{"1":1,"2":0,"3":0,"4":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"14":0,"19":0,"20":0,"21":0,"22":0,"23":0,"28":1,"29":0,"32":1,"33":0,"36":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/cli.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/cli.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":1,"8":1,"9":1,"10":0,"11":1,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0},"b":{"1":[1,1],"2":[0,1],"3":[0,1],"4":[1,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"(anonymous_1)","line":18,"loc":{"start":{"line":18,"column":76},"end":{"line":18,"column":90}}},"2":{"name":"(anonymous_2)","line":35,"loc":{"start":{"line":35,"column":27},"end":{"line":35,"column":47}}},"3":{"name":"(anonymous_3)","line":38,"loc":{"start":{"line":38,"column":14},"end":{"line":38,"column":25}}},"4":{"name":"generateTable","line":62,"loc":{"start":{"line":62,"column":0},"end":{"line":62,"column":29}}},"5":{"name":"(anonymous_5)","line":100,"loc":{"start":{"line":100,"column":21},"end":{"line":100,"column":36}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":49}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":35}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":29}},"4":{"start":{"line":7,"column":0},"end":{"line":21,"column":22}},"5":{"start":{"line":19,"column":2},"end":{"line":19,"column":24}},"6":{"start":{"line":23,"column":0},"end":{"line":23,"column":26}},"7":{"start":{"line":24,"column":0},"end":{"line":24,"column":43}},"8":{"start":{"line":26,"column":0},"end":{"line":26,"column":24}},"9":{"start":{"line":27,"column":0},"end":{"line":29,"column":1}},"10":{"start":{"line":28,"column":1},"end":{"line":28,"column":20}},"11":{"start":{"line":31,"column":0},"end":{"line":33,"column":1}},"12":{"start":{"line":32,"column":1},"end":{"line":32,"column":28}},"13":{"start":{"line":35,"column":0},"end":{"line":60,"column":3}},"14":{"start":{"line":36,"column":1},"end":{"line":51,"column":2}},"15":{"start":{"line":37,"column":2},"end":{"line":37,"column":13}},"16":{"start":{"line":38,"column":2},"end":{"line":44,"column":5}},"17":{"start":{"line":39,"column":3},"end":{"line":43,"column":4}},"18":{"start":{"line":40,"column":4},"end":{"line":40,"column":102}},"19":{"start":{"line":42,"column":4},"end":{"line":42,"column":39}},"20":{"start":{"line":46,"column":2},"end":{"line":50,"column":3}},"21":{"start":{"line":47,"column":3},"end":{"line":47,"column":36}},"22":{"start":{"line":49,"column":3},"end":{"line":49,"column":21}},"23":{"start":{"line":62,"column":0},"end":{"line":117,"column":1}},"24":{"start":{"line":63,"column":1},"end":{"line":63,"column":37}},"25":{"start":{"line":64,"column":1},"end":{"line":64,"column":31}},"26":{"start":{"line":66,"column":1},"end":{"line":66,"column":26}},"27":{"start":{"line":67,"column":1},"end":{"line":72,"column":2}},"28":{"start":{"line":74,"column":1},"end":{"line":74,"column":14}},"29":{"start":{"line":75,"column":1},"end":{"line":115,"column":2}},"30":{"start":{"line":76,"column":2},"end":{"line":76,"column":57}},"31":{"start":{"line":77,"column":2},"end":{"line":81,"column":5}},"32":{"start":{"line":82,"column":2},"end":{"line":99,"column":3}},"33":{"start":{"line":83,"column":3},"end":{"line":84,"column":13}},"34":{"start":{"line":84,"column":4},"end":{"line":84,"column":13}},"35":{"start":{"line":85,"column":3},"end":{"line":86,"column":13}},"36":{"start":{"line":86,"column":4},"end":{"line":86,"column":13}},"37":{"start":{"line":88,"column":3},"end":{"line":88,"column":26}},"38":{"start":{"line":89,"column":3},"end":{"line":89,"column":56}},"39":{"start":{"line":90,"column":3},"end":{"line":96,"column":4}},"40":{"start":{"line":91,"column":4},"end":{"line":95,"column":5}},"41":{"start":{"line":92,"column":5},"end":{"line":92,"column":44}},"42":{"start":{"line":94,"column":5},"end":{"line":94,"column":20}},"43":{"start":{"line":98,"column":3},"end":{"line":98,"column":82}},"44":{"start":{"line":100,"column":2},"end":{"line":113,"column":4}},"45":{"start":{"line":101,"column":3},"end":{"line":101,"column":57}},"46":{"start":{"line":102,"column":3},"end":{"line":102,"column":57}},"47":{"start":{"line":104,"column":3},"end":{"line":112,"column":4}},"48":{"start":{"line":105,"column":4},"end":{"line":109,"column":5}},"49":{"start":{"line":106,"column":5},"end":{"line":106,"column":33}},"50":{"start":{"line":108,"column":5},"end":{"line":108,"column":33}},"51":{"start":{"line":111,"column":4},"end":{"line":111,"column":56}},"52":{"start":{"line":114,"column":2},"end":{"line":114,"column":29}},"53":{"start":{"line":116,"column":1},"end":{"line":116,"column":21}}},"branchMap":{"1":{"line":24,"type":"binary-expr","locations":[{"start":{"line":24,"column":17},"end":{"line":24,"column":31}},{"start":{"line":24,"column":35},"end":{"line":24,"column":42}}]},"2":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":0},"end":{"line":27,"column":0}},{"start":{"line":27,"column":0},"end":{"line":27,"column":0}}]},"3":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":0},"end":{"line":31,"column":0}},{"start":{"line":31,"column":0},"end":{"line":31,"column":0}}]},"4":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":4},"end":{"line":31,"column":19}},{"start":{"line":31,"column":23},"end":{"line":31,"column":41}}]},"5":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},{"start":{"line":36,"column":1},"end":{"line":36,"column":1}}]},"6":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":3},"end":{"line":39,"column":3}},{"start":{"line":39,"column":3},"end":{"line":39,"column":3}}]},"7":{"line":42,"type":"cond-expr","locations":[{"start":{"line":42,"column":26},"end":{"line":42,"column":33}},{"start":{"line":42,"column":36},"end":{"line":42,"column":37}}]},"8":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":2},"end":{"line":46,"column":2}},{"start":{"line":46,"column":2},"end":{"line":46,"column":2}}]},"9":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":3},"end":{"line":83,"column":3}},{"start":{"line":83,"column":3},"end":{"line":83,"column":3}}]},"10":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":3},"end":{"line":85,"column":3}},{"start":{"line":85,"column":3},"end":{"line":85,"column":3}}]},"11":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":8},"end":{"line":85,"column":42}},{"start":{"line":85,"column":46},"end":{"line":85,"column":47}}]},"12":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":48}},{"start":{"line":89,"column":52},"end":{"line":89,"column":54}}]},"13":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":3},"end":{"line":90,"column":3}},{"start":{"line":90,"column":3},"end":{"line":90,"column":3}}]},"14":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":4},"end":{"line":91,"column":4}},{"start":{"line":91,"column":4},"end":{"line":91,"column":4}}]},"15":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":42},"end":{"line":98,"column":72}},{"start":{"line":98,"column":76},"end":{"line":98,"column":78}}]},"16":{"line":101,"type":"binary-expr","locations":[{"start":{"line":101,"column":15},"end":{"line":101,"column":50}},{"start":{"line":101,"column":54},"end":{"line":101,"column":56}}]},"17":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":15},"end":{"line":102,"column":50}},{"start":{"line":102,"column":54},"end":{"line":102,"column":56}}]},"18":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":3},"end":{"line":104,"column":3}},{"start":{"line":104,"column":3},"end":{"line":104,"column":3}}]},"19":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":4},"end":{"line":105,"column":4}},{"start":{"line":105,"column":4},"end":{"line":105,"column":4}}]},"20":{"line":106,"type":"cond-expr","locations":[{"start":{"line":106,"column":26},"end":{"line":106,"column":27}},{"start":{"line":106,"column":30},"end":{"line":106,"column":32}}]},"21":{"line":108,"type":"cond-expr","locations":[{"start":{"line":108,"column":26},"end":{"line":108,"column":27}},{"start":{"line":108,"column":30},"end":{"line":108,"column":32}}]},"22":{"line":111,"type":"cond-expr","locations":[{"start":{"line":111,"column":27},"end":{"line":111,"column":28}},{"start":{"line":111,"column":32},"end":{"line":111,"column":54}}]},"23":{"line":111,"type":"cond-expr","locations":[{"start":{"line":111,"column":48},"end":{"line":111,"column":50}},{"start":{"line":111,"column":53},"end":{"line":111,"column":54}}]}},"code":["//#!/usr/bin/env node","","var version = require('../package.json').version;","var program = require('commander');","var debug = require('debug');","","program","\t.version(version)","\t.option('-s, --selenium <serverURL>', 'Specify Selenium Server, like localhost:4444 or ondemand.saucelabs.com:80')","\t.option('-v --verbose')","\t.option('-u --username <username>', 'Sauce, BrowserStack or Selenium User Name')","\t.option('-a --accesskey <accesskey>', 'Sauce, BrowserStack or Selenium Access Key')","\t.option('-d --debug', 'Enable debug mode, keep the browser alive even after the tests', false)","\t.option('-c --config-file <configFile>', 'Specify a configuration file. If other options are specified, they have precedence over options in config file')","\t.option('-o --output <output>', 'Format of output [table|json], defaults to table')","\t.option('--prescript-file <preScriptFile>', 'Prescript node module to run (for login, etc) before the tests. Module should be module.exports = function(browser, callback){}')","\t.option('--all', 'Display all metrics')","\t.option('-b --browsers <list of browsers>', 'Browsers to run the test on', function(val) {","\t\treturn val.split(',');","\t})","\t.parse(process.argv);","","var url = program.args[0];","program.output = program.output || 'table';","","var MAX_IMPORTANCE = 30;","if (program.all){","\tMAX_IMPORTANCE = 0;","}","","if (program.verbose && !process.env.DEBUG) {","\tprocess.env.DEBUG = 'bp:*';","}","","require('./index.js')(url, function(err, data) {","\tif (err) {","\t\tdebug(err);","\t\terr.forEach(function(e){","\t\t\tif (e.errno === 'GRID_CONFIG_ERROR'){","\t\t\t\tconsole.log('Please check your Selenium config. Cannot reach grid at '+ e.address + ':' + e.port);","\t\t\t} else {","\t\t\t\tconsole.log(e.stack ? e.stack : e);","\t\t\t}","\t\t});","\t} else {","\t\tif (program.output === 'table') {","\t\t\tconsole.log(generateTable(data));","\t\t} else {","\t\t\tconsole.log(data);","\t\t}","\t}","}, {","\tbrowsers: program.browsers,","\tselenium: program.selenium,","\tusername: program.username,","\taccesskey: program.accesskey,","\tdebugBrowser: program.debug,","\tconfigFile: program.configFile,","\tpreScriptFile: program.prescriptFile","});","","function generateTable(data) {","\tvar cliTable = require('cli-table');","\tvar Docs = require('../docs');","","\tvar apiDocs = new Docs();","\tvar decimalPoints = {","\t\tms: 3,","\t\tcount: 0,","\t\tfps: 3,","\t\tpercentage: 2,","\t}","","\tvar res = [];","\tfor (var i = 0; i < data.length; i++) {","\t\tres.push('\\n\\nBrowser: ', data[i]._browserName + '\\n');","\t\tvar table = new cliTable({","\t\t\thead: ['Metrics', 'Value', 'Unit', 'Source'],","\t\t\tcolAligns: ['right', 'right', 'left', 'right'],","\t\t\tcolWidths: [35, 20, 10, 15]","\t\t});","\t\tfor (var key in data[i]) {","\t\t\tif (key.indexOf('_') === 0)","\t\t\t\tcontinue;","\t\t\tif ((apiDocs.getProp(key, 'importance') || 0) < MAX_IMPORTANCE)","\t\t\t\tcontinue;","","\t\t\tvar val = data[i][key];","\t\t\tvar unit = '' + (apiDocs.getProp(key, 'unit') || '');","\t\t\tif (typeof val === 'number') {","\t\t\t\tif (typeof decimalPoints[unit] !== 'undefined') {","\t\t\t\t\tval = val.toFixed(decimalPoints[unit]);","\t\t\t\t} else {","\t\t\t\t\tval = val + '';","\t\t\t\t}","\t\t\t}","","\t\t\ttable.push([key, val + '', unit, '' + (apiDocs.getProp(key, 'source') || '')]);","\t\t}","\t\ttable = table.sort(function(a, b) {","\t\t\tvar rankA = apiDocs.getProp(a[0], 'importance') || -1;","\t\t\tvar rankB = apiDocs.getProp(b[0], 'importance') || -1;","","\t\t\tif (rankA === rankB) {","\t\t\t\tif (a[3] === b[3]) {","\t\t\t\t\treturn a[0] > b[0] ? 1 : -1;","\t\t\t\t} else {","\t\t\t\t\treturn a[3] > b[3] ? 1 : -1;","\t\t\t\t}","\t\t\t} else {","\t\t\t\treturn rankA > rankB ? 1 : (rankA < rankB ? -1 : 0);","\t\t\t}","\t\t})","\t\tres.push(table.toString());","\t}","\treturn res.join('');","}","","// END of File"],"l":{"3":1,"4":1,"5":1,"7":1,"19":0,"23":1,"24":1,"26":1,"27":1,"28":0,"31":1,"32":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"42":0,"46":0,"47":0,"49":0,"62":1,"63":0,"64":0,"66":0,"67":0,"74":0,"75":0,"76":0,"77":0,"82":0,"83":0,"84":0,"85":0,"86":0,"88":0,"89":0,"90":0,"91":0,"92":0,"94":0,"98":0,"100":0,"101":0,"102":0,"104":0,"105":0,"106":0,"108":0,"111":0,"114":0,"116":0}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/BaseMetrics.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/BaseMetrics.js","s":{"1":1,"2":1,"3":5,"4":5,"5":5,"6":0,"7":5,"8":5,"9":1,"10":0,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1},"b":{"1":[5,5],"2":[5,5],"3":[0,5],"4":[5,5],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"f":{"1":5,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"BaseMetric","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":25}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":34},"end":{"line":13,"column":45}}},"3":{"name":"(anonymous_3)","line":17,"loc":{"start":{"line":17,"column":31},"end":{"line":17,"column":45}}},"4":{"name":"(anonymous_4)","line":21,"loc":{"start":{"line":21,"column":30},"end":{"line":21,"column":45}}},"5":{"name":"(anonymous_5)","line":29,"loc":{"start":{"line":29,"column":17},"end":{"line":29,"column":32}}},"6":{"name":"(anonymous_6)","line":34,"loc":{"start":{"line":34,"column":15},"end":{"line":34,"column":31}}},"7":{"name":"(anonymous_7)","line":48,"loc":{"start":{"line":48,"column":35},"end":{"line":48,"column":46}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"2":{"start":{"line":3,"column":0},"end":{"line":11,"column":1}},"3":{"start":{"line":4,"column":1},"end":{"line":4,"column":17}},"4":{"start":{"line":5,"column":1},"end":{"line":5,"column":41}},"5":{"start":{"line":6,"column":1},"end":{"line":8,"column":2}},"6":{"start":{"line":7,"column":2},"end":{"line":7,"column":19}},"7":{"start":{"line":9,"column":1},"end":{"line":9,"column":32}},"8":{"start":{"line":10,"column":1},"end":{"line":10,"column":18}},"9":{"start":{"line":13,"column":0},"end":{"line":15,"column":2}},"10":{"start":{"line":14,"column":1},"end":{"line":14,"column":51}},"11":{"start":{"line":17,"column":0},"end":{"line":19,"column":2}},"12":{"start":{"line":21,"column":0},"end":{"line":27,"column":2}},"13":{"start":{"line":22,"column":1},"end":{"line":22,"column":43}},"14":{"start":{"line":23,"column":1},"end":{"line":26,"column":2}},"15":{"start":{"line":24,"column":2},"end":{"line":24,"column":31}},"16":{"start":{"line":25,"column":2},"end":{"line":25,"column":25}},"17":{"start":{"line":29,"column":0},"end":{"line":46,"column":1}},"18":{"start":{"line":30,"column":1},"end":{"line":32,"column":2}},"19":{"start":{"line":31,"column":2},"end":{"line":31,"column":13}},"20":{"start":{"line":33,"column":1},"end":{"line":45,"column":2}},"21":{"start":{"line":34,"column":2},"end":{"line":36,"column":5}},"22":{"start":{"line":35,"column":3},"end":{"line":35,"column":20}},"23":{"start":{"line":37,"column":8},"end":{"line":45,"column":2}},"24":{"start":{"line":38,"column":2},"end":{"line":38,"column":16}},"25":{"start":{"line":39,"column":2},"end":{"line":41,"column":3}},"26":{"start":{"line":40,"column":3},"end":{"line":40,"column":42}},"27":{"start":{"line":42,"column":2},"end":{"line":42,"column":14}},"28":{"start":{"line":44,"column":2},"end":{"line":44,"column":15}},"29":{"start":{"line":48,"column":0},"end":{"line":58,"column":2}},"30":{"start":{"line":49,"column":1},"end":{"line":49,"column":17}},"31":{"start":{"line":50,"column":1},"end":{"line":52,"column":2}},"32":{"start":{"line":51,"column":2},"end":{"line":51,"column":24}},"33":{"start":{"line":53,"column":1},"end":{"line":56,"column":2}},"34":{"start":{"line":54,"column":2},"end":{"line":54,"column":57}},"35":{"start":{"line":55,"column":2},"end":{"line":55,"column":17}},"36":{"start":{"line":57,"column":1},"end":{"line":57,"column":51}},"37":{"start":{"line":60,"column":0},"end":{"line":60,"column":28}}},"branchMap":{"1":{"line":4,"type":"binary-expr","locations":[{"start":{"line":4,"column":7},"end":{"line":4,"column":10}},{"start":{"line":4,"column":14},"end":{"line":4,"column":16}}]},"2":{"line":5,"type":"binary-expr","locations":[{"start":{"line":5,"column":15},"end":{"line":5,"column":25}},{"start":{"line":5,"column":29},"end":{"line":5,"column":40}}]},"3":{"line":6,"type":"if","locations":[{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},{"start":{"line":6,"column":1},"end":{"line":6,"column":1}}]},"4":{"line":6,"type":"binary-expr","locations":[{"start":{"line":6,"column":5},"end":{"line":6,"column":17}},{"start":{"line":6,"column":21},"end":{"line":6,"column":48}}]},"5":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},{"start":{"line":23,"column":1},"end":{"line":23,"column":1}}]},"6":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},{"start":{"line":30,"column":1},"end":{"line":30,"column":1}}]},"7":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},{"start":{"line":33,"column":1},"end":{"line":33,"column":1}}]},"8":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":5},"end":{"line":33,"column":21}},{"start":{"line":33,"column":25},"end":{"line":33,"column":41}},{"start":{"line":33,"column":45},"end":{"line":33,"column":66}}]},"9":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":37,"column":8}},{"start":{"line":37,"column":8},"end":{"line":37,"column":8}}]},"10":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},{"start":{"line":50,"column":1},"end":{"line":50,"column":1}}]},"11":{"line":57,"type":"cond-expr","locations":[{"start":{"line":57,"column":31},"end":{"line":57,"column":40}},{"start":{"line":57,"column":43},"end":{"line":57,"column":49}}]}},"code":["var Q = require('q');","","function BaseMetric(cfg) {","\tcfg = cfg || {};","\tthis.probes = cfg.probes || this.probes;","\tif (!this.probes || !Array.isArray(this.probes)) {","\t\tthis.probes = [];","\t}","\tthis.hrtime = process.hrtime();","\tthis.__data = [];","};","","BaseMetric.prototype.getResults = function() {","\tthrow 'getResults not implemented for ' + this.id;","};","","BaseMetric.prototype.onError = function(err) {","","};","","BaseMetric.prototype.onData = function(data) {","\tthis.hrtime = process.hrtime(this.hrtime);","\tif (data) {","\t\tdata.__time = this.hrtime[0];","\t\tthis.__data.push(data);","\t}","};","","var difference = function(a, b) {","\tif (typeof a !== typeof b) {","\t\treturn NaN;","\t}","\tif (Array.isArray(a) && Array.isArray(b) && a.length === b.length) {","\t\treturn a.map(function(el, i) {","\t\t\treturn el - b[i];","\t\t});","\t} else if (typeof a === 'object') {","\t\tvar diff = {};","\t\tfor (var key in a) {","\t\t\tdiff[key] = difference(a[key], b[key]);","\t\t}","\t\treturn diff;","\t} else {","\t\treturn a - b;","\t}","}","","BaseMetric.prototype.__getDeltas = function() {","\tvar deltas = [];","\tif (this.__data.length === 1) {","\t\treturn this.__data[0];","\t}","\tfor (var i = 1; i < this.__data.length; i++) {","\t\tvar x = difference(this.__data[i], this.__data[i - 1]);","\t\tdeltas.push(x);","\t}","\treturn (deltas.length === 1 ? deltas[0] : deltas);","};","","module.exports = BaseMetric;"],"l":{"1":1,"3":1,"4":5,"5":5,"6":5,"7":0,"9":5,"10":5,"13":1,"14":0,"17":1,"21":1,"22":0,"23":0,"24":0,"25":0,"29":1,"30":0,"31":0,"33":0,"34":0,"35":0,"37":0,"38":0,"39":0,"40":0,"42":0,"44":0,"48":1,"49":0,"50":0,"51":0,"53":0,"54":0,"55":0,"57":0,"60":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/ChromeTracingMetrics.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/ChromeTracingMetrics.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":1},"b":{"1":[1,0],"2":[1,1],"3":[1,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"ChromeTracingMetrics","line":13,"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":32}}},"2":{"name":"(anonymous_2)","line":26,"loc":{"start":{"line":26,"column":39},"end":{"line":26,"column":53}}},"3":{"name":"(anonymous_3)","line":27,"loc":{"start":{"line":27,"column":33},"end":{"line":27,"column":51}}},"4":{"name":"(anonymous_4)","line":45,"loc":{"start":{"line":45,"column":40},"end":{"line":45,"column":55}}},"5":{"name":"(anonymous_5)","line":56,"loc":{"start":{"line":56,"column":44},"end":{"line":56,"column":55}}},"6":{"name":"(anonymous_6)","line":64,"loc":{"start":{"line":64,"column":50},"end":{"line":64,"column":71}}},"7":{"name":"(anonymous_7)","line":75,"loc":{"start":{"line":75,"column":57},"end":{"line":75,"column":78}}},"8":{"name":"(anonymous_8)","line":79,"loc":{"start":{"line":79,"column":46},"end":{"line":79,"column":58}}},"9":{"name":"(anonymous_9)","line":90,"loc":{"start":{"line":90,"column":62},"end":{"line":90,"column":83}}}},"statementMap":{"1":{"start":{"line":6,"column":0},"end":{"line":11,"column":61}},"2":{"start":{"line":13,"column":0},"end":{"line":16,"column":1}},"3":{"start":{"line":14,"column":1},"end":{"line":14,"column":36}},"4":{"start":{"line":15,"column":1},"end":{"line":15,"column":44}},"5":{"start":{"line":18,"column":0},"end":{"line":18,"column":60}},"6":{"start":{"line":20,"column":0},"end":{"line":20,"column":59}},"7":{"start":{"line":21,"column":0},"end":{"line":21,"column":80}},"8":{"start":{"line":23,"column":0},"end":{"line":23,"column":37}},"9":{"start":{"line":24,"column":0},"end":{"line":24,"column":93}},"10":{"start":{"line":26,"column":0},"end":{"line":43,"column":2}},"11":{"start":{"line":27,"column":1},"end":{"line":41,"column":4}},"12":{"start":{"line":28,"column":2},"end":{"line":39,"column":3}},"13":{"start":{"line":29,"column":3},"end":{"line":33,"column":6}},"14":{"start":{"line":35,"column":3},"end":{"line":38,"column":12}},"15":{"start":{"line":40,"column":2},"end":{"line":40,"column":17}},"16":{"start":{"line":42,"column":1},"end":{"line":42,"column":15}},"17":{"start":{"line":45,"column":0},"end":{"line":54,"column":2}},"18":{"start":{"line":46,"column":1},"end":{"line":53,"column":2}},"19":{"start":{"line":47,"column":2},"end":{"line":47,"column":23}},"20":{"start":{"line":48,"column":2},"end":{"line":50,"column":3}},"21":{"start":{"line":49,"column":3},"end":{"line":49,"column":43}},"22":{"start":{"line":51,"column":8},"end":{"line":53,"column":2}},"23":{"start":{"line":52,"column":2},"end":{"line":52,"column":42}},"24":{"start":{"line":56,"column":0},"end":{"line":62,"column":2}},"25":{"start":{"line":57,"column":1},"end":{"line":57,"column":18}},"26":{"start":{"line":58,"column":1},"end":{"line":58,"column":46}},"27":{"start":{"line":59,"column":1},"end":{"line":59,"column":47}},"28":{"start":{"line":60,"column":1},"end":{"line":60,"column":52}},"29":{"start":{"line":61,"column":1},"end":{"line":61,"column":16}},"30":{"start":{"line":64,"column":0},"end":{"line":69,"column":2}},"31":{"start":{"line":65,"column":1},"end":{"line":67,"column":2}},"32":{"start":{"line":66,"column":2},"end":{"line":66,"column":61}},"33":{"start":{"line":68,"column":1},"end":{"line":68,"column":31}},"34":{"start":{"line":75,"column":0},"end":{"line":87,"column":2}},"35":{"start":{"line":76,"column":1},"end":{"line":86,"column":2}},"36":{"start":{"line":78,"column":2},"end":{"line":78,"column":30}},"37":{"start":{"line":79,"column":2},"end":{"line":81,"column":12}},"38":{"start":{"line":80,"column":3},"end":{"line":80,"column":31}},"39":{"start":{"line":83,"column":2},"end":{"line":83,"column":69}},"40":{"start":{"line":84,"column":2},"end":{"line":84,"column":74}},"41":{"start":{"line":85,"column":2},"end":{"line":85,"column":50}},"42":{"start":{"line":90,"column":0},"end":{"line":94,"column":2}},"43":{"start":{"line":91,"column":1},"end":{"line":93,"column":2}},"44":{"start":{"line":92,"column":2},"end":{"line":92,"column":88}},"45":{"start":{"line":96,"column":0},"end":{"line":96,"column":38}}},"branchMap":{"1":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":2},"end":{"line":28,"column":2}},{"start":{"line":28,"column":2},"end":{"line":28,"column":2}}]},"2":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":6},"end":{"line":28,"column":25}},{"start":{"line":28,"column":29},"end":{"line":28,"column":61}}]},"3":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":4},"end":{"line":36,"column":58}},{"start":{"line":36,"column":62},"end":{"line":36,"column":64}}]},"4":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},{"start":{"line":46,"column":1},"end":{"line":46,"column":1}}]},"5":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":2},"end":{"line":48,"column":2}},{"start":{"line":48,"column":2},"end":{"line":48,"column":2}}]},"6":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":6},"end":{"line":48,"column":44}},{"start":{"line":48,"column":48},"end":{"line":48,"column":87}}]},"7":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":51,"column":8}},{"start":{"line":51,"column":8},"end":{"line":51,"column":8}}]},"8":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},{"start":{"line":65,"column":1},"end":{"line":65,"column":1}}]},"9":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},{"start":{"line":76,"column":1},"end":{"line":76,"column":1}}]},"10":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},{"start":{"line":91,"column":1},"end":{"line":91,"column":1}}]}},"code":["/*","Based on ","https://chromium.googlesource.com/chromium/src/+/e2f820e34c43102785cfc9f38bde8b5a052938b8/tools/telemetry/telemetry/web_perf/metrics/smoothness.py","*/","","var Q = require('q'),","\tBaseMetrics = require('./BaseMetrics'),","\thelpers = require('../helpers'),","\tstatistics = require('./util/statistics'),","\tRenderingStats = require('./util/RenderingStats'),","\tdebug = require('debug')('bp:metrics:ChromeTracingMetrics');","","function ChromeTracingMetrics() {","\tBaseMetrics.apply(this, arguments);","\tthis.renderingStats = new RenderingStats();","}","","require('util').inherits(ChromeTracingMetrics, BaseMetrics);","","ChromeTracingMetrics.prototype.id = 'ChromeTracingMetrics';","ChromeTracingMetrics.prototype.probes = ['PerfLogProbe', 'AndroidTracingProbe'];","","var TRACE_CATEGORIES = ['benchmark'];","var TraceCategoryRegEx = new RegExp('\\\\b(' + TRACE_CATEGORIES.join('|') + '|__metadata)\\\\b');","","ChromeTracingMetrics.prototype.setup = function(cfg) {","\tcfg.browsers = cfg.browsers.map(function(browser) {","\t\tif (browser.browserName && browser.browserName === 'chrome') {","\t\t\thelpers.extend(browser, {","\t\t\t\tchromeOptions: {","\t\t\t\t\tperfLoggingPrefs: {}","\t\t\t\t}","\t\t\t});","","\t\t\tbrowser.chromeOptions.perfLoggingPrefs.traceCategories = [","\t\t\t\tbrowser.chromeOptions.perfLoggingPrefs.traceCategories || '',","\t\t\t\tTRACE_CATEGORIES","\t\t\t].join();","\t\t}","\t\treturn browser;","\t});","\treturn Q(cfg);","};","","ChromeTracingMetrics.prototype.onData = function(data) {","\tif (data.type === 'perfLog') {","\t\tvar msg = data.value;","\t\tif (msg.method === 'Tracing.dataCollected' && TraceCategoryRegEx.test(msg.params.cat)) {","\t\t\tthis.renderingStats.addData(msg.params);","\t\t}","\t} else if (data.type === 'androidTracing') {","\t\tthis.renderingStats.addData(data.value);","\t}","};","","ChromeTracingMetrics.prototype.getResults = function() {","\tvar results = {};","\tvar frames = this.renderingStats.getFrames();","\tthis._ComputeFrameTimeMetric(frames, results);","\tthis._ComputeFrameTimeDiscrepancy(frames, results);","\treturn results;","};","","ChromeTracingMetrics.prototype._HasEnoughFrames = function(timestamps) {","\tif (timestamps.length < 2) {","\t\tdebug('Does not have enough frames for computing tracing');","\t}","\treturn timestamps.length >= 2;","};","","/*","Returns Values for the frame time metrics.","This includes the raw and mean frame times, as well as the percentage of frames that were hitting 60 fps.","*/","ChromeTracingMetrics.prototype._ComputeFrameTimeMetric = function(stats, res) {","\tif (this._HasEnoughFrames(stats.frame_timestamps)) {","","\t\tvar smooth_threshold = 17.0;","\t\tvar smooth_count = stats.frame_times.filter(function(t) {","\t\t\treturn t < smooth_threshold;","\t\t}).length;","","\t\tres.mean_frame_time = statistics.ArithmeticMean(stats.frame_times);","\t\tres.percentage_smooth = smooth_count / stats.frame_times.length * 100.0;","\t\tres.frames_per_sec = 1000 / res.mean_frame_time;","\t}","};","","// Returns a Value for the absolute discrepancy of frame time stamps","ChromeTracingMetrics.prototype._ComputeFrameTimeDiscrepancy = function(stats, res) {","\tif (this._HasEnoughFrames(stats.frame_timestamps)) {","\t\tres.frame_time_discrepancy = statistics.TimestampsDiscrepancy(stats.frame_timestamps);","\t}","};","","module.exports = ChromeTracingMetrics;"],"l":{"6":1,"13":1,"14":1,"15":1,"18":1,"20":1,"21":1,"23":1,"24":1,"26":1,"27":1,"28":1,"29":1,"35":1,"40":1,"42":1,"45":1,"46":0,"47":0,"48":0,"49":0,"51":0,"52":0,"56":1,"57":0,"58":0,"59":0,"60":0,"61":0,"64":1,"65":0,"66":0,"68":0,"75":1,"76":0,"78":0,"79":0,"80":0,"83":0,"84":0,"85":0,"90":1,"91":0,"92":0,"96":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/util/statistics.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/util/statistics.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":1,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":1,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"Total","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":21}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":21},"end":{"line":13,"column":73}}},"3":{"name":"DivideIfPossibleOrZero","line":22,"loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":56}}},"4":{"name":"ArithmeticMean","line":35,"loc":{"start":{"line":35,"column":0},"end":{"line":35,"column":30}}},"5":{"name":"NormalizeSamples","line":53,"loc":{"start":{"line":53,"column":0},"end":{"line":53,"column":35}}},"6":{"name":"(anonymous_6)","line":64,"loc":{"start":{"line":64,"column":24},"end":{"line":64,"column":36}}},"7":{"name":"Clamp","line":83,"loc":{"start":{"line":83,"column":0},"end":{"line":83,"column":33}}},"8":{"name":"Discrepancy","line":100,"loc":{"start":{"line":100,"column":0},"end":{"line":100,"column":46}}},"9":{"name":"TimestampsDiscrepancy","line":193,"loc":{"start":{"line":193,"column":0},"end":{"line":193,"column":69}}}},"statementMap":{"1":{"start":{"line":9,"column":0},"end":{"line":17,"column":1}},"2":{"start":{"line":10,"column":1},"end":{"line":16,"column":2}},"3":{"start":{"line":11,"column":2},"end":{"line":11,"column":14}},"4":{"start":{"line":12,"column":8},"end":{"line":16,"column":2}},"5":{"start":{"line":13,"column":2},"end":{"line":15,"column":5}},"6":{"start":{"line":14,"column":3},"end":{"line":14,"column":39}},"7":{"start":{"line":22,"column":0},"end":{"line":24,"column":1}},"8":{"start":{"line":23,"column":1},"end":{"line":23,"column":50}},"9":{"start":{"line":35,"column":0},"end":{"line":39,"column":1}},"10":{"start":{"line":36,"column":1},"end":{"line":36,"column":31}},"11":{"start":{"line":37,"column":1},"end":{"line":37,"column":40}},"12":{"start":{"line":38,"column":1},"end":{"line":38,"column":67}},"13":{"start":{"line":53,"column":0},"end":{"line":78,"column":1}},"14":{"start":{"line":54,"column":1},"end":{"line":56,"column":2}},"15":{"start":{"line":55,"column":2},"end":{"line":55,"column":11}},"16":{"start":{"line":57,"column":1},"end":{"line":57,"column":26}},"17":{"start":{"line":58,"column":1},"end":{"line":58,"column":41}},"18":{"start":{"line":59,"column":1},"end":{"line":59,"column":42}},"19":{"start":{"line":60,"column":1},"end":{"line":60,"column":36}},"20":{"start":{"line":61,"column":1},"end":{"line":61,"column":56}},"21":{"start":{"line":62,"column":1},"end":{"line":69,"column":2}},"22":{"start":{"line":63,"column":2},"end":{"line":68,"column":3}},"23":{"start":{"line":65,"column":4},"end":{"line":65,"column":15}},"24":{"start":{"line":70,"column":1},"end":{"line":70,"column":49}},"25":{"start":{"line":71,"column":1},"end":{"line":73,"column":2}},"26":{"start":{"line":72,"column":2},"end":{"line":72,"column":51}},"27":{"start":{"line":74,"column":1},"end":{"line":77,"column":2}},"28":{"start":{"line":83,"column":0},"end":{"line":88,"column":1}},"29":{"start":{"line":84,"column":1},"end":{"line":84,"column":44}},"30":{"start":{"line":85,"column":1},"end":{"line":85,"column":47}},"31":{"start":{"line":86,"column":1},"end":{"line":86,"column":30}},"32":{"start":{"line":87,"column":1},"end":{"line":87,"column":45}},"33":{"start":{"line":100,"column":0},"end":{"line":160,"column":1}},"34":{"start":{"line":101,"column":1},"end":{"line":103,"column":2}},"35":{"start":{"line":102,"column":2},"end":{"line":102,"column":11}},"36":{"start":{"line":105,"column":1},"end":{"line":105,"column":31}},"37":{"start":{"line":106,"column":1},"end":{"line":106,"column":45}},"38":{"start":{"line":107,"column":1},"end":{"line":109,"column":24}},"39":{"start":{"line":111,"column":1},"end":{"line":140,"column":2}},"40":{"start":{"line":113,"column":2},"end":{"line":113,"column":23}},"41":{"start":{"line":114,"column":2},"end":{"line":123,"column":3}},"42":{"start":{"line":115,"column":3},"end":{"line":115,"column":41}},"43":{"start":{"line":116,"column":3},"end":{"line":116,"column":28}},"44":{"start":{"line":117,"column":3},"end":{"line":118,"column":22}},"45":{"start":{"line":118,"column":4},"end":{"line":118,"column":22}},"46":{"start":{"line":119,"column":3},"end":{"line":119,"column":33}},"47":{"start":{"line":120,"column":3},"end":{"line":121,"column":22}},"48":{"start":{"line":121,"column":4},"end":{"line":121,"column":22}},"49":{"start":{"line":122,"column":3},"end":{"line":122,"column":39}},"50":{"start":{"line":125,"column":2},"end":{"line":129,"column":3}},"51":{"start":{"line":126,"column":3},"end":{"line":126,"column":23}},"52":{"start":{"line":127,"column":3},"end":{"line":127,"column":22}},"53":{"start":{"line":128,"column":3},"end":{"line":128,"column":28}},"54":{"start":{"line":130,"column":2},"end":{"line":134,"column":3}},"55":{"start":{"line":131,"column":3},"end":{"line":131,"column":30}},"56":{"start":{"line":132,"column":3},"end":{"line":132,"column":22}},"57":{"start":{"line":133,"column":3},"end":{"line":133,"column":32}},"58":{"start":{"line":135,"column":2},"end":{"line":139,"column":3}},"59":{"start":{"line":136,"column":3},"end":{"line":136,"column":23}},"60":{"start":{"line":137,"column":3},"end":{"line":137,"column":35}},"61":{"start":{"line":138,"column":3},"end":{"line":138,"column":41}},"62":{"start":{"line":143,"column":1},"end":{"line":158,"column":2}},"63":{"start":{"line":144,"column":2},"end":{"line":157,"column":3}},"64":{"start":{"line":146,"column":3},"end":{"line":146,"column":44}},"65":{"start":{"line":149,"column":3},"end":{"line":149,"column":58}},"66":{"start":{"line":150,"column":3},"end":{"line":150,"column":85}},"67":{"start":{"line":151,"column":3},"end":{"line":151,"column":89}},"68":{"start":{"line":154,"column":3},"end":{"line":154,"column":56}},"69":{"start":{"line":155,"column":3},"end":{"line":155,"column":81}},"70":{"start":{"line":156,"column":3},"end":{"line":156,"column":87}},"71":{"start":{"line":159,"column":1},"end":{"line":159,"column":30}},"72":{"start":{"line":193,"column":0},"end":{"line":212,"column":1}},"73":{"start":{"line":194,"column":1},"end":{"line":194,"column":62}},"74":{"start":{"line":195,"column":1},"end":{"line":195,"column":80}},"75":{"start":{"line":197,"column":1},"end":{"line":199,"column":2}},"76":{"start":{"line":198,"column":2},"end":{"line":198,"column":11}},"77":{"start":{"line":201,"column":1},"end":{"line":201,"column":43}},"78":{"start":{"line":202,"column":1},"end":{"line":203,"column":30}},"79":{"start":{"line":204,"column":1},"end":{"line":204,"column":56}},"80":{"start":{"line":205,"column":1},"end":{"line":205,"column":45}},"81":{"start":{"line":207,"column":1},"end":{"line":210,"column":83}},"82":{"start":{"line":208,"column":2},"end":{"line":208,"column":30}},"83":{"start":{"line":210,"column":2},"end":{"line":210,"column":83}},"84":{"start":{"line":211,"column":1},"end":{"line":211,"column":20}},"85":{"start":{"line":214,"column":0},"end":{"line":217,"column":2}}},"branchMap":{"1":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},{"start":{"line":10,"column":1},"end":{"line":10,"column":1}}]},"2":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":8},"end":{"line":12,"column":8}},{"start":{"line":12,"column":8},"end":{"line":12,"column":8}}]},"3":{"line":23,"type":"cond-expr","locations":[{"start":{"line":23,"column":22},"end":{"line":23,"column":45}},{"start":{"line":23,"column":48},"end":{"line":23,"column":49}}]},"4":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},{"start":{"line":54,"column":1},"end":{"line":54,"column":1}}]},"5":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},{"start":{"line":62,"column":1},"end":{"line":62,"column":1}}]},"6":{"line":84,"type":"cond-expr","locations":[{"start":{"line":84,"column":36},"end":{"line":84,"column":37}},{"start":{"line":84,"column":40},"end":{"line":84,"column":43}}]},"7":{"line":85,"type":"cond-expr","locations":[{"start":{"line":85,"column":38},"end":{"line":85,"column":39}},{"start":{"line":85,"column":42},"end":{"line":85,"column":46}}]},"8":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},{"start":{"line":101,"column":1},"end":{"line":101,"column":1}}]},"9":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":1},"end":{"line":111,"column":1}},{"start":{"line":111,"column":1},"end":{"line":111,"column":1}}]},"10":{"line":117,"type":"binary-expr","locations":[{"start":{"line":117,"column":10},"end":{"line":117,"column":39}},{"start":{"line":117,"column":43},"end":{"line":117,"column":75}}]},"11":{"line":120,"type":"binary-expr","locations":[{"start":{"line":120,"column":10},"end":{"line":120,"column":39}},{"start":{"line":120,"column":43},"end":{"line":120,"column":76}}]},"12":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":2},"end":{"line":125,"column":2}},{"start":{"line":125,"column":2},"end":{"line":125,"column":2}}]},"13":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":2},"end":{"line":135,"column":2}},{"start":{"line":135,"column":2},"end":{"line":135,"column":2}}]},"14":{"line":194,"type":"cond-expr","locations":[{"start":{"line":194,"column":46},"end":{"line":194,"column":50}},{"start":{"line":194,"column":53},"end":{"line":194,"column":61}}]},"15":{"line":195,"type":"cond-expr","locations":[{"start":{"line":195,"column":58},"end":{"line":195,"column":62}},{"start":{"line":195,"column":65},"end":{"line":195,"column":79}}]},"16":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":1},"end":{"line":197,"column":1}},{"start":{"line":197,"column":1},"end":{"line":197,"column":1}}]},"17":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":1},"end":{"line":207,"column":1}},{"start":{"line":207,"column":1},"end":{"line":207,"column":1}}]}},"code":["/*","Based on ","https://chromium.googlesource.com/chromium/src/+/6df438ed2adaf24fa2f4a92d4f3863825247b910/tools/telemetry/telemetry/util/statistics.py","*/","","/* ","Returns the float value of a number or the sum of a list.","*/","function Total(data) {","\tif (typeof data === 'number') {","\t\treturn data;","\t} else if (Array.isArray(data)) {","\t\treturn data.reduce(function(previousValue, currentValue, index, array) {","\t\t\treturn previousValue + currentValue;","\t\t});","\t}","}","","/* ","Returns the quotient, or zero if the denominator is zero","*/","function DivideIfPossibleOrZero(numerator, denominator) {","\treturn denominator ? numerator / denominator : 0;","}","","/*"," Calculates arithmetic mean.","","  Args:","    data: A list of samples.","","  Returns:","    The arithmetic mean value, or 0 if the list is empty.","*/","function ArithmeticMean(data) {","\tnumerator_total = Total(data);","\tdenominator_total = Total(data.length);","\treturn DivideIfPossibleOrZero(numerator_total, denominator_total);","}","","/*","Sorts the samples, and map them linearly to the range [0,1].","","They're mapped such that for the N samples, the first sample is 0.5/N and the","last sample is (N-0.5)/N.","","Background: The discrepancy of the sample set i/(N-1); i=0, ..., N-1 is 2/N,","twice the discrepancy of the sample set (i+1/2)/N; i=0, ..., N-1. In our case","we don't want to distinguish between these two cases, as our original domain","is not bounded (it is for Monte Carlo integration, where discrepancy was","first used).","*/","function NormalizeSamples(samples) {","\tif (!samples) {","\t\treturn 1;","\t}","\tsamples = samples.sort();","\tvar low = Math.min.apply(null, samples);","\tvar high = Math.max.apply(null, samples);","\tvar new_low = 0.5 / samples.length;","\tvar new_high = (samples.length - 0.5) / samples.length;","\tif (high - low == 0.0) {","\t\treturn {","\t\t\tsamples: samples.map(function(s) {","\t\t\t\treturn 0.5;","\t\t\t}),","\t\t\tscale: 1","\t\t}","\t}","\tvar scale = (new_high - new_low) / (high - low);","\tfor (var i = 0; i < samples.length; i++) {","\t\tsamples[i] = (samples[i] - low) * scale + new_low","\t}","\treturn {","\t\tsamples: samples,","\t\tscale: scale","\t}","}","","/*","Clamp a value between some low and high value","*/","function Clamp(value, low, high) {","\tlow = typeof low === 'undefined' ? 0 : low;","\thigh = typeof high === 'undefined' ? 0 : high;","\tconsole.log(value, low, high)","\treturn Math.min(Math.max(value, low), high);","}","","/*","Computes the discrepancy of a set of 1D samples from the interval [0,1].","","The samples must be sorted. We define the discrepancy of an empty set","of samples to be zero.","","http://en.wikipedia.org/wiki/Low-discrepancy_sequence","http://mathworld.wolfram.com/Discrepancy.html","*/","","function Discrepancy(samples, location_count) {","\tif (!samples) {","\t\treturn 0;","\t}","","\tvar max_local_discrepancy = 0;","\tvar inv_sample_count = 1.0 / samples.length;","\tvar locations = [],","\t\tcount_less = [],","\t\tcount_less_equal = [];","","\tif (location_count) {","\t\t//Generate list of equally spaced locations.","\t\tvar sample_index = 0;","\t\tfor (var i = 0; i < location_count; i++) {","\t\t\tvar location = i / location_count - 1;","\t\t\tlocations.push(location);","\t\t\twhile (sample_index < samples.length && samples[sample_index] < location)","\t\t\t\tsample_index += 1;","\t\t\tcount_less.push(sample_index);","\t\t\twhile (sample_index < samples.length && samples[sample_index] <= location)","\t\t\t\tsample_index += 1;","\t\t\tcount_less_equal.push(sample_index);","\t\t}","\t} else {","\t\tif (samples[0] > 0.0) {","\t\t\tlocations.push(0.0);","\t\t\tcount_less.push(0);","\t\t\tcount_less_equal.push(0);","\t\t}","\t\tfor (var i = 0; i < samples.length; i++) {","\t\t\tlocations.push(samples[i]);","\t\t\tcount_less.push(i);","\t\t\tcount_less_equal.push(i + 1);","\t\t}","\t\tif (samples[-1] < 1.0) {","\t\t\tlocations.push(1.0);","\t\t\tcount_less.push(samples.length);","\t\t\tcount_less_equal.push(samples.length);","\t\t}","\t}","","\t// Iterate over the intervals defined by any pair of locations.","\tfor (var i = 0; i < locations.length; i++) {","\t\tfor (var j = i + 1; j < locations.length; j++) {","\t\t\t// # Length of interval","\t\t\tvar length = locations[j] - locations[i];","","\t\t\t// Local discrepancy for closed interval","\t\t\tvar count_closed = count_less_equal[j] - count_less[i];","\t\t\tvar local_discrepancy_closed = Math.abs(count_closed * inv_sample_count - length);","\t\t\tvar max_local_discrepancy = Math.max(local_discrepancy_closed, max_local_discrepancy);","","\t\t\t// Local discrepancy for open interval","\t\t\tvar count_open = count_less[j] - count_less_equal[i];","\t\t\tvar local_discrepancy_open = Math.abs(count_open * inv_sample_count - length);","\t\t\tvar max_local_discrepancy = Math.max(local_discrepancy_open, max_local_discrepancy);","\t\t}","\t}","\treturn max_local_discrepancy;","}","","/*","A discrepancy based metric for measuring timestamp jank.","","TimestampsDiscrepancy quantifies the largest area of jank observed in a series","of timestamps.  Note that this is different from metrics based on the","max_time_interval. For example, the time stamp series A = [0,1,2,3,5,6] and","B = [0,1,2,3,5,7] have the same max_time_interval = 2, but","Discrepancy(B) > Discrepancy(A).","","Two variants of discrepancy can be computed:","","Relative discrepancy is following the original definition of","discrepancy. It characterized the largest area of jank, relative to the","duration of the entire time stamp series.  We normalize the raw results,","because the best case discrepancy for a set of N samples is 1/N (for","equally spaced samples), and we want our metric to report 0.0 in that","case.","","Absolute discrepancy also characterizes the largest area of jank, but its","value wouldn't change (except for imprecisions due to a low","|interval_multiplier|) if additional 'good' intervals were added to an","exisiting list of time stamps.  Its range is [0,inf] and the unit is","milliseconds.","","The time stamp series C = [0,2,3,4] and D = [0,2,3,4,5] have the same","absolute discrepancy, but D has lower relative discrepancy than C.","","|timestamps| may be a list of lists S = [S_1, S_2, ..., S_N], where each","S_i is a time stamp series. In that case, the discrepancy D(S) is:","D(S) = max(D(S_1), D(S_2), ..., D(S_N))","*/","function TimestampsDiscrepancy(timestamps, absolute, location_count) {","\tabsolute = typeof absolute === 'undefined' ? true : absolute;","\tlocation_count = typeof location_count === 'undefined' ? null : location_count;","","\tif (!timestamps) {","\t\treturn 0;","\t}","","\tvar normal = NormalizeSamples(timestamps);","\tvar samples = normal.samples,","\t\tsample_scale = normal.scale;","\tvar discrepancy = Discrepancy(samples, location_count);","\tvar inv_sample_count = 1.0 / samples.length;","","\tif (absolute)","\t\tdiscrepancy /= sample_scale;","\telse","\t\tdiscrepancy = Clamp((discrepancy - inv_sample_count) / (1.0 - inv_sample_count));","\treturn discrepancy;","}","","module.exports = {","\tArithmeticMean: ArithmeticMean,","\tTimestampsDiscrepancy: TimestampsDiscrepancy","};"],"l":{"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"22":1,"23":0,"35":1,"36":0,"37":0,"38":0,"53":1,"54":0,"55":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"65":0,"70":0,"71":0,"72":0,"74":0,"83":1,"84":0,"85":0,"86":0,"87":0,"100":1,"101":0,"102":0,"105":0,"106":0,"107":0,"111":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"125":0,"126":0,"127":0,"128":0,"130":0,"131":0,"132":0,"133":0,"135":0,"136":0,"137":0,"138":0,"143":0,"144":0,"146":0,"149":0,"150":0,"151":0,"154":0,"155":0,"156":0,"159":0,"193":1,"194":0,"195":0,"197":0,"198":0,"201":0,"202":0,"204":0,"205":0,"207":0,"208":0,"210":0,"211":0,"214":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/util/RenderingStats.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/util/RenderingStats.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":0,"59":0,"60":1,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"f":{"1":0,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"fnMap":{"1":{"name":"GetTimestampEventName","line":12,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":44}}},"2":{"name":"(anonymous_2)","line":28,"loc":{"start":{"line":28,"column":21},"end":{"line":28,"column":32}}},"3":{"name":"(anonymous_3)","line":42,"loc":{"start":{"line":42,"column":35},"end":{"line":42,"column":50}}},"4":{"name":"(anonymous_4)","line":48,"loc":{"start":{"line":48,"column":37},"end":{"line":48,"column":48}}},"5":{"name":"(anonymous_5)","line":50,"loc":{"start":{"line":50,"column":18},"end":{"line":50,"column":33}}},"6":{"name":"findRenderProcess","line":76,"loc":{"start":{"line":76,"column":0},"end":{"line":76,"column":35}}},"7":{"name":"(anonymous_7)","line":88,"loc":{"start":{"line":88,"column":41},"end":{"line":88,"column":86}}},"8":{"name":"(anonymous_8)","line":92,"loc":{"start":{"line":92,"column":11},"end":{"line":92,"column":24}}},"9":{"name":"(anonymous_9)","line":103,"loc":{"start":{"line":103,"column":46},"end":{"line":103,"column":62}}},"10":{"name":"(anonymous_10)","line":117,"loc":{"start":{"line":117,"column":60},"end":{"line":117,"column":99}}},"11":{"name":"(anonymous_11)","line":119,"loc":{"start":{"line":119,"column":16},"end":{"line":119,"column":32}}},"12":{"name":"(anonymous_12)","line":124,"loc":{"start":{"line":124,"column":69},"end":{"line":124,"column":102}}},"13":{"name":"(anonymous_13)","line":127,"loc":{"start":{"line":127,"column":16},"end":{"line":127,"column":32}}}},"statementMap":{"1":{"start":{"line":10,"column":0},"end":{"line":10,"column":58}},"2":{"start":{"line":12,"column":0},"end":{"line":26,"column":1}},"3":{"start":{"line":13,"column":1},"end":{"line":13,"column":22}},"4":{"start":{"line":14,"column":1},"end":{"line":24,"column":2}},"5":{"start":{"line":15,"column":2},"end":{"line":15,"column":24}},"6":{"start":{"line":16,"column":2},"end":{"line":23,"column":3}},"7":{"start":{"line":17,"column":3},"end":{"line":22,"column":4}},"8":{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},"9":{"start":{"line":19,"column":5},"end":{"line":19,"column":22}},"10":{"start":{"line":21,"column":4},"end":{"line":21,"column":27}},"11":{"start":{"line":25,"column":1},"end":{"line":25,"column":61}},"12":{"start":{"line":28,"column":0},"end":{"line":30,"column":2}},"13":{"start":{"line":29,"column":1},"end":{"line":29,"column":18}},"14":{"start":{"line":33,"column":0},"end":{"line":38,"column":1}},"15":{"start":{"line":39,"column":0},"end":{"line":39,"column":62}},"16":{"start":{"line":42,"column":0},"end":{"line":46,"column":2}},"17":{"start":{"line":43,"column":1},"end":{"line":45,"column":2}},"18":{"start":{"line":44,"column":2},"end":{"line":44,"column":25}},"19":{"start":{"line":48,"column":0},"end":{"line":73,"column":2}},"20":{"start":{"line":49,"column":1},"end":{"line":49,"column":26}},"21":{"start":{"line":50,"column":1},"end":{"line":52,"column":4}},"22":{"start":{"line":51,"column":2},"end":{"line":51,"column":33}},"23":{"start":{"line":54,"column":1},"end":{"line":54,"column":28}},"24":{"start":{"line":55,"column":1},"end":{"line":55,"column":23}},"25":{"start":{"line":56,"column":1},"end":{"line":56,"column":42}},"26":{"start":{"line":58,"column":1},"end":{"line":58,"column":44}},"27":{"start":{"line":59,"column":1},"end":{"line":59,"column":60}},"28":{"start":{"line":61,"column":1},"end":{"line":61,"column":70}},"29":{"start":{"line":62,"column":1},"end":{"line":62,"column":57}},"30":{"start":{"line":64,"column":1},"end":{"line":64,"column":69}},"31":{"start":{"line":65,"column":1},"end":{"line":65,"column":56}},"32":{"start":{"line":66,"column":1},"end":{"line":68,"column":2}},"33":{"start":{"line":67,"column":2},"end":{"line":67,"column":48}},"34":{"start":{"line":69,"column":1},"end":{"line":72,"column":3}},"35":{"start":{"line":76,"column":0},"end":{"line":86,"column":1}},"36":{"start":{"line":80,"column":1},"end":{"line":84,"column":2}},"37":{"start":{"line":81,"column":2},"end":{"line":83,"column":3}},"38":{"start":{"line":82,"column":3},"end":{"line":82,"column":24}},"39":{"start":{"line":85,"column":1},"end":{"line":85,"column":82}},"40":{"start":{"line":88,"column":0},"end":{"line":101,"column":2}},"41":{"start":{"line":89,"column":1},"end":{"line":89,"column":32}},"42":{"start":{"line":90,"column":1},"end":{"line":90,"column":15}},"43":{"start":{"line":91,"column":1},"end":{"line":100,"column":3}},"44":{"start":{"line":93,"column":3},"end":{"line":98,"column":4}},"45":{"start":{"line":94,"column":4},"end":{"line":94,"column":26}},"46":{"start":{"line":95,"column":4},"end":{"line":97,"column":5}},"47":{"start":{"line":96,"column":5},"end":{"line":96,"column":24}},"48":{"start":{"line":103,"column":0},"end":{"line":115,"column":2}},"49":{"start":{"line":104,"column":1},"end":{"line":104,"column":53}},"50":{"start":{"line":105,"column":1},"end":{"line":107,"column":2}},"51":{"start":{"line":106,"column":2},"end":{"line":106,"column":51}},"52":{"start":{"line":108,"column":1},"end":{"line":114,"column":2}},"53":{"start":{"line":109,"column":2},"end":{"line":109,"column":46}},"54":{"start":{"line":110,"column":2},"end":{"line":113,"column":3}},"55":{"start":{"line":111,"column":3},"end":{"line":112,"column":61}},"56":{"start":{"line":117,"column":0},"end":{"line":122,"column":2}},"57":{"start":{"line":118,"column":1},"end":{"line":118,"column":63}},"58":{"start":{"line":119,"column":1},"end":{"line":121,"column":4}},"59":{"start":{"line":120,"column":2},"end":{"line":120,"column":33}},"60":{"start":{"line":124,"column":0},"end":{"line":135,"column":1}},"61":{"start":{"line":125,"column":1},"end":{"line":125,"column":71}},"62":{"start":{"line":126,"column":1},"end":{"line":126,"column":69}},"63":{"start":{"line":127,"column":1},"end":{"line":134,"column":4}},"64":{"start":{"line":128,"column":2},"end":{"line":128,"column":32}},"65":{"start":{"line":129,"column":2},"end":{"line":133,"column":3}},"66":{"start":{"line":130,"column":3},"end":{"line":130,"column":126}},"67":{"start":{"line":132,"column":3},"end":{"line":132,"column":47}},"68":{"start":{"line":137,"column":0},"end":{"line":137,"column":32}}},"branchMap":{"1":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":2},"end":{"line":16,"column":2}},{"start":{"line":16,"column":2},"end":{"line":16,"column":2}}]},"2":{"line":16,"type":"binary-expr","locations":[{"start":{"line":16,"column":6},"end":{"line":16,"column":23}},{"start":{"line":16,"column":27},"end":{"line":16,"column":91}},{"start":{"line":16,"column":95},"end":{"line":16,"column":162}}]},"3":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":3},"end":{"line":17,"column":3}},{"start":{"line":17,"column":3},"end":{"line":17,"column":3}}]},"4":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":7},"end":{"line":17,"column":45}},{"start":{"line":17,"column":49},"end":{"line":17,"column":88}}]},"5":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":18,"column":4}},{"start":{"line":18,"column":4},"end":{"line":18,"column":4}}]},"6":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},{"start":{"line":43,"column":1},"end":{"line":43,"column":1}}]},"7":{"line":51,"type":"cond-expr","locations":[{"start":{"line":51,"column":25},"end":{"line":51,"column":26}},{"start":{"line":51,"column":29},"end":{"line":51,"column":31}}]},"8":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},{"start":{"line":66,"column":1},"end":{"line":66,"column":1}}]},"9":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":2},"end":{"line":81,"column":2}},{"start":{"line":81,"column":2},"end":{"line":81,"column":2}}]},"10":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":4},"end":{"line":95,"column":4}},{"start":{"line":95,"column":4},"end":{"line":95,"column":4}}]},"11":{"line":95,"type":"binary-expr","locations":[{"start":{"line":95,"column":8},"end":{"line":95,"column":31}},{"start":{"line":95,"column":35},"end":{"line":95,"column":60}},{"start":{"line":95,"column":64},"end":{"line":95,"column":97}},{"start":{"line":95,"column":101},"end":{"line":95,"column":139}}]},"12":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},{"start":{"line":105,"column":1},"end":{"line":105,"column":1}}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},{"start":{"line":108,"column":1},"end":{"line":108,"column":1}}]},"14":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":2},"end":{"line":110,"column":2}},{"start":{"line":110,"column":2},"end":{"line":110,"column":2}}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":2},"end":{"line":129,"column":2}},{"start":{"line":129,"column":2},"end":{"line":129,"column":2}}]}},"code":["/* ","based on ","https://chromium.googlesource.com/chromium/src/+/e2f820e34c43102785cfc9f38bde8b5a052938b8/tools/telemetry/telemetry/web_perf/metrics/rendering_stats.py","Just picking up mean frame time, ignoring everything about InputLatency","","Just returns frame_times and frame_timestamps that are used to calculate the metrics in ","https://chromium.googlesource.com/chromium/src/+/e2f820e34c43102785cfc9f38bde8b5a052938b8/tools/telemetry/telemetry/web_perf/metrics/smoothness.py","*/","","var debug = require('debug')('bp:metrics:RenderingStats');","","function GetTimestampEventName(events, pid) {","\tvar eventName = null;","\tfor (var i = 0; i < events.length; i++) {","\t\tvar event = events[i];","\t\tif (event.pid === pid && event.name === 'BenchmarkInstrumentation::DisplayRenderingStats' || event.name === 'BenchmarkInstrumentation::MainThreadRenderingStats') {","\t\t\tif (typeof event.args.data !== 'undefined' && event.args['data']['frame_count'] === 1) {","\t\t\t\tif (eventName === event.name) {","\t\t\t\t\treturn event.name","\t\t\t\t}","\t\t\t\teventName = event.name;","\t\t\t}","\t\t}","\t}","\treturn 'BenchmarkInstrumentation::ImplThreadRenderingStats';","};","","var RenderingStats = function() {","\tthis.events = [];","};","","// List of events useful for calculations","var events = [","\t'BenchmarkInstrumentation::ImplThreadRenderingStats',","\t'BenchmarkInstrumentation::DisplayRenderingStats',","\t'BenchmarkInstrumentation::MainThreadRenderingStats',","\t'process_labels'","]","var eventNameRegex = new RegExp('(' + events.join('|') + ')');","","// Only store the events that are useful for calculations","RenderingStats.prototype.addData = function(data) {","\tif (eventNameRegex.test(data.name)) {","\t\tthis.events.push(data);","\t}","};","","RenderingStats.prototype.getFrames = function() {","\tvar events = this.events;","\tthis.events.sort(function(a, b) {","\t\treturn (a.ts >= b.ts ? 1 : -1);","\t});","","\tthis.frame_timestamps = [];","\tthis.frame_times = [];","\tthis.approximated_pixel_percentages = [];","","\tthis.processId = findRenderProcess(events);","\tdebug('Process ID for render process is ', this.processId);","","\ttimestamp_event_name = GetTimestampEventName(events, this.processId);","\tdebug('Timestamp Event name is ', timestamp_event_name);","","\tthis._InitFrameTimestampsFromTimeline(events, timestamp_event_name);","\tthis._InitImplThreadRenderingStatsFromTimeline(events);","\tif (this.frame_timestamps < 0) {","\t\tdebug('No timestamps found for tracing data');","\t}","\treturn {","\t\tframe_timestamps: this.frame_timestamps,","\t\tframe_times: this.frame_times","\t};","};","","","function findRenderProcess(events) {","\t// TODO - Find a better way to identify the running process -","\t// Will break if site opens multiple tabs","\t// Also breaks if site does not have a title","\tfor (var i = 0; i < events.length; i++) {","\t\tif (events[i].name === 'process_labels') {","\t\t\treturn events[i].pid;","\t\t}","\t}","\tdebug('Looked at all events, could not find a process_labels. Pid is undefined');","};","","RenderingStats.prototype._GatherEvents = function(event_name, events, timeline_range) {","\tvar processId = this.processId;","\tvar me = this;","\treturn {","\t\tforEach: function(cb) {","\t\t\tfor (var i = 0; i < events.length; i++) {","\t\t\t\tvar event = events[i];","\t\t\t\tif (event.pid === processId && event.name === event_name && typeof event.args !== 'undefined' && typeof event.args.data !== 'undefined') {","\t\t\t\t\tcb.call(me, event);","\t\t\t\t}","\t\t\t}","\t\t}","\t};","};","","RenderingStats.prototype._AddFrameTimestamp = function(event) {","\tvar frame_count = event.args['data']['frame_count'];","\tif (frame_count > 1) {","\t\tdebug('trace contains multi-frame render stats');","\t}","\tif (frame_count == 1) {","\t\tthis.frame_timestamps.push(event.ts / 1000); // event.start is not available, only event.ts is","\t\tif (this.frame_timestamps.length >= 2) {","\t\t\tthis.frame_times.push(this.frame_timestamps[this.frame_timestamps.length - 1] -","\t\t\t\tthis.frame_timestamps[this.frame_timestamps.length - 2]);","\t\t}","\t}","};","","RenderingStats.prototype._InitFrameTimestampsFromTimeline = function(events, timestamp_event_name) {","\tvar events = this._GatherEvents(timestamp_event_name, events);","\tevents.forEach(function(event) {","\t\tthis._AddFrameTimestamp(event);","\t});","};","","RenderingStats.prototype._InitImplThreadRenderingStatsFromTimeline = function(events, timeline_range) {","\tvar event_name = 'BenchmarkInstrumentation::ImplThreadRenderingStats';","\tvar events = this._GatherEvents(event_name, events, timeline_range);","\tevents.forEach(function(event) {","\t\tvar data = event.args['data'];","\t\tif (typeof data['visible_content_area'] !== 'undefined') {","\t\t\tthis.approximated_pixel_percentages.push(data['approximated_visible_content_area'] / data['visible_content_area'] * 100.0);","\t\t} else {","\t\t\tthis.approximated_pixel_percentages.push(0);","\t\t}","\t});","}","","module.exports = RenderingStats;"],"l":{"10":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"21":0,"25":0,"28":1,"29":1,"33":1,"39":1,"42":1,"43":0,"44":0,"48":1,"49":0,"50":0,"51":0,"54":0,"55":0,"56":0,"58":0,"59":0,"61":0,"62":0,"64":0,"65":0,"66":0,"67":0,"69":0,"76":1,"80":0,"81":0,"82":0,"85":0,"88":1,"89":0,"90":0,"91":0,"93":0,"94":0,"95":0,"96":0,"103":1,"104":0,"105":0,"106":0,"108":0,"109":0,"110":0,"111":0,"117":1,"118":0,"119":0,"120":0,"124":1,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"132":0,"137":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/NetworkResources.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/NetworkResources.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1},"b":{"1":[1,1],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"NetworkResources","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}}},"2":{"name":"(anonymous_2)","line":49,"loc":{"start":{"line":49,"column":35},"end":{"line":49,"column":53}}},"3":{"name":"(anonymous_3)","line":56,"loc":{"start":{"line":56,"column":36},"end":{"line":56,"column":51}}},"4":{"name":"(anonymous_4)","line":58,"loc":{"start":{"line":58,"column":27},"end":{"line":58,"column":45}}},"5":{"name":"(anonymous_5)","line":71,"loc":{"start":{"line":71,"column":37},"end":{"line":71,"column":51}}},"6":{"name":"(anonymous_6)","line":88,"loc":{"start":{"line":88,"column":40},"end":{"line":88,"column":51}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":4,"column":21}},"2":{"start":{"line":6,"column":0},"end":{"line":36,"column":1}},"3":{"start":{"line":16,"column":4},"end":{"line":19,"column":6}},"4":{"start":{"line":22,"column":4},"end":{"line":22,"column":20}},"5":{"start":{"line":25,"column":4},"end":{"line":33,"column":6}},"6":{"start":{"line":35,"column":4},"end":{"line":35,"column":39}},"7":{"start":{"line":37,"column":0},"end":{"line":37,"column":56}},"8":{"start":{"line":39,"column":0},"end":{"line":39,"column":51}},"9":{"start":{"line":40,"column":0},"end":{"line":40,"column":62}},"10":{"start":{"line":49,"column":0},"end":{"line":54,"column":2}},"11":{"start":{"line":50,"column":4},"end":{"line":50,"column":54}},"12":{"start":{"line":51,"column":4},"end":{"line":51,"column":64}},"13":{"start":{"line":53,"column":4},"end":{"line":53,"column":21}},"14":{"start":{"line":56,"column":0},"end":{"line":64,"column":2}},"15":{"start":{"line":57,"column":4},"end":{"line":57,"column":26}},"16":{"start":{"line":58,"column":4},"end":{"line":63,"column":13}},"17":{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},"18":{"start":{"line":61,"column":12},"end":{"line":61,"column":34}},"19":{"start":{"line":71,"column":0},"end":{"line":81,"column":2}},"20":{"start":{"line":73,"column":4},"end":{"line":73,"column":66}},"21":{"start":{"line":74,"column":4},"end":{"line":74,"column":69}},"22":{"start":{"line":76,"column":4},"end":{"line":78,"column":5}},"23":{"start":{"line":77,"column":8},"end":{"line":77,"column":46}},"24":{"start":{"line":80,"column":4},"end":{"line":80,"column":46}},"25":{"start":{"line":88,"column":0},"end":{"line":109,"column":2}},"26":{"start":{"line":90,"column":4},"end":{"line":90,"column":20}},"27":{"start":{"line":92,"column":4},"end":{"line":102,"column":5}},"28":{"start":{"line":93,"column":8},"end":{"line":93,"column":47}},"29":{"start":{"line":94,"column":8},"end":{"line":101,"column":9}},"30":{"start":{"line":95,"column":12},"end":{"line":95,"column":38}},"31":{"start":{"line":97,"column":12},"end":{"line":97,"column":36}},"32":{"start":{"line":98,"column":12},"end":{"line":98,"column":46}},"33":{"start":{"line":99,"column":12},"end":{"line":99,"column":45}},"34":{"start":{"line":100,"column":12},"end":{"line":100,"column":49}},"35":{"start":{"line":104,"column":4},"end":{"line":106,"column":5}},"36":{"start":{"line":105,"column":8},"end":{"line":105,"column":56}},"37":{"start":{"line":108,"column":4},"end":{"line":108,"column":18}},"38":{"start":{"line":111,"column":0},"end":{"line":111,"column":34}}},"branchMap":{"1":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":18},"end":{"line":50,"column":47}},{"start":{"line":50,"column":51},"end":{"line":50,"column":53}}]},"2":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":8},"end":{"line":60,"column":8}},{"start":{"line":60,"column":8},"end":{"line":60,"column":8}}]},"3":{"line":60,"type":"binary-expr","locations":[{"start":{"line":60,"column":12},"end":{"line":60,"column":32}},{"start":{"line":60,"column":36},"end":{"line":60,"column":71}}]},"4":{"line":73,"type":"binary-expr","locations":[{"start":{"line":73,"column":15},"end":{"line":73,"column":54}},{"start":{"line":73,"column":58},"end":{"line":73,"column":65}}]},"5":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":4},"end":{"line":76,"column":4}},{"start":{"line":76,"column":4},"end":{"line":76,"column":4}}]},"6":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":8},"end":{"line":94,"column":8}},{"start":{"line":94,"column":8},"end":{"line":94,"column":8}}]},"7":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":4},"end":{"line":104,"column":4}},{"start":{"line":104,"column":4},"end":{"line":104,"column":4}}]},"8":{"line":105,"type":"binary-expr","locations":[{"start":{"line":105,"column":35},"end":{"line":105,"column":49}},{"start":{"line":105,"column":53},"end":{"line":105,"column":55}}]}},"code":["var BaseMetrics = require('./BaseMetrics'),","    helpers = require('../helpers'),","    StatData = require('./util/StatData'),","    Q = require('q');","","function NetworkResources() {","","    /**","     * \"outputRawData\" config option to decide whether or not Metric should return raw data","     *","     * \"resultsBeforeStart\" window.performance.getEntries() track all resources, even before browser-perf is started.","     * With this option, metric could return all (\"true\") results or only between Probe \"start\" and \"teardown\" (\"false\")","     *","     * @type {{outputRawData: boolean, resultsBeforeStart: boolean}}","     */","    this.defaultOptions = {","        'outputRawData' : false,","        'resultsBeforeStart' : false","    };","","    // Initialize result statistics object","    this.stats = {};","","    // Check http://www.w3.org/TR/resource-timing/ for available types","    this.typesMapping = {","        'subdocument' : 'iframe',","        'iframe' : 'iframe',","        'img' : 'image',","        'link' : 'css',","        'script' : 'js',","        'css' : 'image', //mean resource is loaded from CSS file","        'xmlhttprequest' : 'xhrrequest'","    };","","    BaseMetrics.apply(this, arguments);","}","require('util').inherits(NetworkResources, BaseMetrics);","","NetworkResources.prototype.id = 'NetworkResources';","NetworkResources.prototype.probes = ['NetworkResourcesProbe'];","","/**"," * Metrics setup"," * Extend default configuration options"," *"," * @param config"," * @returns {*}"," */","NetworkResources.prototype.setup = function (config) {","    var options = config.metricOptions[this.id] || {};","    this.options = helpers.extend(this.defaultOptions, options);","","    return Q(config);","};","","NetworkResources.prototype.onData = function(data) {","    this.resources = data;","    this.resources.forEach(function(element) {","        // Process only \"resource\" type results, so we do not add \"marks\" and \"measures\" into StatData","        if (element['entryType'] && element['entryType'] === 'resource') {","            this.addData(element);","        }","    }, this);","};","","/**"," * Calculate type based on resource properties and add it to stats"," *"," * @param row"," */","NetworkResources.prototype.addData = function(row) {","","    var type = this.typesMapping[row['initiatorType']] || 'other';","    var statsKey = 'Network' + type[0].toUpperCase() + type.slice(1);","","    if (typeof this.stats[statsKey] === 'undefined') {","        this.stats[statsKey] = new StatData();","    }","","    this.stats[statsKey].add(row['duration']);","};","","/**"," * Calculate results for Networking Resources usage"," *"," * @returns {object}"," */","NetworkResources.prototype.getResults = function() {","","    var result = {};","","    for (var key in this.stats) {","        var stats = this.stats[key].getStats();","        if (stats.sum === 0) {","            result[key] = stats.count;","        } else {","            result[key] = stats.sum;","            result[key + '_avg'] = stats.mean;","            result[key + '_max'] = stats.max;","            result[key + '_count'] = stats.count;","        }","    }","","    if (this.options.outputRawData) {","        result['NetworkRawData'] = this.resources || [];","    }","","    return result;","};","","module.exports = NetworkResources;",""],"l":{"1":1,"6":1,"16":1,"22":1,"25":1,"35":1,"37":1,"39":1,"40":1,"49":1,"50":1,"51":1,"53":1,"56":1,"57":0,"58":0,"60":0,"61":0,"71":1,"73":0,"74":0,"76":0,"77":0,"80":0,"88":1,"90":0,"92":0,"93":0,"94":0,"95":0,"97":0,"98":0,"99":0,"100":0,"104":0,"105":0,"108":0,"111":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/util/StatData.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/util/StatData.js","s":{"1":1,"2":3,"3":3,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":3,"2":0,"3":0},"fnMap":{"1":{"name":"StatData","line":1,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":20}}},"2":{"name":"(anonymous_2)","line":6,"loc":{"start":{"line":6,"column":25},"end":{"line":6,"column":39}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":30},"end":{"line":20,"column":41}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":4,"column":1}},"2":{"start":{"line":2,"column":1},"end":{"line":2,"column":40}},"3":{"start":{"line":3,"column":1},"end":{"line":3,"column":28}},"4":{"start":{"line":6,"column":0},"end":{"line":18,"column":2}},"5":{"start":{"line":7,"column":1},"end":{"line":17,"column":2}},"6":{"start":{"line":8,"column":2},"end":{"line":8,"column":15}},"7":{"start":{"line":9,"column":2},"end":{"line":9,"column":18}},"8":{"start":{"line":10,"column":2},"end":{"line":10,"column":28}},"9":{"start":{"line":11,"column":2},"end":{"line":13,"column":3}},"10":{"start":{"line":12,"column":3},"end":{"line":12,"column":18}},"11":{"start":{"line":14,"column":2},"end":{"line":16,"column":3}},"12":{"start":{"line":15,"column":3},"end":{"line":15,"column":18}},"13":{"start":{"line":20,"column":0},"end":{"line":28,"column":1}},"14":{"start":{"line":21,"column":1},"end":{"line":27,"column":2}},"15":{"start":{"line":30,"column":0},"end":{"line":30,"column":26}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},{"start":{"line":7,"column":1},"end":{"line":7,"column":1}}]},"2":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":2},"end":{"line":11,"column":2}},{"start":{"line":11,"column":2},"end":{"line":11,"column":2}}]},"3":{"line":11,"type":"binary-expr","locations":[{"start":{"line":11,"column":6},"end":{"line":11,"column":23}},{"start":{"line":11,"column":27},"end":{"line":11,"column":41}}]},"4":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":2},"end":{"line":14,"column":2}},{"start":{"line":14,"column":2},"end":{"line":14,"column":2}}]},"5":{"line":14,"type":"binary-expr","locations":[{"start":{"line":14,"column":6},"end":{"line":14,"column":23}},{"start":{"line":14,"column":27},"end":{"line":14,"column":41}}]},"6":{"line":22,"type":"cond-expr","locations":[{"start":{"line":22,"column":27},"end":{"line":22,"column":28}},{"start":{"line":22,"column":31},"end":{"line":22,"column":52}}]}},"code":["function StatData() {","\tthis.count = this.sum = this.sumsq = 0;","\tthis.max = this.min = null;","}","","StatData.prototype.add = function(val) {","\tif (typeof val === 'number') {","\t\tthis.count++;","\t\tthis.sum += val;","\t\tthis.sumsq += (val * val);","\t\tif (this.max === null || val > this.max) {","\t\t\tthis.max = val;","\t\t}","\t\tif (this.min === null || val < this.min) {","\t\t\tthis.min = val;","\t\t}","\t}","};","","StatData.prototype.getStats = function() {","\treturn {","\t\tmean: this.count === 0 ? 0 : this.sum / this.count,","\t\tmax: this.max,","\t\tmin: this.min,","\t\tsum: this.sum,","\t\tcount: this.count","\t}","}","","module.exports = StatData;"],"l":{"1":1,"2":3,"3":3,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"14":0,"15":0,"20":1,"21":0,"30":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/NetworkTimings.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/NetworkTimings.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"NetworkTimings","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":26}}},"2":{"name":"(anonymous_2)","line":12,"loc":{"start":{"line":12,"column":34},"end":{"line":12,"column":49}}},"3":{"name":"(anonymous_3)","line":16,"loc":{"start":{"line":16,"column":38},"end":{"line":16,"column":61}}},"4":{"name":"(anonymous_4)","line":35,"loc":{"start":{"line":35,"column":37},"end":{"line":35,"column":58}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":2,"column":33}},"2":{"start":{"line":4,"column":0},"end":{"line":6,"column":1}},"3":{"start":{"line":5,"column":1},"end":{"line":5,"column":36}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":54}},"5":{"start":{"line":9,"column":0},"end":{"line":9,"column":47}},"6":{"start":{"line":10,"column":0},"end":{"line":10,"column":53}},"7":{"start":{"line":12,"column":0},"end":{"line":14,"column":1}},"8":{"start":{"line":13,"column":1},"end":{"line":13,"column":20}},"9":{"start":{"line":16,"column":0},"end":{"line":33,"column":1}},"10":{"start":{"line":20,"column":1},"end":{"line":20,"column":58}},"11":{"start":{"line":21,"column":1},"end":{"line":21,"column":65}},"12":{"start":{"line":22,"column":1},"end":{"line":22,"column":63}},"13":{"start":{"line":23,"column":1},"end":{"line":23,"column":64}},"14":{"start":{"line":24,"column":1},"end":{"line":24,"column":67}},"15":{"start":{"line":25,"column":1},"end":{"line":25,"column":73}},"16":{"start":{"line":26,"column":1},"end":{"line":26,"column":76}},"17":{"start":{"line":27,"column":1},"end":{"line":27,"column":61}},"18":{"start":{"line":28,"column":1},"end":{"line":28,"column":62}},"19":{"start":{"line":29,"column":1},"end":{"line":29,"column":68}},"20":{"start":{"line":30,"column":1},"end":{"line":30,"column":67}},"21":{"start":{"line":32,"column":1},"end":{"line":32,"column":20}},"22":{"start":{"line":35,"column":0},"end":{"line":39,"column":1}},"23":{"start":{"line":36,"column":1},"end":{"line":38,"column":2}},"24":{"start":{"line":37,"column":2},"end":{"line":37,"column":54}},"25":{"start":{"line":41,"column":0},"end":{"line":41,"column":32}}},"branchMap":{"1":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},{"start":{"line":36,"column":1},"end":{"line":36,"column":1}}]},"2":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":5},"end":{"line":36,"column":39}},{"start":{"line":36,"column":43},"end":{"line":36,"column":77}}]}},"code":["var BaseMetrics = require('./BaseMetrics'),","\thelpers = require('../helpers');","","function NetworkTimings() {","\tBaseMetrics.apply(this, arguments);","}","require('util').inherits(NetworkTimings, BaseMetrics);","","NetworkTimings.prototype.id = 'NetworkTimings';","NetworkTimings.prototype.probes = ['NavTimingProbe'];","","NetworkTimings.prototype.onData = function(data) {","\tthis.timing = data;","}","","NetworkTimings.prototype.getResults = function(cfg, browser) {","","\t// More useful representation of timing information","\t// Credit : https://github.com/addyosmani/timing.js","\tthis.addMetric('loadTime', 'loadEventEnd', 'fetchStart');","\tthis.addMetric('domReadyTime', 'domComplete', 'domInteractive');","\tthis.addMetric('readyStart', 'fetchStart', 'navigationStart');","\tthis.addMetric('redirectTime', 'redirectEnd', 'redirectStart');","\tthis.addMetric('appcacheTime', 'domainLookupStart', 'fetchStart');","\tthis.addMetric('unloadEventTime', 'unloadEventEnd', 'unloadEventStart');","\tthis.addMetric('domainLookupTime', 'domainLookupEnd', 'domainLookupStart');","\tthis.addMetric('connectTime', 'connectEnd', 'connectStart');","\tthis.addMetric('requestTime', 'responseEnd', 'requestStart');","\tthis.addMetric('initDomTreeTime', 'domInteractive', 'responseEnd');","\tthis.addMetric('loadEventTime', 'loadEventEnd', 'loadEventStart');","","\treturn this.timing;","}","","NetworkTimings.prototype.addMetric = function(prop, a, b) {","\tif (typeof this.timing[a] === 'number' && typeof this.timing[b] === 'number') {","\t\tthis.timing[prop] = this.timing[a] - this.timing[b];","\t}","}","","module.exports = NetworkTimings;"],"l":{"1":1,"4":1,"5":1,"7":1,"9":1,"10":1,"12":1,"13":0,"16":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"32":0,"35":1,"36":0,"37":0,"41":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/RafRenderingStats.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/RafRenderingStats.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"RafBenchmarkingRenderingStats","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":41}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":53},"end":{"line":13,"column":64}}},"3":{"name":"(anonymous_3)","line":29,"loc":{"start":{"line":29,"column":60},"end":{"line":29,"column":81}}},"4":{"name":"(anonymous_4)","line":35,"loc":{"start":{"line":35,"column":64},"end":{"line":35,"column":85}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":5,"column":0},"end":{"line":7,"column":1}},"3":{"start":{"line":6,"column":1},"end":{"line":6,"column":36}},"4":{"start":{"line":8,"column":0},"end":{"line":8,"column":69}},"5":{"start":{"line":10,"column":0},"end":{"line":10,"column":77}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":74}},"7":{"start":{"line":13,"column":0},"end":{"line":27,"column":1}},"8":{"start":{"line":14,"column":1},"end":{"line":26,"column":2}},"9":{"start":{"line":15,"column":2},"end":{"line":15,"column":61}},"10":{"start":{"line":16,"column":2},"end":{"line":22,"column":4}},"11":{"start":{"line":24,"column":2},"end":{"line":24,"column":56}},"12":{"start":{"line":25,"column":2},"end":{"line":25,"column":12}},"13":{"start":{"line":29,"column":0},"end":{"line":33,"column":1}},"14":{"start":{"line":30,"column":1},"end":{"line":30,"column":51}},"15":{"start":{"line":31,"column":1},"end":{"line":31,"column":111}},"16":{"start":{"line":32,"column":1},"end":{"line":32,"column":32}},"17":{"start":{"line":35,"column":0},"end":{"line":44,"column":2}},"18":{"start":{"line":36,"column":1},"end":{"line":36,"column":27}},"19":{"start":{"line":37,"column":1},"end":{"line":37,"column":39}},"20":{"start":{"line":38,"column":1},"end":{"line":42,"column":2}},"21":{"start":{"line":39,"column":2},"end":{"line":39,"column":52}},"22":{"start":{"line":40,"column":2},"end":{"line":41,"column":70}},"23":{"start":{"line":41,"column":3},"end":{"line":41,"column":70}},"24":{"start":{"line":43,"column":1},"end":{"line":43,"column":26}},"25":{"start":{"line":46,"column":0},"end":{"line":46,"column":47}}},"branchMap":{"1":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},{"start":{"line":14,"column":1},"end":{"line":14,"column":1}}]},"2":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":2},"end":{"line":40,"column":2}},{"start":{"line":40,"column":2},"end":{"line":40,"column":2}}]}},"code":["var BaseMetrics = require('./BaseMetrics'),","\tdebug = require('debug')('bp:metrics:RafRenderingStats'),","\thelpers = require('../helpers');","","function RafBenchmarkingRenderingStats() {","\tBaseMetrics.apply(this, arguments);","}","require('util').inherits(RafBenchmarkingRenderingStats, BaseMetrics);","","RafBenchmarkingRenderingStats.prototype.id = 'RafBenchmarkingRenderingStats';","RafBenchmarkingRenderingStats.prototype.probes = ['RafBenchmarkingProbe'];","","RafBenchmarkingRenderingStats.prototype.getResults = function() {","\tif (this.__data.length > 0) {","\t\tvar meanFrameTime = this.getMeanFrameTime_(this.__data[0]);","\t\treturn {","\t\t\tnumAnimationFrames: this.__data[0].length - 1,","\t\t\tnumFramesSentToScreen: this.__data[0].length - 1,","\t\t\tdroppedFrameCount: this.getDroppedFrameCount_(this.__data[0]),","\t\t\tmeanFrameTime_raf: meanFrameTime,","\t\t\tframesPerSec_raf: 1000 / meanFrameTime","\t\t};","\t} else {","\t\tdebug('Did not get enough data to calculate metrics');","\t\treturn {};","\t}","}","","RafBenchmarkingRenderingStats.prototype.getMeanFrameTime_ = function(frameTimes) {","\tvar num_frames_sent_to_screen = frameTimes.length;","\tvar mean_frame_time_seconds = (frameTimes[frameTimes.length - 1] - frameTimes[0]) / num_frames_sent_to_screen;","\treturn mean_frame_time_seconds;","}","","RafBenchmarkingRenderingStats.prototype.getDroppedFrameCount_ = function(frameTimes) {","\tvar droppedFrameCount = 0;","\tvar droppedFrameThreshold = 1000 / 55;","\tfor (var i = 1; i < frameTimes.length; i++) {","\t\tvar frameTime = frameTimes[i] - frameTimes[i - 1];","\t\tif (frameTime > droppedFrameThreshold)","\t\t\tdroppedFrameCount += Math.floor(frameTime / droppedFrameThreshold);","\t}","\treturn droppedFrameCount;","};","","module.exports = RafBenchmarkingRenderingStats;"],"l":{"1":1,"5":1,"6":1,"8":1,"10":1,"11":1,"13":1,"14":0,"15":0,"16":0,"24":0,"25":0,"29":1,"30":0,"31":0,"32":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"43":0,"46":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/SampleMetric.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/SampleMetric.js","s":{"1":1,"2":1,"3":0,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":1,"11":0,"12":0,"13":1,"14":0,"15":0,"16":1,"17":0,"18":1,"19":0,"20":1,"21":0,"22":0,"23":1},"b":{},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"SampleMetrics","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":31}}},"2":{"name":"(anonymous_2)","line":15,"loc":{"start":{"line":15,"column":32},"end":{"line":15,"column":43}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":32},"end":{"line":20,"column":43}}},"4":{"name":"(anonymous_4)","line":25,"loc":{"start":{"line":25,"column":35},"end":{"line":25,"column":46}}},"5":{"name":"(anonymous_5)","line":30,"loc":{"start":{"line":30,"column":33},"end":{"line":30,"column":44}}},"6":{"name":"(anonymous_6)","line":34,"loc":{"start":{"line":34,"column":34},"end":{"line":34,"column":45}}},"7":{"name":"(anonymous_7)","line":38,"loc":{"start":{"line":38,"column":37},"end":{"line":38,"column":48}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":3,"column":40}},"2":{"start":{"line":5,"column":0},"end":{"line":9,"column":1}},"3":{"start":{"line":6,"column":1},"end":{"line":8,"column":5}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":53}},"5":{"start":{"line":12,"column":0},"end":{"line":12,"column":45}},"6":{"start":{"line":13,"column":0},"end":{"line":13,"column":49}},"7":{"start":{"line":15,"column":0},"end":{"line":18,"column":1}},"8":{"start":{"line":16,"column":1},"end":{"line":16,"column":30}},"9":{"start":{"line":17,"column":1},"end":{"line":17,"column":19}},"10":{"start":{"line":20,"column":0},"end":{"line":23,"column":1}},"11":{"start":{"line":21,"column":1},"end":{"line":21,"column":30}},"12":{"start":{"line":22,"column":1},"end":{"line":22,"column":19}},"13":{"start":{"line":25,"column":0},"end":{"line":28,"column":1}},"14":{"start":{"line":26,"column":1},"end":{"line":26,"column":33}},"15":{"start":{"line":27,"column":1},"end":{"line":27,"column":19}},"16":{"start":{"line":30,"column":0},"end":{"line":32,"column":1}},"17":{"start":{"line":31,"column":1},"end":{"line":31,"column":31}},"18":{"start":{"line":34,"column":0},"end":{"line":36,"column":1}},"19":{"start":{"line":35,"column":1},"end":{"line":35,"column":32}},"20":{"start":{"line":38,"column":0},"end":{"line":41,"column":1}},"21":{"start":{"line":39,"column":1},"end":{"line":39,"column":29}},"22":{"start":{"line":40,"column":1},"end":{"line":40,"column":11}},"23":{"start":{"line":43,"column":0},"end":{"line":43,"column":31}}},"branchMap":{},"code":["var Q = require('q'),","\tdebug = require('debug')('bp:metrics:SampleMetrics'),","\tBaseMetrics = require('./BaseMetrics');","","function SampleMetrics(probes) {","\tBaseMetrics.apply(this, [{","\t\tprobes: probes","\t}]);","}","require('util').inherits(SampleMetrics, BaseMetrics);","","SampleMetrics.prototype.id = 'SampleMetrics';","SampleMetrics.prototype.probes = ['SampleProbe'];","","SampleMetrics.prototype.setup = function() {","\tdebug('Setup Method called');","\treturn Q.delay(1);","}","","SampleMetrics.prototype.start = function() {","\tdebug('Start Method called');","\treturn Q.delay(1);","}","","SampleMetrics.prototype.teardown = function() {","\tdebug('Teardown Method called');","\treturn Q.delay(1);","}","","SampleMetrics.prototype.onData = function() {","\tdebug('onData Method called');","}","","SampleMetrics.prototype.onError = function() {","\tdebug('onError Method called');","}","","SampleMetrics.prototype.getResults = function() {","\tdebug('Get Results called');","\treturn {};","}","","module.exports = SampleMetrics;"],"l":{"1":1,"5":1,"6":0,"10":1,"12":1,"13":1,"15":1,"16":0,"17":0,"20":1,"21":0,"22":0,"25":1,"26":0,"27":0,"30":1,"31":0,"34":1,"35":0,"38":1,"39":0,"40":0,"43":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/TimelineMetrics.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/TimelineMetrics.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":1,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":1},"b":{"1":[1,0],"2":[1,0,0],"3":[1,1],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0,0],"8":[0,0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},"f":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"TimelineMetrics","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":27}}},"2":{"name":"(anonymous_2)","line":24,"loc":{"start":{"line":24,"column":34},"end":{"line":24,"column":48}}},"3":{"name":"(anonymous_3)","line":25,"loc":{"start":{"line":25,"column":36},"end":{"line":25,"column":54}}},"4":{"name":"(anonymous_4)","line":46,"loc":{"start":{"line":46,"column":39},"end":{"line":46,"column":50}}},"5":{"name":"(anonymous_5)","line":66,"loc":{"start":{"line":66,"column":43},"end":{"line":66,"column":57}}},"6":{"name":"(anonymous_6)","line":72,"loc":{"start":{"line":72,"column":39},"end":{"line":72,"column":62}}},"7":{"name":"(anonymous_7)","line":80,"loc":{"start":{"line":80,"column":51},"end":{"line":80,"column":63}}},"8":{"name":"(anonymous_8)","line":89,"loc":{"start":{"line":89,"column":50},"end":{"line":89,"column":62}}},"9":{"name":"(anonymous_9)","line":126,"loc":{"start":{"line":126,"column":37},"end":{"line":126,"column":57}}},"10":{"name":"(anonymous_10)","line":134,"loc":{"start":{"line":134,"column":35},"end":{"line":134,"column":50}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":6,"column":59}},"2":{"start":{"line":8,"column":0},"end":{"line":14,"column":1}},"3":{"start":{"line":9,"column":4},"end":{"line":9,"column":30}},"4":{"start":{"line":10,"column":4},"end":{"line":10,"column":55}},"5":{"start":{"line":11,"column":4},"end":{"line":11,"column":26}},"6":{"start":{"line":13,"column":4},"end":{"line":13,"column":39}},"7":{"start":{"line":16,"column":0},"end":{"line":16,"column":55}},"8":{"start":{"line":18,"column":0},"end":{"line":18,"column":49}},"9":{"start":{"line":19,"column":0},"end":{"line":19,"column":75}},"10":{"start":{"line":21,"column":0},"end":{"line":21,"column":162}},"11":{"start":{"line":22,"column":0},"end":{"line":22,"column":93}},"12":{"start":{"line":24,"column":0},"end":{"line":43,"column":2}},"13":{"start":{"line":25,"column":4},"end":{"line":41,"column":7}},"14":{"start":{"line":26,"column":8},"end":{"line":30,"column":11}},"15":{"start":{"line":32,"column":8},"end":{"line":39,"column":9}},"16":{"start":{"line":35,"column":12},"end":{"line":38,"column":21}},"17":{"start":{"line":40,"column":8},"end":{"line":40,"column":23}},"18":{"start":{"line":42,"column":4},"end":{"line":42,"column":18}},"19":{"start":{"line":46,"column":0},"end":{"line":64,"column":2}},"20":{"start":{"line":47,"column":4},"end":{"line":47,"column":17}},"21":{"start":{"line":49,"column":4},"end":{"line":59,"column":5}},"22":{"start":{"line":50,"column":8},"end":{"line":50,"column":57}},"23":{"start":{"line":51,"column":8},"end":{"line":58,"column":9}},"24":{"start":{"line":52,"column":12},"end":{"line":52,"column":35}},"25":{"start":{"line":54,"column":12},"end":{"line":54,"column":33}},"26":{"start":{"line":55,"column":12},"end":{"line":55,"column":43}},"27":{"start":{"line":56,"column":12},"end":{"line":56,"column":42}},"28":{"start":{"line":57,"column":12},"end":{"line":57,"column":46}},"29":{"start":{"line":61,"column":4},"end":{"line":61,"column":62}},"30":{"start":{"line":63,"column":4},"end":{"line":63,"column":36}},"31":{"start":{"line":66,"column":0},"end":{"line":77,"column":1}},"32":{"start":{"line":67,"column":4},"end":{"line":70,"column":5}},"33":{"start":{"line":71,"column":4},"end":{"line":75,"column":5}},"34":{"start":{"line":72,"column":8},"end":{"line":74,"column":14}},"35":{"start":{"line":73,"column":12},"end":{"line":73,"column":72}},"36":{"start":{"line":76,"column":4},"end":{"line":76,"column":14}},"37":{"start":{"line":80,"column":0},"end":{"line":86,"column":2}},"38":{"start":{"line":81,"column":4},"end":{"line":81,"column":33}},"39":{"start":{"line":83,"column":4},"end":{"line":85,"column":5}},"40":{"start":{"line":84,"column":8},"end":{"line":84,"column":67}},"41":{"start":{"line":89,"column":0},"end":{"line":124,"column":2}},"42":{"start":{"line":90,"column":4},"end":{"line":123,"column":5}},"43":{"start":{"line":93,"column":12},"end":{"line":93,"column":48}},"44":{"start":{"line":94,"column":12},"end":{"line":99,"column":26}},"45":{"start":{"line":100,"column":12},"end":{"line":100,"column":18}},"46":{"start":{"line":102,"column":12},"end":{"line":104,"column":13}},"47":{"start":{"line":103,"column":16},"end":{"line":103,"column":45}},"48":{"start":{"line":105,"column":12},"end":{"line":105,"column":44}},"49":{"start":{"line":106,"column":12},"end":{"line":106,"column":18}},"50":{"start":{"line":108,"column":12},"end":{"line":121,"column":13}},"51":{"start":{"line":109,"column":16},"end":{"line":109,"column":85}},"52":{"start":{"line":111,"column":16},"end":{"line":111,"column":54}},"53":{"start":{"line":112,"column":16},"end":{"line":114,"column":17}},"54":{"start":{"line":113,"column":20},"end":{"line":113,"column":80}},"55":{"start":{"line":115,"column":16},"end":{"line":120,"column":30}},"56":{"start":{"line":122,"column":12},"end":{"line":122,"column":18}},"57":{"start":{"line":126,"column":0},"end":{"line":132,"column":1}},"58":{"start":{"line":127,"column":4},"end":{"line":129,"column":5}},"59":{"start":{"line":128,"column":8},"end":{"line":128,"column":54}},"60":{"start":{"line":130,"column":4},"end":{"line":130,"column":93}},"61":{"start":{"line":131,"column":4},"end":{"line":131,"column":53}},"62":{"start":{"line":134,"column":0},"end":{"line":150,"column":2}},"63":{"start":{"line":135,"column":4},"end":{"line":149,"column":5}},"64":{"start":{"line":136,"column":8},"end":{"line":136,"column":29}},"65":{"start":{"line":137,"column":8},"end":{"line":143,"column":9}},"66":{"start":{"line":138,"column":12},"end":{"line":138,"column":52}},"67":{"start":{"line":139,"column":15},"end":{"line":143,"column":9}},"68":{"start":{"line":140,"column":12},"end":{"line":142,"column":13}},"69":{"start":{"line":141,"column":16},"end":{"line":141,"column":55}},"70":{"start":{"line":144,"column":11},"end":{"line":149,"column":5}},"71":{"start":{"line":145,"column":8},"end":{"line":145,"column":25}},"72":{"start":{"line":146,"column":8},"end":{"line":148,"column":9}},"73":{"start":{"line":147,"column":12},"end":{"line":147,"column":44}},"74":{"start":{"line":152,"column":0},"end":{"line":152,"column":33}}},"branchMap":{"1":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":32,"column":8}},{"start":{"line":32,"column":8},"end":{"line":32,"column":8}}]},"2":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":12},"end":{"line":32,"column":64}},{"start":{"line":33,"column":13},"end":{"line":33,"column":66}},{"start":{"line":33,"column":70},"end":{"line":33,"column":152}}]},"3":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":16},"end":{"line":36,"column":70}},{"start":{"line":36,"column":74},"end":{"line":36,"column":76}}]},"4":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":51,"column":8}},{"start":{"line":51,"column":8},"end":{"line":51,"column":8}}]},"5":{"line":73,"type":"cond-expr","locations":[{"start":{"line":73,"column":58},"end":{"line":73,"column":66}},{"start":{"line":73,"column":69},"end":{"line":73,"column":70}}]},"6":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":4},"end":{"line":83,"column":4}},{"start":{"line":83,"column":4},"end":{"line":83,"column":4}}]},"7":{"line":90,"type":"switch","locations":[{"start":{"line":91,"column":8},"end":{"line":91,"column":17}},{"start":{"line":92,"column":8},"end":{"line":100,"column":18}},{"start":{"line":101,"column":8},"end":{"line":106,"column":18}},{"start":{"line":107,"column":8},"end":{"line":122,"column":18}}]},"8":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":27},"end":{"line":93,"column":32}},{"start":{"line":93,"column":36},"end":{"line":93,"column":42}},{"start":{"line":93,"column":46},"end":{"line":93,"column":47}}]},"9":{"line":96,"type":"cond-expr","locations":[{"start":{"line":96,"column":31},"end":{"line":96,"column":42}},{"start":{"line":96,"column":45},"end":{"line":96,"column":47}}]},"10":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":12},"end":{"line":102,"column":12}},{"start":{"line":102,"column":12},"end":{"line":102,"column":12}}]},"11":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12}},{"start":{"line":108,"column":12},"end":{"line":108,"column":12}}]},"12":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":62}},{"start":{"line":108,"column":66},"end":{"line":108,"column":102}}]},"13":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":16},"end":{"line":112,"column":16}},{"start":{"line":112,"column":16},"end":{"line":112,"column":16}}]},"14":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":4},"end":{"line":127,"column":4}},{"start":{"line":127,"column":4},"end":{"line":127,"column":4}}]},"15":{"line":130,"type":"cond-expr","locations":[{"start":{"line":130,"column":64},"end":{"line":130,"column":87}},{"start":{"line":130,"column":90},"end":{"line":130,"column":91}}]},"16":{"line":130,"type":"binary-expr","locations":[{"start":{"line":130,"column":37},"end":{"line":130,"column":48}},{"start":{"line":130,"column":52},"end":{"line":130,"column":61}}]},"17":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":4},"end":{"line":135,"column":4}},{"start":{"line":135,"column":4},"end":{"line":135,"column":4}}]},"18":{"line":137,"type":"if","locations":[{"start":{"line":137,"column":8},"end":{"line":137,"column":8}},{"start":{"line":137,"column":8},"end":{"line":137,"column":8}}]},"19":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":15},"end":{"line":139,"column":15}},{"start":{"line":139,"column":15},"end":{"line":139,"column":15}}]},"20":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":12},"end":{"line":140,"column":12}},{"start":{"line":140,"column":12},"end":{"line":140,"column":12}}]},"21":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":11},"end":{"line":144,"column":11}},{"start":{"line":144,"column":11},"end":{"line":144,"column":11}}]},"22":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":8},"end":{"line":146,"column":8}},{"start":{"line":146,"column":8},"end":{"line":146,"column":8}}]}},"code":["var Q = require('q'),","    helpers = require('./../helpers'),","    RuntimePerfMetrics = require('./util/RuntimePerfMetrics'),","    BaseMetrics = require('./BaseMetrics'),","    StatData = require('./util/StatData'),","    debug = require('debug')('bp:metrics:TimelineMetrics');","","function TimelineMetrics() {","    this.timelineMetrics = {};","    this.runtimePerfMetrics = new RuntimePerfMetrics();","    this.eventStacks = {};","","    BaseMetrics.apply(this, arguments);","}","","require('util').inherits(TimelineMetrics, BaseMetrics);","","TimelineMetrics.prototype.id = 'TimelineMetrics';","TimelineMetrics.prototype.probes = ['PerfLogProbe', 'AndroidTracingProbe'];","","var TRACE_CATEGORIES = ['blink.console', 'devtools.timeline', 'disabled-by-default-devtools.timeline', 'toplevel', 'disabled-by-default-devtools.timeline.frame'];","var eventCategoryRegEx = new RegExp('\\\\b(' + TRACE_CATEGORIES.join('|') + '|__metadata)\\\\b');","","TimelineMetrics.prototype.setup = function(cfg) {","    cfg.browsers = cfg.browsers.map(function(browser) {","        helpers.extend(browser, {","            chromeOptions: {","                perfLoggingPrefs: {}","            }","        });","","        if (helpers.deepEquals(browser, 'browserName', 'chrome') ||","            (helpers.deepEquals(browser, 'browserName', 'android') && !helpers.deepEquals(browser, 'chromeOptions.androidPackage', 'com.android.chrome'))) {","            // Only add this for Chrome OR Android-hybrid, not for Android-Chrome","            browser.chromeOptions.perfLoggingPrefs.traceCategories = [","                browser.chromeOptions.perfLoggingPrefs.traceCategories || '',","                TRACE_CATEGORIES","            ].join();","        }","        return browser;","    });","    return Q(cfg);","};","","","TimelineMetrics.prototype.getResults = function() {","    var res = {};","","    for (var key in this.timelineMetrics) {","        var stats = this.timelineMetrics[key].getStats();","        if (stats.sum === 0) {","            res[key] = stats.count;","        } else {","            res[key] = stats.sum;","            res[key + '_avg'] = stats.mean;","            res[key + '_max'] = stats.max;","            res[key + '_count'] = stats.count;","        }","    }","","    helpers.extend(res, this.runtimePerfMetrics.getResults());","","    return this.addAggregates_(res);","};","","TimelineMetrics.prototype.addAggregates_ = function(res) {","    var metrics = {","        'Styles': ['UpdateLayoutTree', 'RecalculateStyles', 'ParseAuthorStyleSheet'],","        'Javascript': ['FunctionCall', 'GCEvent', 'MajorGC', 'MinorGC', 'EvaluateScript']","    }","    for (var key in metrics) {","        res[key] = metrics[key].reduce(function(prev, cur, i) {","            return prev + (typeof res[cur] === 'number' ? res[cur] : 0);","        }, 0);","    }","    return res","}","","// Data from Safari/Appium (old format)","TimelineMetrics.prototype.processTimelineRecord_ = function(e) {","    this.addData_(e, 'timeline');","","    if (Array.isArray(e.children)) {","        e.children.forEach(this.processTimelineRecord_.bind(this));","    }","};","","// Timeline format at https://docs.google.com/document/d/1CvAClvFfyA5R-PhYUmn5OOQtYMH4h6I0nSsKchNAySU/edit#heading=h.yr4qxyxotyw","TimelineMetrics.prototype.processTracingRecord_ = function(e) {","    switch (e.ph) {","        case 'I': // Instant Event","        case 'X': // Duration Event","            var duration = e.dur || e.tdur || 0;","            this.addData_({","                type: e.name,","                data: e.args ? e.args.data : {},","                startTime: e.ts / 1000,","                endTime: (e.ts + duration) / 1000","            }, 'tracing');","            break;","        case 'B': // Begin Event","            if (typeof this.eventStacks[e.tid] === 'undefined') {","                this.eventStacks[e.tid] = [];","            }","            this.eventStacks[e.tid].push(e);","            break;","        case 'E': // End Event","            if (typeof this.eventStacks[e.tid] === 'undefined' || this.eventStacks[e.tid].length === 0) {","                debug('Encountered an end event that did not have a start event', e);","            } else {","                var b = this.eventStacks[e.tid].pop();","                if (b.name !== e.name) {","                    debug('Start and end events dont have the same name', e, b);","                }","                this.addData_({","                    type: e.name,","                    data: helpers.extend(e.args.endData, b.args.beginData),","                    startTime: b.ts / 1000,","                    endTime: e.ts / 1000","                }, 'tracing');","            }","            break;","    }","};","","TimelineMetrics.prototype.addData_ = function(e, source) {","    if (typeof this.timelineMetrics[e.type] === 'undefined') {","        this.timelineMetrics[e.type] = new StatData();","    }","    this.timelineMetrics[e.type].add(e.startTime && e.endTime ? e.endTime - e.startTime : 0);","    this.runtimePerfMetrics.processRecord(e, source);","}","","TimelineMetrics.prototype.onData = function(data) {","    if (data.type === 'perfLog') {","        var msg = data.value;","        if (msg.method === 'Timeline.eventRecorded') {","            this.processTimelineRecord_(msg.params);","        } else if (msg.method === 'Tracing.dataCollected') {","            if (eventCategoryRegEx.test(msg.params.cat)) {","                this.processTracingRecord_(msg.params);","            }","        }","    } else if (data.type === 'androidTracing') {","        msg = data.value;","        if (eventCategoryRegEx.test(msg.cat)) {","            this.processTracingRecord_(msg);","        }","    }","};","","module.exports = TimelineMetrics;",""],"l":{"1":1,"8":1,"9":1,"10":1,"11":1,"13":1,"16":1,"18":1,"19":1,"21":1,"22":1,"24":1,"25":1,"26":1,"32":1,"35":1,"40":1,"42":1,"46":1,"47":0,"49":0,"50":0,"51":0,"52":0,"54":0,"55":0,"56":0,"57":0,"61":0,"63":0,"66":1,"67":0,"71":0,"72":0,"73":0,"76":0,"80":1,"81":0,"83":0,"84":0,"89":1,"90":0,"93":0,"94":0,"100":0,"102":0,"103":0,"105":0,"106":0,"108":0,"109":0,"111":0,"112":0,"113":0,"115":0,"122":0,"126":1,"127":0,"128":0,"130":0,"131":0,"134":1,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"144":0,"145":0,"146":0,"147":0,"152":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/util/RuntimePerfMetrics.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/util/RuntimePerfMetrics.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":1},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"RuntimePerfMetrics","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":30}}},"2":{"name":"(anonymous_2)","line":22,"loc":{"start":{"line":22,"column":45},"end":{"line":22,"column":70}}},"3":{"name":"(anonymous_3)","line":38,"loc":{"start":{"line":38,"column":15},"end":{"line":38,"column":31}}},"4":{"name":"(anonymous_4)","line":41,"loc":{"start":{"line":41,"column":19},"end":{"line":41,"column":35}}},"5":{"name":"(anonymous_5)","line":45,"loc":{"start":{"line":45,"column":35},"end":{"line":45,"column":51}}},"6":{"name":"(anonymous_6)","line":55,"loc":{"start":{"line":55,"column":18},"end":{"line":55,"column":42}}},"7":{"name":"(anonymous_7)","line":61,"loc":{"start":{"line":61,"column":12},"end":{"line":61,"column":28}}},"8":{"name":"(anonymous_8)","line":65,"loc":{"start":{"line":65,"column":11},"end":{"line":65,"column":27}}},"9":{"name":"getFrameRate","line":76,"loc":{"start":{"line":76,"column":0},"end":{"line":76,"column":30}}},"10":{"name":"(anonymous_10)","line":84,"loc":{"start":{"line":84,"column":42},"end":{"line":84,"column":53}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":17,"column":1}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":4},"end":{"line":6,"column":41}},"5":{"start":{"line":7,"column":4},"end":{"line":7,"column":46}},"6":{"start":{"line":8,"column":4},"end":{"line":8,"column":21}},"7":{"start":{"line":9,"column":4},"end":{"line":9,"column":29}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":36}},"9":{"start":{"line":11,"column":4},"end":{"line":11,"column":20}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":25}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":32}},"12":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"13":{"start":{"line":20,"column":0},"end":{"line":20,"column":55}},"14":{"start":{"line":22,"column":0},"end":{"line":35,"column":2}},"15":{"start":{"line":24,"column":4},"end":{"line":29,"column":5}},"16":{"start":{"line":25,"column":8},"end":{"line":27,"column":9}},"17":{"start":{"line":26,"column":12},"end":{"line":26,"column":42}},"18":{"start":{"line":28,"column":8},"end":{"line":28,"column":36}},"19":{"start":{"line":31,"column":4},"end":{"line":34,"column":5}},"20":{"start":{"line":32,"column":8},"end":{"line":32,"column":28}},"21":{"start":{"line":33,"column":8},"end":{"line":33,"column":57}},"22":{"start":{"line":37,"column":0},"end":{"line":74,"column":1}},"23":{"start":{"line":39,"column":8},"end":{"line":39,"column":42}},"24":{"start":{"line":42,"column":8},"end":{"line":42,"column":27}},"25":{"start":{"line":43,"column":8},"end":{"line":43,"column":33}},"26":{"start":{"line":44,"column":8},"end":{"line":50,"column":9}},"27":{"start":{"line":45,"column":12},"end":{"line":49,"column":15}},"28":{"start":{"line":46,"column":16},"end":{"line":48,"column":17}},"29":{"start":{"line":47,"column":20},"end":{"line":47,"column":66}},"30":{"start":{"line":51,"column":8},"end":{"line":53,"column":9}},"31":{"start":{"line":52,"column":12},"end":{"line":52,"column":42}},"32":{"start":{"line":56,"column":8},"end":{"line":59,"column":9}},"33":{"start":{"line":58,"column":12},"end":{"line":58,"column":70}},"34":{"start":{"line":62,"column":8},"end":{"line":62,"column":57}},"35":{"start":{"line":63,"column":8},"end":{"line":63,"column":62}},"36":{"start":{"line":66,"column":8},"end":{"line":69,"column":9}},"37":{"start":{"line":68,"column":12},"end":{"line":68,"column":35}},"38":{"start":{"line":70,"column":8},"end":{"line":70,"column":47}},"39":{"start":{"line":71,"column":8},"end":{"line":71,"column":35}},"40":{"start":{"line":72,"column":8},"end":{"line":72,"column":80}},"41":{"start":{"line":76,"column":0},"end":{"line":82,"column":1}},"42":{"start":{"line":77,"column":4},"end":{"line":77,"column":18}},"43":{"start":{"line":78,"column":4},"end":{"line":78,"column":21}},"44":{"start":{"line":79,"column":4},"end":{"line":79,"column":52}},"45":{"start":{"line":80,"column":4},"end":{"line":80,"column":56}},"46":{"start":{"line":81,"column":4},"end":{"line":81,"column":66}},"47":{"start":{"line":84,"column":0},"end":{"line":104,"column":1}},"48":{"start":{"line":85,"column":4},"end":{"line":88,"column":5}},"49":{"start":{"line":87,"column":8},"end":{"line":87,"column":42}},"50":{"start":{"line":90,"column":4},"end":{"line":90,"column":50}},"51":{"start":{"line":91,"column":4},"end":{"line":103,"column":5}},"52":{"start":{"line":92,"column":8},"end":{"line":100,"column":9}},"53":{"start":{"line":102,"column":8},"end":{"line":102,"column":18}},"54":{"start":{"line":106,"column":0},"end":{"line":106,"column":36}}},"branchMap":{"1":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":24,"column":4}},{"start":{"line":24,"column":4},"end":{"line":24,"column":4}}]},"2":{"line":24,"type":"binary-expr","locations":[{"start":{"line":24,"column":8},"end":{"line":24,"column":28}},{"start":{"line":24,"column":32},"end":{"line":24,"column":61}},{"start":{"line":24,"column":65},"end":{"line":24,"column":95}}]},"3":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":8},"end":{"line":25,"column":8}},{"start":{"line":25,"column":8},"end":{"line":25,"column":8}}]},"4":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":31,"column":4}},{"start":{"line":31,"column":4},"end":{"line":31,"column":4}}]},"5":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":8},"end":{"line":44,"column":8}},{"start":{"line":44,"column":8},"end":{"line":44,"column":8}}]},"6":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":16},"end":{"line":46,"column":16}},{"start":{"line":46,"column":16},"end":{"line":46,"column":16}}]},"7":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":51,"column":8}},{"start":{"line":51,"column":8},"end":{"line":51,"column":8}}]},"8":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":56,"column":8}},{"start":{"line":56,"column":8},"end":{"line":56,"column":8}}]},"9":{"line":56,"type":"binary-expr","locations":[{"start":{"line":56,"column":12},"end":{"line":56,"column":32}},{"start":{"line":56,"column":36},"end":{"line":56,"column":65}}]},"10":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":8},"end":{"line":66,"column":8}},{"start":{"line":66,"column":8},"end":{"line":66,"column":8}}]},"11":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":4},"end":{"line":85,"column":4}},{"start":{"line":85,"column":4},"end":{"line":85,"column":4}}]},"12":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":4},"end":{"line":91,"column":4}},{"start":{"line":91,"column":4},"end":{"line":91,"column":4}}]}},"code":["// Test based on rules from http://calendar.perfplanet.com/2013/the-runtime-performance-checklist/","var StatData = require('./StatData');","","function RuntimePerfMetrics() {","    this.paintArea = new StatData();","    this.nodesPerLayout = new StatData();","    this.DirtyNodesPerLayout = new StatData();","    this.layers = {};","    this.expensivePaints = 0;","    this.expensiveEventHandlers = 0;","    this.styles = 0;","","    this.hasData = false;","    this.eventDispatchFn = null; // To check if FunctionCall follows EventDispatch events","","    this.frames = [];","}","","","RuntimePerfMetrics.prototype.id = 'RuntimePerfMetrics';","","RuntimePerfMetrics.prototype.processRecord = function(record, source) {","    // If eventDispatch is ticking and this is not a FunctionCall, restart the ticks","    if (source === 'tracing' && this.eventDispatchFn !== null && record.type !== 'FunctionCall') {","        if (this.eventDispatchFn > 16) {","            this.expensiveEventHandlers++;","        }","        this.eventDispatchFn = null;","    }","","    if (typeof rules[record.type] === 'function') {","        this.hasData = true;","        rules[record.type].apply(this, [record, source]);","    }","};","","var rules = {","    DrawFrame: function(event) {","        this.frames.push(event.startTime);","    },","    EventDispatch: function(event) {","        var fnCallTime = 0;","        this.eventDispatchFn = 0; // start ticking eventDispatchFn ","        if (Array.isArray(event.children)) {","            event.children.forEach(function(event) {","                if (event.type === 'FunctionCall') {","                    fnCallTime += event.endTime - event.startTime;","                }","            });","        }","        if (fnCallTime > 16) {","            this.expensiveEventHandlers++;","        }","    },","    FunctionCall: function(event, source) {","        if (source === 'tracing' && this.eventDispatchFn !== null) {","            // Looks like a function call after eventDispatch since eventDispatchFn is ticking","            this.eventDispatchFn += (event.endTime - event.startTime);","        }","    },","    Layout: function(event) {","        this.nodesPerLayout.add(event.data.totalObjects);","        this.DirtyNodesPerLayout.add(event.data.dirtyObjects);","    },","    Paint: function(event) {","        if (event.endTime - event.startTime > 16) {","            // This paint took more than 1/60 ms or 16 ms","            this.expensivePaints++;","        }","        this.layers[event.data.layerId] = true;","        var clip = event.data.clip;","        this.paintArea.add(Math.abs((clip[0] - clip[3]) * (clip[1] - clip[7])));","    }","}","","function getFrameRate(frames) {","    frames.sort();","    var range = 0.20;","    var start = parseInt(frames.length * range, 10);","    var end = parseInt(frames.length * (1 - range), 10);","    return (1000 * (end - start)) / (frames[end] - frames[start]);","}","","RuntimePerfMetrics.prototype.getResults = function() {","    if (this.eventDispatchFn !== null) {","        // Last event on the chain is a Function call, so draining it","        this.processRecord({}, 'tracing');","    }","","    var paintAreaStat = this.paintArea.getStats();","    if (this.hasData) {","        return {","            'Layers': Object.keys(this.layers).length,","            'PaintedArea_total': paintAreaStat.sum,","            'PaintedArea_avg': paintAreaStat.mean,","            'NodePerLayout_avg': this.nodesPerLayout.getStats().mean,","            'ExpensivePaints': this.expensivePaints,","            'ExpensiveEventHandlers': this.expensiveEventHandlers,","            'framesPerSec (devtools)': getFrameRate(this.frames)","        }","    } else {","        return {};","    }","}","","module.exports = RuntimePerfMetrics;",""],"l":{"2":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"13":1,"14":1,"16":1,"20":1,"22":1,"24":0,"25":0,"26":0,"28":0,"31":0,"32":0,"33":0,"37":1,"39":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"51":0,"52":0,"56":0,"58":0,"62":0,"63":0,"66":0,"68":0,"70":0,"71":0,"72":0,"76":1,"77":0,"78":0,"79":0,"80":0,"81":0,"84":1,"85":0,"87":0,"90":0,"91":0,"92":0,"102":0,"106":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/probes/AndroidTracingProbe.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/probes/AndroidTracingProbe.js","s":{"1":1,"2":1,"3":1,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":0,"22":0,"23":1,"24":2,"25":0,"26":0,"27":0,"28":1,"29":1,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":1,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":1,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":1},"b":{"1":[0,1],"2":[0,1],"3":[1,0],"4":[0,1],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"f":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":2,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},"fnMap":{"1":{"name":"AndroidTracingProbe","line":10,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":33}}},"2":{"name":"(anonymous_2)","line":22,"loc":{"start":{"line":22,"column":42},"end":{"line":22,"column":60}}},"3":{"name":"(anonymous_3)","line":30,"loc":{"start":{"line":30,"column":38},"end":{"line":30,"column":52}}},"4":{"name":"(anonymous_4)","line":34,"loc":{"start":{"line":34,"column":22},"end":{"line":34,"column":40}}},"5":{"name":"(anonymous_5)","line":39,"loc":{"start":{"line":39,"column":43},"end":{"line":39,"column":54}}},"6":{"name":"(anonymous_6)","line":45,"loc":{"start":{"line":45,"column":16},"end":{"line":45,"column":37}}},"7":{"name":"(anonymous_7)","line":46,"loc":{"start":{"line":46,"column":8},"end":{"line":46,"column":41}}},"8":{"name":"(anonymous_8)","line":57,"loc":{"start":{"line":57,"column":53},"end":{"line":57,"column":71}}},"9":{"name":"(anonymous_9)","line":62,"loc":{"start":{"line":62,"column":104},"end":{"line":62,"column":114}}},"10":{"name":"(anonymous_10)","line":64,"loc":{"start":{"line":64,"column":9},"end":{"line":64,"column":19}}},"11":{"name":"(anonymous_11)","line":66,"loc":{"start":{"line":66,"column":9},"end":{"line":66,"column":20}}},"12":{"name":"(anonymous_12)","line":68,"loc":{"start":{"line":68,"column":9},"end":{"line":68,"column":24}}},"13":{"name":"(anonymous_13)","line":73,"loc":{"start":{"line":73,"column":52},"end":{"line":73,"column":70}}},"14":{"name":"(anonymous_14)","line":79,"loc":{"start":{"line":79,"column":93},"end":{"line":79,"column":104}}},"15":{"name":"(anonymous_15)","line":81,"loc":{"start":{"line":81,"column":9},"end":{"line":81,"column":24}}},"16":{"name":"(anonymous_16)","line":88,"loc":{"start":{"line":88,"column":9},"end":{"line":88,"column":30}}},"17":{"name":"(anonymous_17)","line":91,"loc":{"start":{"line":91,"column":22},"end":{"line":91,"column":37}}},"18":{"name":"(anonymous_18)","line":102,"loc":{"start":{"line":102,"column":37},"end":{"line":102,"column":61}}},"19":{"name":"(anonymous_19)","line":107,"loc":{"start":{"line":107,"column":4},"end":{"line":107,"column":15}}},"20":{"name":"(anonymous_20)","line":114,"loc":{"start":{"line":114,"column":47},"end":{"line":114,"column":72}}},"21":{"name":"(anonymous_21)","line":125,"loc":{"start":{"line":125,"column":30},"end":{"line":125,"column":41}}},"22":{"name":"(anonymous_22)","line":129,"loc":{"start":{"line":129,"column":19},"end":{"line":129,"column":34}}},"23":{"name":"done","line":139,"loc":{"start":{"line":139,"column":1},"end":{"line":139,"column":20}}},"24":{"name":"(anonymous_24)","line":157,"loc":{"start":{"line":157,"column":42},"end":{"line":157,"column":61}}},"25":{"name":"(anonymous_25)","line":162,"loc":{"start":{"line":162,"column":105},"end":{"line":162,"column":116}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":8,"column":28}},"2":{"start":{"line":10,"column":0},"end":{"line":16,"column":1}},"3":{"start":{"line":11,"column":1},"end":{"line":13,"column":2}},"4":{"start":{"line":12,"column":2},"end":{"line":12,"column":15}},"5":{"start":{"line":14,"column":1},"end":{"line":14,"column":21}},"6":{"start":{"line":15,"column":1},"end":{"line":15,"column":32}},"7":{"start":{"line":18,"column":0},"end":{"line":18,"column":56}},"8":{"start":{"line":20,"column":0},"end":{"line":20,"column":57}},"9":{"start":{"line":22,"column":0},"end":{"line":28,"column":1}},"10":{"start":{"line":24,"column":1},"end":{"line":26,"column":2}},"11":{"start":{"line":25,"column":2},"end":{"line":25,"column":14}},"12":{"start":{"line":27,"column":1},"end":{"line":27,"column":14}},"13":{"start":{"line":30,"column":0},"end":{"line":43,"column":2}},"14":{"start":{"line":31,"column":1},"end":{"line":31,"column":15}},"15":{"start":{"line":32,"column":1},"end":{"line":32,"column":21}},"16":{"start":{"line":33,"column":1},"end":{"line":33,"column":38}},"17":{"start":{"line":34,"column":1},"end":{"line":36,"column":4}},"18":{"start":{"line":35,"column":2},"end":{"line":35,"column":34}},"19":{"start":{"line":37,"column":1},"end":{"line":42,"column":2}},"20":{"start":{"line":38,"column":2},"end":{"line":38,"column":38}},"21":{"start":{"line":39,"column":2},"end":{"line":41,"column":5}},"22":{"start":{"line":40,"column":3},"end":{"line":40,"column":35}},"23":{"start":{"line":45,"column":0},"end":{"line":52,"column":1}},"24":{"start":{"line":46,"column":1},"end":{"line":51,"column":3}},"25":{"start":{"line":47,"column":2},"end":{"line":47,"column":16}},"26":{"start":{"line":48,"column":2},"end":{"line":50,"column":3}},"27":{"start":{"line":49,"column":3},"end":{"line":49,"column":34}},"28":{"start":{"line":54,"column":0},"end":{"line":54,"column":72}},"29":{"start":{"line":55,"column":0},"end":{"line":55,"column":74}},"30":{"start":{"line":57,"column":0},"end":{"line":71,"column":2}},"31":{"start":{"line":58,"column":1},"end":{"line":59,"column":46}},"32":{"start":{"line":61,"column":1},"end":{"line":61,"column":35}},"33":{"start":{"line":62,"column":1},"end":{"line":70,"column":4}},"34":{"start":{"line":63,"column":2},"end":{"line":63,"column":91}},"35":{"start":{"line":65,"column":2},"end":{"line":65,"column":221}},"36":{"start":{"line":67,"column":2},"end":{"line":67,"column":34}},"37":{"start":{"line":69,"column":2},"end":{"line":69,"column":14}},"38":{"start":{"line":73,"column":0},"end":{"line":100,"column":2}},"39":{"start":{"line":74,"column":1},"end":{"line":75,"column":47}},"40":{"start":{"line":77,"column":1},"end":{"line":77,"column":39}},"41":{"start":{"line":79,"column":1},"end":{"line":99,"column":4}},"42":{"start":{"line":80,"column":2},"end":{"line":80,"column":33}},"43":{"start":{"line":82,"column":2},"end":{"line":87,"column":3}},"44":{"start":{"line":83,"column":3},"end":{"line":83,"column":58}},"45":{"start":{"line":85,"column":3},"end":{"line":85,"column":12}},"46":{"start":{"line":86,"column":3},"end":{"line":86,"column":14}},"47":{"start":{"line":89,"column":2},"end":{"line":97,"column":3}},"48":{"start":{"line":91,"column":3},"end":{"line":96,"column":6}},"49":{"start":{"line":92,"column":4},"end":{"line":95,"column":7}},"50":{"start":{"line":98,"column":2},"end":{"line":98,"column":25}},"51":{"start":{"line":102,"column":0},"end":{"line":112,"column":2}},"52":{"start":{"line":103,"column":1},"end":{"line":103,"column":29}},"53":{"start":{"line":104,"column":1},"end":{"line":104,"column":26}},"54":{"start":{"line":105,"column":1},"end":{"line":109,"column":4}},"55":{"start":{"line":108,"column":2},"end":{"line":108,"column":21}},"56":{"start":{"line":111,"column":1},"end":{"line":111,"column":25}},"57":{"start":{"line":114,"column":0},"end":{"line":155,"column":2}},"58":{"start":{"line":115,"column":1},"end":{"line":118,"column":34}},"59":{"start":{"line":120,"column":1},"end":{"line":120,"column":36}},"60":{"start":{"line":121,"column":1},"end":{"line":121,"column":41}},"61":{"start":{"line":122,"column":1},"end":{"line":122,"column":63}},"62":{"start":{"line":123,"column":1},"end":{"line":123,"column":45}},"63":{"start":{"line":125,"column":1},"end":{"line":127,"column":13}},"64":{"start":{"line":126,"column":2},"end":{"line":126,"column":14}},"65":{"start":{"line":129,"column":1},"end":{"line":135,"column":4}},"66":{"start":{"line":130,"column":2},"end":{"line":130,"column":29}},"67":{"start":{"line":132,"column":2},"end":{"line":134,"column":3}},"68":{"start":{"line":133,"column":3},"end":{"line":133,"column":14}},"69":{"start":{"line":137,"column":1},"end":{"line":137,"column":23}},"70":{"start":{"line":139,"column":1},"end":{"line":152,"column":2}},"71":{"start":{"line":140,"column":2},"end":{"line":142,"column":3}},"72":{"start":{"line":141,"column":3},"end":{"line":141,"column":29}},"73":{"start":{"line":143,"column":2},"end":{"line":150,"column":3}},"74":{"start":{"line":144,"column":3},"end":{"line":144,"column":20}},"75":{"start":{"line":145,"column":3},"end":{"line":149,"column":4}},"76":{"start":{"line":146,"column":4},"end":{"line":146,"column":26}},"77":{"start":{"line":148,"column":4},"end":{"line":148,"column":22}},"78":{"start":{"line":151,"column":2},"end":{"line":151,"column":16}},"79":{"start":{"line":154,"column":1},"end":{"line":154,"column":25}},"80":{"start":{"line":157,"column":0},"end":{"line":170,"column":2}},"81":{"start":{"line":158,"column":1},"end":{"line":160,"column":33}},"82":{"start":{"line":162,"column":1},"end":{"line":169,"column":4}},"83":{"start":{"line":164,"column":2},"end":{"line":164,"column":48}},"84":{"start":{"line":165,"column":2},"end":{"line":167,"column":3}},"85":{"start":{"line":166,"column":3},"end":{"line":166,"column":23}},"86":{"start":{"line":168,"column":2},"end":{"line":168,"column":27}},"87":{"start":{"line":172,"column":0},"end":{"line":172,"column":37}}},"branchMap":{"1":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},{"start":{"line":11,"column":1},"end":{"line":11,"column":1}}]},"2":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},{"start":{"line":24,"column":1},"end":{"line":24,"column":1}}]},"3":{"line":24,"type":"binary-expr","locations":[{"start":{"line":24,"column":5},"end":{"line":24,"column":58}},{"start":{"line":24,"column":62},"end":{"line":24,"column":143}}]},"4":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},{"start":{"line":37,"column":1},"end":{"line":37,"column":1}}]},"5":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":2},"end":{"line":48,"column":2}},{"start":{"line":48,"column":2},"end":{"line":48,"column":2}}]},"6":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":2},"end":{"line":89,"column":2}},{"start":{"line":89,"column":2},"end":{"line":89,"column":2}}]},"7":{"line":120,"type":"binary-expr","locations":[{"start":{"line":120,"column":11},"end":{"line":120,"column":18}},{"start":{"line":120,"column":22},"end":{"line":120,"column":35}}]},"8":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":2},"end":{"line":132,"column":2}},{"start":{"line":132,"column":2},"end":{"line":132,"column":2}}]},"9":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":2},"end":{"line":140,"column":2}},{"start":{"line":140,"column":2},"end":{"line":140,"column":2}}]},"10":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":2},"end":{"line":143,"column":2}},{"start":{"line":143,"column":2},"end":{"line":143,"column":2}}]},"11":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":3},"end":{"line":145,"column":3}},{"start":{"line":145,"column":3},"end":{"line":145,"column":3}}]},"12":{"line":165,"type":"if","locations":[{"start":{"line":165,"column":2},"end":{"line":165,"column":2}},{"start":{"line":165,"column":2},"end":{"line":165,"column":2}}]}},"code":["var Q = require('q'),","\tfs = require('fs'),","\tutil = require('util'),","\tdebug = require('debug')('bp:probes:AndroidTracingProbe'),","\tevents = require('events'),","\thelpers = require('../helpers'),","\tchildProcess = require('child_process'),","\tbyline = require('byline');","","function AndroidTracingProbe(id) {","\tif (id) {","\t\tthis.id = id;","\t}","\tdebug('Initialize');","\tevents.EventEmitter.call(this);","}","","util.inherits(AndroidTracingProbe, events.EventEmitter);","","AndroidTracingProbe.prototype.id = 'AndroidTracingProbe';","","AndroidTracingProbe.prototype.isEnabled = function(browser) {","\t// TRUE for Android Chrome browser - Activity Name is always set for Android-Chrome browser","\tif (helpers.deepEquals(browser, 'browserName', 'android') && helpers.deepEquals(browser, 'chromeOptions.androidPackage', 'com.android.chrome')) {","\t\treturn true;","\t}","\treturn false;","}","","AndroidTracingProbe.prototype.setup = function(cfg) {","\tvar me = this;","\tvar enabled = false;","\tthis.debugBrowser = cfg.debugBrowser;","\tcfg.browsers.forEach(function(browser) {","\t\tenabled = me.isEnabled(browser);","\t});","\tif (enabled) {","\t\tdebug('Setting up android tracing');","\t\treturn this.run_('adb server start').fin(function() {","\t\t\treturn me.run_('adb logcat -c');","\t\t});","\t}","};","","var lifeCycle = function(methodName) {","\treturn function(browser, browserConfig) {","\t\tvar me = this;","\t\tif (me.isEnabled(browserConfig)) {","\t\t\treturn me[methodName](browser);","\t\t}","\t};","}","","AndroidTracingProbe.prototype.start = lifeCycle('startRecordingTrace_');","AndroidTracingProbe.prototype.teardown = lifeCycle('stopRecordingTrace_');","","AndroidTracingProbe.prototype.startRecordingTrace_ = function(browser) {","\tvar me = this,","\t\tquery = 'Logging performance trace to file';","","\tdebug('Starting android tracing');","\treturn me.run_('adb shell pm grant com.android.chrome android.permission.WRITE_EXTERNAL_STORAGE').then(function(){","\t\tme.run_('adb shell pm grant com.android.chrome android.permission.READ_EXTERNAL_STORAGE')","\t}).then(function(){","\t\treturn me.run_('adb shell \\'am broadcast -a com.android.chrome.GPU_PROFILER_START -e continuous \"\" -e categories \"benchmark,disabled-by-default-devtools.timeline,toplevel,disabled-by-default-devtools.timeline.frame\"\\'')","\t}).then(function() {","\t\treturn me.waitForLogCat_(query);","\t}).then(function(line) {","\t\tdebug(line);","\t});","};","","AndroidTracingProbe.prototype.stopRecordingTrace_ = function(browser) {","\tvar me = this,","\t\tquery = 'Profiler finished. Results are in ';","","\tdebug('Tearing down android tracing');","","\treturn this.run_('adb shell \\'am broadcast -a com.android.chrome.GPU_PROFILER_STOP\\'').then(function() {","\t\treturn me.waitForLogCat_(query)","\t}).then(function(line) {","\t\ttry {","\t\t\treturn me.pullLogs_(line.split(query)[1].slice(0, -1));","\t\t} catch (e) {","\t\t\tdebug(e);","\t\t\treturn Q();","\t\t}","\t}).then(function(dataStream) {","\t\tif (dataStream) {","\t\t\t// Format is {traceEvents: [{pid:...,cat:...}]}","\t\t\tdataStream.forEach(function(data) {","\t\t\t\tme.emit('data', {","\t\t\t\t\ttype: 'androidTracing',","\t\t\t\t\tvalue: data","\t\t\t\t});","\t\t\t});","\t\t}","\t\tdebug('Read all data');","\t});","};","","AndroidTracingProbe.prototype.run_ = function(commandString) {","\tdebug('$ ' + commandString);","\tvar deferred = Q.defer();","\tvar process = childProcess.exec(commandString, {","\t\ttimeout: 1000 * 60 * 2","\t}, function() {","\t\tdeferred.resolve();","\t});","","\treturn deferred.promise;","};","","AndroidTracingProbe.prototype.waitForLogCat_ = function(query, timeout) {","\tvar deferred = Q.defer(),","\t\tline = '',","\t\tcommandString = \"adb logcat\",","\t\tsearch = new RegExp(query, \"i\");","","\ttimeout = timeout || 1000 * 60 * 2;","\tvar command = commandString.split(/\\s/);","\tvar logcat = childProcess.spawn(command[0], command.slice(1));","\tstream = byline.createStream(logcat.stdout);","","\tvar timerHandle = setTimeout(function() {","\t\tdone(false);","\t}, timeout);","","\tstream.on('data', function(data) {","\t\tvar line = data.toString();","\t\t//debug('> ', line);","\t\tif (line.match(search)) {","\t\t\tdone(line);","\t\t}","\t});","","\tvar completed = false;","","\tfunction done(arg) {","\t\tif (timerHandle) {","\t\t\tclearTimeout(timerHandle);","\t\t}","\t\tif (!completed) {","\t\t\tcompleted = true;","\t\t\tif (arg) {","\t\t\t\tdeferred.resolve(arg);","\t\t\t} else {","\t\t\t\tdeferred.reject();","\t\t\t}","\t\t}","\t\tlogcat.kill();","\t}","","\treturn deferred.promise;","};","","AndroidTracingProbe.prototype.pullLogs_ = function(filename) {","\tvar me = this,","\t\tpath = require('path'),","\t\tfile = path.basename(filename);","","\treturn me.run_(['adb pull', filename.replace('/storage/emulated/0/', '/sdcard/'), file].join(' ')).then(function() {","\t\t// TODO Convert this to streams","\t\tvar trace = JSON.parse(fs.readFileSync(file));","\t\tif (!me.debugBrowser) {","\t\t\tfs.unlinkSync(file);","\t\t}","\t\treturn trace.traceEvents;","\t});","};","","module.exports = AndroidTracingProbe;"],"l":{"1":1,"10":1,"11":1,"12":0,"14":1,"15":1,"18":1,"20":1,"22":1,"24":1,"25":0,"27":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"37":1,"38":0,"39":0,"40":0,"45":1,"46":2,"47":0,"48":0,"49":0,"54":1,"55":1,"57":1,"58":0,"61":0,"62":0,"63":0,"65":0,"67":0,"69":0,"73":1,"74":0,"77":0,"79":0,"80":0,"82":0,"83":0,"85":0,"86":0,"89":0,"91":0,"92":0,"98":0,"102":1,"103":0,"104":0,"105":0,"108":0,"111":0,"114":1,"115":0,"120":0,"121":0,"122":0,"123":0,"125":0,"126":0,"129":0,"130":0,"132":0,"133":0,"137":0,"139":1,"140":0,"141":0,"143":0,"144":0,"145":0,"146":0,"148":0,"151":0,"154":0,"157":1,"158":0,"162":0,"164":0,"165":0,"166":0,"168":0,"172":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/probes/NavTimingProbe.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/probes/NavTimingProbe.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1},"b":{"1":[0,0,0,0,0,0],"2":[0,0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"NavTimingProbe","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":26}}},"2":{"name":"(anonymous_2)","line":15,"loc":{"start":{"line":15,"column":36},"end":{"line":15,"column":54}}},"3":{"name":"(anonymous_3)","line":16,"loc":{"start":{"line":16,"column":12},"end":{"line":16,"column":23}}},"4":{"name":"(anonymous_4)","line":17,"loc":{"start":{"line":17,"column":31},"end":{"line":17,"column":42}}},"5":{"name":"(anonymous_5)","line":23,"loc":{"start":{"line":23,"column":4},"end":{"line":23,"column":23}}},"6":{"name":"(anonymous_6)","line":28,"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":35}}},"7":{"name":"(anonymous_7)","line":48,"loc":{"start":{"line":48,"column":51},"end":{"line":48,"column":62}}},"8":{"name":"(anonymous_8)","line":54,"loc":{"start":{"line":54,"column":9},"end":{"line":54,"column":23}}},"9":{"name":"(anonymous_9)","line":56,"loc":{"start":{"line":56,"column":9},"end":{"line":56,"column":23}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":5,"column":33}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":1}},"3":{"start":{"line":8,"column":1},"end":{"line":8,"column":32}},"4":{"start":{"line":11,"column":0},"end":{"line":11,"column":51}},"5":{"start":{"line":13,"column":0},"end":{"line":13,"column":47}},"6":{"start":{"line":15,"column":0},"end":{"line":59,"column":2}},"7":{"start":{"line":16,"column":1},"end":{"line":45,"column":3}},"8":{"start":{"line":17,"column":2},"end":{"line":26,"column":20}},"9":{"start":{"line":18,"column":3},"end":{"line":25,"column":6}},"10":{"start":{"line":24,"column":5},"end":{"line":24,"column":44}},"11":{"start":{"line":28,"column":2},"end":{"line":44,"column":5}},"12":{"start":{"line":29,"column":3},"end":{"line":29,"column":19}},"13":{"start":{"line":30,"column":3},"end":{"line":30,"column":117}},"14":{"start":{"line":31,"column":3},"end":{"line":42,"column":4}},"15":{"start":{"line":32,"column":4},"end":{"line":32,"column":34}},"16":{"start":{"line":33,"column":4},"end":{"line":36,"column":5}},"17":{"start":{"line":34,"column":5},"end":{"line":35,"column":30}},"18":{"start":{"line":35,"column":6},"end":{"line":35,"column":30}},"19":{"start":{"line":37,"column":4},"end":{"line":41,"column":5}},"20":{"start":{"line":38,"column":5},"end":{"line":38,"column":117}},"21":{"start":{"line":39,"column":11},"end":{"line":41,"column":5}},"22":{"start":{"line":40,"column":5},"end":{"line":40,"column":66}},"23":{"start":{"line":43,"column":3},"end":{"line":43,"column":32}},"24":{"start":{"line":47,"column":1},"end":{"line":47,"column":15}},"25":{"start":{"line":48,"column":1},"end":{"line":58,"column":4}},"26":{"start":{"line":49,"column":2},"end":{"line":53,"column":5}},"27":{"start":{"line":55,"column":2},"end":{"line":55,"column":45}},"28":{"start":{"line":57,"column":2},"end":{"line":57,"column":23}},"29":{"start":{"line":60,"column":0},"end":{"line":60,"column":32}}},"branchMap":{"1":{"line":18,"type":"binary-expr","locations":[{"start":{"line":18,"column":10},"end":{"line":18,"column":38}},{"start":{"line":19,"column":4},"end":{"line":19,"column":38}},{"start":{"line":20,"column":4},"end":{"line":20,"column":35}},{"start":{"line":21,"column":4},"end":{"line":21,"column":33}},{"start":{"line":22,"column":4},"end":{"line":22,"column":34}},{"start":{"line":23,"column":4},"end":{"line":25,"column":5}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":21},"end":{"line":30,"column":39}},{"start":{"line":30,"column":43},"end":{"line":30,"column":67}},{"start":{"line":30,"column":71},"end":{"line":30,"column":91}},{"start":{"line":30,"column":95},"end":{"line":30,"column":116}}]},"3":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":3},"end":{"line":31,"column":3}},{"start":{"line":31,"column":3},"end":{"line":31,"column":3}}]},"4":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":5},"end":{"line":34,"column":5}},{"start":{"line":34,"column":5},"end":{"line":34,"column":5}}]},"5":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":4},"end":{"line":37,"column":4}},{"start":{"line":37,"column":4},"end":{"line":37,"column":4}}]},"6":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":8},"end":{"line":37,"column":21}},{"start":{"line":37,"column":25},"end":{"line":37,"column":48}}]},"7":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":11},"end":{"line":39,"column":11}},{"start":{"line":39,"column":11},"end":{"line":39,"column":11}}]}},"code":["var Q = require('q'),","\tutil = require('util'),","\twd = require('wd'),","\tevents = require('events'),","\thelpers = require('../helpers');","","function NavTimingProbe() {","\tevents.EventEmitter.call(this);","}","","util.inherits(NavTimingProbe, events.EventEmitter);","","NavTimingProbe.prototype.id = 'NavTimingProbe';","","NavTimingProbe.prototype.teardown = function(browser) {","\tvar code = function() {","\t\tvar requestAnimationFrame = (function() {","\t\t\treturn window.requestAnimationFrame ||","\t\t\t\twindow.webkitRequestAnimationFrame ||","\t\t\t\twindow.mozRequestAnimationFrame ||","\t\t\t\twindow.oRequestAnimationFrame ||","\t\t\t\twindow.msRequestAnimationFrame ||","\t\t\t\tfunction(callback) {","\t\t\t\t\twindow.setTimeout(callback, 1000 / 60);","\t\t\t\t};","\t\t})().bind(window);","","\t\trequestAnimationFrame(function() {","\t\t\tvar result = {};","\t\t\tvar performance = window.performance || window.webkitPerformance || window.msPerformance || window.mozPerformance;","\t\t\tif (typeof performance !== 'undefined') {","\t\t\t\tvar data = performance.timing;","\t\t\t\tfor (var key in data) {","\t\t\t\t\tif (typeof data[key] === 'number') // Firefox spits out a toJSON function also","\t\t\t\t\t\tresult[key] = data[key];","\t\t\t\t}","\t\t\t\tif (window.chrome && window.chrome.loadTimes) { // Chrome","\t\t\t\t\tresult.firstPaint = (window.chrome.loadTimes().firstPaintTime - window.chrome.loadTimes().startLoadTime) * 1000;","\t\t\t\t} else if (typeof window.performance.timing.msFirstPaint === 'number') { // IE","\t\t\t\t\tresult.firstPaint = data.msFirstPaint - data.navigationStart;","\t\t\t\t}","\t\t\t}","\t\t\twindow.__navTimings = result;","\t\t});","\t};","","\tvar me = this;","\treturn browser.execute(helpers.fnCall(code)).then(function() {","\t\treturn browser.waitFor({","\t\t\tasserter: wd.asserters.jsCondition('(typeof window.__navTimings !== \"undefined\")', false),","\t\t\ttimeout: 1000 * 60 * 10,","\t\t\tpollFreq: 1000","\t\t});","\t}).then(function(res) {","\t\treturn browser.eval('window.__navTimings');","\t}).then(function(res) {","\t\tme.emit('data', res);","\t});","};","module.exports = NavTimingProbe;"],"l":{"1":1,"7":1,"8":1,"11":1,"13":1,"15":1,"16":0,"17":0,"18":0,"24":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"37":0,"38":0,"39":0,"40":0,"43":0,"47":0,"48":0,"49":0,"55":0,"57":0,"60":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/probes/NetworkResourcesProbe.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/probes/NetworkResourcesProbe.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":1,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1},"b":{"1":[0,0],"2":[0,0],"3":[1,1],"4":[0,0],"5":[0,0,0]},"f":{"1":1,"2":0,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"NetworkResourcesProbe","line":13,"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":33}}},"2":{"name":"(anonymous_2)","line":43,"loc":{"start":{"line":43,"column":49},"end":{"line":43,"column":60}}},"3":{"name":"(anonymous_3)","line":49,"loc":{"start":{"line":49,"column":40},"end":{"line":49,"column":57}}},"4":{"name":"(anonymous_4)","line":59,"loc":{"start":{"line":59,"column":40},"end":{"line":59,"column":58}}},"5":{"name":"(anonymous_5)","line":66,"loc":{"start":{"line":66,"column":14},"end":{"line":66,"column":25}}},"6":{"name":"(anonymous_6)","line":69,"loc":{"start":{"line":69,"column":14},"end":{"line":69,"column":28}}},"7":{"name":"(anonymous_7)","line":74,"loc":{"start":{"line":74,"column":54},"end":{"line":74,"column":85}}},"8":{"name":"(anonymous_8)","line":86,"loc":{"start":{"line":86,"column":43},"end":{"line":86,"column":61}}},"9":{"name":"(anonymous_9)","line":89,"loc":{"start":{"line":89,"column":14},"end":{"line":89,"column":25}}},"10":{"name":"(anonymous_10)","line":92,"loc":{"start":{"line":92,"column":14},"end":{"line":92,"column":28}}},"11":{"name":"(anonymous_11)","line":94,"loc":{"start":{"line":94,"column":30},"end":{"line":94,"column":48}}},"12":{"name":"(anonymous_12)","line":98,"loc":{"start":{"line":98,"column":14},"end":{"line":98,"column":28}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":5,"column":36}},"2":{"start":{"line":13,"column":0},"end":{"line":31,"column":1}},"3":{"start":{"line":23,"column":4},"end":{"line":26,"column":6}},"4":{"start":{"line":28,"column":4},"end":{"line":28,"column":30}},"5":{"start":{"line":30,"column":4},"end":{"line":30,"column":35}},"6":{"start":{"line":33,"column":0},"end":{"line":33,"column":58}},"7":{"start":{"line":35,"column":0},"end":{"line":35,"column":61}},"8":{"start":{"line":43,"column":0},"end":{"line":47,"column":2}},"9":{"start":{"line":44,"column":4},"end":{"line":46,"column":13}},"10":{"start":{"line":49,"column":0},"end":{"line":52,"column":2}},"11":{"start":{"line":50,"column":4},"end":{"line":50,"column":65}},"12":{"start":{"line":51,"column":4},"end":{"line":51,"column":64}},"13":{"start":{"line":59,"column":0},"end":{"line":78,"column":2}},"14":{"start":{"line":60,"column":4},"end":{"line":60,"column":18}},"15":{"start":{"line":65,"column":4},"end":{"line":77,"column":11}},"16":{"start":{"line":67,"column":12},"end":{"line":67,"column":60}},"17":{"start":{"line":70,"column":12},"end":{"line":70,"column":32}},"18":{"start":{"line":73,"column":12},"end":{"line":76,"column":13}},"19":{"start":{"line":74,"column":16},"end":{"line":74,"column":126}},"20":{"start":{"line":74,"column":87},"end":{"line":74,"column":122}},"21":{"start":{"line":75,"column":16},"end":{"line":75,"column":74}},"22":{"start":{"line":86,"column":0},"end":{"line":101,"column":2}},"23":{"start":{"line":87,"column":4},"end":{"line":87,"column":18}},"24":{"start":{"line":88,"column":4},"end":{"line":100,"column":11}},"25":{"start":{"line":90,"column":12},"end":{"line":90,"column":60}},"26":{"start":{"line":94,"column":12},"end":{"line":96,"column":15}},"27":{"start":{"line":95,"column":16},"end":{"line":95,"column":66}},"28":{"start":{"line":99,"column":12},"end":{"line":99,"column":33}},"29":{"start":{"line":102,"column":0},"end":{"line":102,"column":39}}},"branchMap":{"1":{"line":44,"type":"cond-expr","locations":[{"start":{"line":45,"column":10},"end":{"line":45,"column":41}},{"start":{"line":46,"column":10},"end":{"line":46,"column":12}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":33},"end":{"line":44,"column":51}},{"start":{"line":44,"column":55},"end":{"line":44,"column":105}}]},"3":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":18},"end":{"line":50,"column":58}},{"start":{"line":50,"column":62},"end":{"line":50,"column":64}}]},"4":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":12},"end":{"line":73,"column":12}},{"start":{"line":73,"column":12},"end":{"line":73,"column":12}}]},"5":{"line":73,"type":"binary-expr","locations":[{"start":{"line":73,"column":16},"end":{"line":73,"column":46}},{"start":{"line":73,"column":51},"end":{"line":73,"column":64}},{"start":{"line":73,"column":68},"end":{"line":73,"column":92}}]}},"code":["var Q = require('q'),","    util = require('util'),","    wd = require('wd'),","    events = require('events'),","    helpers = require('../helpers');","","/**"," * Network resources timing Probe"," *"," * @see http://www.w3.org/TR/resource-timing/"," * @constructor"," */","function NetworkResourcesProbe() {","","    /**","     * \"outputRawData\" config option to decide whether or not Metric should return raw data","     *","     * \"resultsBeforeStart\" window.performance.getEntries() track all resources, even before browser-perf is started.","     * With this option, metric could return all (\"true\") results or only between Probe \"start\" and \"teardown\" (\"false\")","     *","     * @type {{outputRawData: boolean, resultsBeforeStart: boolean}}","     */","    this.defaultOptions = {","        'outputRawData' : false,","        'resultsBeforeStart' : false","    };","","    this.lastResourceTime = 0;","","    events.EventEmitter.call(this);","}","","util.inherits(NetworkResourcesProbe, events.EventEmitter);","","NetworkResourcesProbe.prototype.id = 'NetworkResourcesProbe';","","/**"," * Client-side script that need to be executed"," * inside browser to get Network Resources statistics"," *"," * @private"," */","NetworkResourcesProbe.prototype._clientGetData = function() {","    window.__networkResources = (window.performance && typeof window.performance.getEntries == 'function')","        ? window.performance.getEntries()","        : [];","};","","NetworkResourcesProbe.prototype.setup = function(config) {","    var options = config.metricOptions['NetworkResources'] || {};","    this.options = helpers.extend(this.defaultOptions, options);","};","","/**"," * Called on metrics.stats"," *"," * @param browser"," */","NetworkResourcesProbe.prototype.start = function(browser) {","    var me = this;","","    // Execute window.performance.getEntries() to get resources","    // that were before fetched before browser-perf metrics started","    // and calculate last loaded resource","    browser.execute(helpers.fnCall(this._clientGetData))","        .then(function() {","            return browser.eval('window.__networkResources')","        })","        .then(function(res) {","            me.beforeData = res;","","            // If \"resultsBeforeStart\" option is false and there are any information","            if (!me.options.resultsBeforeStart &&  me.beforeData && me.beforeData.length > 0) {","                var resourceTimes = me.beforeData.map(function(networkResource, idx) { return networkResource.responseEnd; });","                me.lastResourceTime = Math.max.apply(null, resourceTimes);","            }","        });","};","","/**"," * Called on metrics.teardown"," *"," * @param browser"," * @returns {*}"," */","NetworkResourcesProbe.prototype.teardown = function(browser) {","    var me = this;","    return browser.execute(helpers.fnCall(this._clientGetData))","        .then(function() {","            return browser.eval('window.__networkResources')","        })","        .then(function(res) {","            // filter results to starts with this.lastResourceTime","            return res.filter(function(element) {","                return element['startTime'] >= me.lastResourceTime","            });","        })","        .then(function(res) {","            me.emit('data', res);","        });","};","module.exports = NetworkResourcesProbe;",""],"l":{"1":1,"13":1,"23":1,"28":1,"30":1,"33":1,"35":1,"43":1,"44":0,"49":1,"50":1,"51":1,"59":1,"60":0,"65":0,"67":0,"70":0,"73":0,"74":0,"75":0,"86":1,"87":0,"88":0,"90":0,"94":0,"95":0,"99":0,"102":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/probes/PerfLogProbe.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/probes/PerfLogProbe.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"PerfLogProbe","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":24}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":31},"end":{"line":19,"column":45}}},"3":{"name":"(anonymous_3)","line":21,"loc":{"start":{"line":21,"column":33},"end":{"line":21,"column":51}}},"4":{"name":"(anonymous_4)","line":32,"loc":{"start":{"line":32,"column":31},"end":{"line":32,"column":49}}},"5":{"name":"(anonymous_5)","line":34,"loc":{"start":{"line":34,"column":32},"end":{"line":34,"column":47}}},"6":{"name":"(anonymous_6)","line":37,"loc":{"start":{"line":37,"column":9},"end":{"line":37,"column":20}}},"7":{"name":"(anonymous_7)","line":44,"loc":{"start":{"line":44,"column":34},"end":{"line":44,"column":52}}},"8":{"name":"(anonymous_8)","line":47,"loc":{"start":{"line":47,"column":19},"end":{"line":47,"column":53}}},"9":{"name":"(anonymous_9)","line":68,"loc":{"start":{"line":68,"column":26},"end":{"line":68,"column":45}}},"10":{"name":"(anonymous_10)","line":79,"loc":{"start":{"line":79,"column":19},"end":{"line":79,"column":34}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":9,"column":52}},"2":{"start":{"line":11,"column":0},"end":{"line":13,"column":1}},"3":{"start":{"line":12,"column":1},"end":{"line":12,"column":32}},"4":{"start":{"line":15,"column":0},"end":{"line":15,"column":49}},"5":{"start":{"line":17,"column":0},"end":{"line":17,"column":43}},"6":{"start":{"line":19,"column":0},"end":{"line":30,"column":2}},"7":{"start":{"line":20,"column":1},"end":{"line":20,"column":15}},"8":{"start":{"line":21,"column":1},"end":{"line":28,"column":4}},"9":{"start":{"line":22,"column":2},"end":{"line":26,"column":5}},"10":{"start":{"line":27,"column":2},"end":{"line":27,"column":17}},"11":{"start":{"line":29,"column":1},"end":{"line":29,"column":15}},"12":{"start":{"line":32,"column":0},"end":{"line":42,"column":2}},"13":{"start":{"line":33,"column":1},"end":{"line":33,"column":15}},"14":{"start":{"line":34,"column":1},"end":{"line":41,"column":4}},"15":{"start":{"line":35,"column":2},"end":{"line":35,"column":37}},"16":{"start":{"line":36,"column":2},"end":{"line":36,"column":52}},"17":{"start":{"line":38,"column":2},"end":{"line":40,"column":3}},"18":{"start":{"line":39,"column":3},"end":{"line":39,"column":37}},"19":{"start":{"line":44,"column":0},"end":{"line":87,"column":2}},"20":{"start":{"line":45,"column":1},"end":{"line":45,"column":15}},"21":{"start":{"line":46,"column":1},"end":{"line":86,"column":2}},"22":{"start":{"line":47,"column":2},"end":{"line":85,"column":5}},"23":{"start":{"line":48,"column":3},"end":{"line":54,"column":14}},"24":{"start":{"line":56,"column":3},"end":{"line":56,"column":53}},"25":{"start":{"line":57,"column":3},"end":{"line":63,"column":26}},"26":{"start":{"line":67,"column":3},"end":{"line":84,"column":46}},"27":{"start":{"line":69,"column":5},"end":{"line":78,"column":6}},"28":{"start":{"line":71,"column":6},"end":{"line":71,"column":49}},"29":{"start":{"line":74,"column":6},"end":{"line":77,"column":9}},"30":{"start":{"line":80,"column":5},"end":{"line":83,"column":8}},"31":{"start":{"line":89,"column":0},"end":{"line":89,"column":30}}},"branchMap":{"1":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":2},"end":{"line":38,"column":2}},{"start":{"line":38,"column":2},"end":{"line":38,"column":2}}]},"2":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},{"start":{"line":46,"column":1},"end":{"line":46,"column":1}}]},"3":{"line":50,"type":"cond-expr","locations":[{"start":{"line":50,"column":42},"end":{"line":50,"column":44}},{"start":{"line":50,"column":47},"end":{"line":50,"column":50}}]},"4":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":5},"end":{"line":69,"column":5}},{"start":{"line":69,"column":5},"end":{"line":69,"column":5}}]}},"code":["var util = require('util'),","\tUrl = require('url'),","\tevents = require('events'),","\tQ = require('q'),","\trequest = require('request'),","\tJSONStream = require('JSONStream'),","\teventStream = require('event-stream'),","\thelpers = require('../helpers'),","\tdebug = require('debug')('bp:probes:PerfLogProbe');","","function PerfLogProbe() {","\tevents.EventEmitter.call(this);","}","","util.inherits(PerfLogProbe, events.EventEmitter);","","PerfLogProbe.prototype.id = 'PerfLogProbe';","","PerfLogProbe.prototype.setup = function(cfg) {","\tvar me = this;","\tcfg.browsers = cfg.browsers.map(function(browser) {","\t\thelpers.extend(browser, {","\t\t\tloggingPrefs: {","\t\t\t\tperformance: 'ALL'","\t\t\t}","\t\t});","\t\treturn browser;","\t});","\treturn Q(cfg);","};","","PerfLogProbe.prototype.start = function(browser) {","\tvar me = this;","\treturn browser.logTypes().then(function(logs) {","\t\tdebug('Supported log types', logs);","\t\tme.enabled = (logs.indexOf('performance') !== -1);","\t}).then(function() {","\t\tif (me.enabled) {","\t\t\treturn browser.log('performance');","\t\t}","\t});","};","","PerfLogProbe.prototype.teardown = function(browser) {","\tvar me = this;","\tif (this.enabled) {","\t\treturn Q.promise(function(resolve, reject, notify) {","\t\t\tvar url = [","\t\t\t\tbrowser.configUrl.href,","\t\t\t\tbrowser.configUrl.href.match(/\\/$/) ? '' : '/', // making sure the last part of the path doesn't get stripped","\t\t\t\t'session/',","\t\t\t\tbrowser.sessionID,","\t\t\t\t'/log'","\t\t\t].join('');","","\t\t\tdebug('Getting Performance log', Url.format(url));","\t\t\tvar logStream = request({","\t\t\t\turl: url,","\t\t\t\tmethod: 'POST',","\t\t\t\tjson: {","\t\t\t\t\ttype: 'performance'","\t\t\t\t}","\t\t\t}).on('error', reject);","","\t\t\t//logStream.pipe(require('fs').createWriteStream('_perflog.json'));","","\t\t\tlogStream.pipe(JSONStream.parse('value.*')).on('error', reject)","\t\t\t\t.pipe(eventStream.map(function(data, cb) {","\t\t\t\t\tif (typeof data.message !== 'undefined') {","\t\t\t\t\t\t// ChromeDriver - format: message: \"[{method:'Tracing.dataCollected', params:{cat:...,pid:...}}]\"","\t\t\t\t\t\tcb(null, JSON.parse(data.message).message);","\t\t\t\t\t} else {","\t\t\t\t\t\t// Appium - format: [{startTime:..., name:..., endTime:...}]","\t\t\t\t\t\tcb(null, {","\t\t\t\t\t\t\tmethod: 'Timeline.eventRecorded',","\t\t\t\t\t\t\tparams: data","\t\t\t\t\t\t});","\t\t\t\t\t}","\t\t\t\t})).on('data', function(data) {","\t\t\t\t\tme.emit('data', {","\t\t\t\t\t\ttype: 'perfLog',","\t\t\t\t\t\tvalue: data","\t\t\t\t\t});","\t\t\t\t}).on('error', reject).on('end', resolve);","\t\t});","\t}","};","","module.exports = PerfLogProbe;"],"l":{"1":1,"11":1,"12":1,"15":1,"17":1,"19":1,"20":1,"21":1,"22":1,"27":1,"29":1,"32":1,"33":0,"34":0,"35":0,"36":0,"38":0,"39":0,"44":1,"45":0,"46":0,"47":0,"48":0,"56":0,"57":0,"67":0,"69":0,"71":0,"74":0,"80":0,"89":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/probes/RafBenchmarkingProbe.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/probes/RafBenchmarkingProbe.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1},"b":{"1":[0,0],"2":[0,0,0,0,0],"3":[0,0,0,0,0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"RafBenchmarkingProbe","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":32}}},"2":{"name":"(anonymous_2)","line":15,"loc":{"start":{"line":15,"column":39},"end":{"line":15,"column":57}}},"3":{"name":"(anonymous_3)","line":16,"loc":{"start":{"line":16,"column":12},"end":{"line":16,"column":23}}},"4":{"name":"(anonymous_4)","line":17,"loc":{"start":{"line":17,"column":19},"end":{"line":17,"column":30}}},"5":{"name":"(anonymous_5)","line":25,"loc":{"start":{"line":25,"column":11},"end":{"line":25,"column":22}}},"6":{"name":"(anonymous_6)","line":30,"loc":{"start":{"line":30,"column":31},"end":{"line":30,"column":42}}},"7":{"name":"(anonymous_7)","line":36,"loc":{"start":{"line":36,"column":4},"end":{"line":36,"column":23}}},"8":{"name":"(anonymous_8)","line":44,"loc":{"start":{"line":44,"column":11},"end":{"line":44,"column":31}}},"9":{"name":"(anonymous_9)","line":52,"loc":{"start":{"line":52,"column":8},"end":{"line":52,"column":19}}},"10":{"name":"(anonymous_10)","line":65,"loc":{"start":{"line":65,"column":42},"end":{"line":65,"column":60}}},"11":{"name":"(anonymous_11)","line":68,"loc":{"start":{"line":68,"column":56},"end":{"line":68,"column":70}}},"12":{"name":"(anonymous_12)","line":73,"loc":{"start":{"line":73,"column":4},"end":{"line":73,"column":18}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":5,"column":60}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":1}},"3":{"start":{"line":8,"column":1},"end":{"line":8,"column":32}},"4":{"start":{"line":11,"column":0},"end":{"line":11,"column":57}},"5":{"start":{"line":13,"column":0},"end":{"line":13,"column":59}},"6":{"start":{"line":15,"column":0},"end":{"line":63,"column":2}},"7":{"start":{"line":16,"column":1},"end":{"line":60,"column":3}},"8":{"start":{"line":17,"column":2},"end":{"line":28,"column":7}},"9":{"start":{"line":18,"column":3},"end":{"line":27,"column":6}},"10":{"start":{"line":19,"column":4},"end":{"line":23,"column":53}},"11":{"start":{"line":25,"column":4},"end":{"line":27,"column":6}},"12":{"start":{"line":26,"column":5},"end":{"line":26,"column":33}},"13":{"start":{"line":30,"column":2},"end":{"line":39,"column":20}},"14":{"start":{"line":31,"column":3},"end":{"line":38,"column":5}},"15":{"start":{"line":37,"column":5},"end":{"line":37,"column":44}},"16":{"start":{"line":41,"column":2},"end":{"line":56,"column":4}},"17":{"start":{"line":45,"column":4},"end":{"line":48,"column":5}},"18":{"start":{"line":46,"column":5},"end":{"line":46,"column":31}},"19":{"start":{"line":47,"column":5},"end":{"line":47,"column":33}},"20":{"start":{"line":49,"column":4},"end":{"line":49,"column":41}},"21":{"start":{"line":50,"column":4},"end":{"line":50,"column":48}},"22":{"start":{"line":53,"column":4},"end":{"line":53,"column":31}},"23":{"start":{"line":54,"column":4},"end":{"line":54,"column":32}},"24":{"start":{"line":58,"column":2},"end":{"line":58,"column":53}},"25":{"start":{"line":62,"column":1},"end":{"line":62,"column":46}},"26":{"start":{"line":65,"column":0},"end":{"line":77,"column":2}},"27":{"start":{"line":66,"column":1},"end":{"line":66,"column":34}},"28":{"start":{"line":67,"column":1},"end":{"line":67,"column":15}},"29":{"start":{"line":68,"column":1},"end":{"line":76,"column":4}},"30":{"start":{"line":69,"column":2},"end":{"line":71,"column":3}},"31":{"start":{"line":70,"column":3},"end":{"line":70,"column":24}},"32":{"start":{"line":72,"column":2},"end":{"line":72,"column":31}},"33":{"start":{"line":74,"column":2},"end":{"line":74,"column":24}},"34":{"start":{"line":75,"column":2},"end":{"line":75,"column":31}},"35":{"start":{"line":79,"column":0},"end":{"line":79,"column":38}}},"branchMap":{"1":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":3},"end":{"line":18,"column":3}},{"start":{"line":18,"column":3},"end":{"line":18,"column":3}}]},"2":{"line":19,"type":"binary-expr","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":27}},{"start":{"line":20,"column":5},"end":{"line":20,"column":23}},{"start":{"line":21,"column":5},"end":{"line":21,"column":22}},{"start":{"line":22,"column":5},"end":{"line":22,"column":21}},{"start":{"line":23,"column":5},"end":{"line":23,"column":26}}]},"3":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":10},"end":{"line":31,"column":38}},{"start":{"line":32,"column":4},"end":{"line":32,"column":38}},{"start":{"line":33,"column":4},"end":{"line":33,"column":35}},{"start":{"line":34,"column":4},"end":{"line":34,"column":33}},{"start":{"line":35,"column":4},"end":{"line":35,"column":34}},{"start":{"line":36,"column":4},"end":{"line":38,"column":4}}]},"4":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":4}},{"start":{"line":45,"column":4},"end":{"line":45,"column":4}}]},"5":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":2},"end":{"line":69,"column":2}},{"start":{"line":69,"column":2},"end":{"line":69,"column":2}}]},"6":{"line":69,"type":"binary-expr","locations":[{"start":{"line":69,"column":6},"end":{"line":69,"column":24}},{"start":{"line":69,"column":28},"end":{"line":69,"column":42}}]}},"code":["var Q = require('q'),","\tutil = require('util'),","\tevents = require('events'),","\thelpers = require('../helpers'),","\tdebug = require('debug')('bp:probes:RafBenchmarkingProbe');","","function RafBenchmarkingProbe() {","\tevents.EventEmitter.call(this);","}","","util.inherits(RafBenchmarkingProbe, events.EventEmitter);","","RafBenchmarkingProbe.prototype.id = 'RafBenchmarkingProbe';","","RafBenchmarkingProbe.prototype.start = function(browser) {","\tvar code = function() {","\t\tvar getTimeMs = (function() {","\t\t\tif (window.performance)","\t\t\t\treturn (performance.now ||","\t\t\t\t\tperformance.mozNow ||","\t\t\t\t\tperformance.msNow ||","\t\t\t\t\tperformance.oNow ||","\t\t\t\t\tperformance.webkitNow).bind(window.performance);","\t\t\telse","\t\t\t\treturn function() {","\t\t\t\t\treturn new Date().getTime();","\t\t\t\t};","\t\t})();","","\t\tvar requestAnimationFrame = (function() {","\t\t\treturn window.requestAnimationFrame ||","\t\t\t\twindow.webkitRequestAnimationFrame ||","\t\t\t\twindow.mozRequestAnimationFrame ||","\t\t\t\twindow.oRequestAnimationFrame ||","\t\t\t\twindow.msRequestAnimationFrame ||","\t\t\t\tfunction(callback) {","\t\t\t\t\twindow.setTimeout(callback, 1000 / 60);","\t\t\t};","\t\t})().bind(window);","","\t\twindow.__RafRecorder = {","\t\t\tframes: [],","\t\t\tflush: true,","\t\t\trecord: function(timeStamp) {","\t\t\t\tif (__RafRecorder.flush) {","\t\t\t\t\t__RafRecorder.frames = [];","\t\t\t\t\t__RafRecorder.flush = false;","\t\t\t\t}","\t\t\t\t__RafRecorder.frames.push(timeStamp);","\t\t\t\trequestAnimationFrame(__RafRecorder.record);","\t\t\t},","\t\t\tget: function() {","\t\t\t\t__RafRecorder.flush = true;","\t\t\t\treturn __RafRecorder.frames;","\t\t\t}","\t\t};","","\t\trequestAnimationFrame(window.__RafRecorder.record);","","\t};","","\treturn browser.execute(helpers.fnCall(code));","};","","RafBenchmarkingProbe.prototype.teardown = function(browser) {","\tdebug('Clearing timer Interval');","\tvar me = this;","\treturn browser.eval('window.__RafRecorder.get()').then(function(res) {","\t\tif (Array.isArray(res) && res.length > 0) {","\t\t\tme.emit('data', res);","\t\t}","\t\tclearTimeout(me.timerHandle);","\t}, function(err) {","\t\tme.emit('error', err);","\t\tclearTimeout(me.timerHandle);","\t});","};","","module.exports = RafBenchmarkingProbe;"],"l":{"1":1,"7":1,"8":1,"11":1,"13":1,"15":1,"16":0,"17":0,"18":0,"19":0,"25":0,"26":0,"30":0,"31":0,"37":0,"41":0,"45":0,"46":0,"47":0,"49":0,"50":0,"53":0,"54":0,"58":0,"62":0,"65":1,"66":0,"67":0,"68":0,"69":0,"70":0,"72":0,"74":0,"75":0,"79":1}},"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/probes/SampleProbe.js":{"path":"/home/travis/build/npmtest/node-npmtest-browser-perf/node_modules/browser-perf/lib/probes/SampleProbe.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":1},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"SampleProbe","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":25}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":30},"end":{"line":19,"column":44}}},"3":{"name":"(anonymous_3)","line":25,"loc":{"start":{"line":25,"column":30},"end":{"line":25,"column":53}}},"4":{"name":"(anonymous_4)","line":28,"loc":{"start":{"line":28,"column":32},"end":{"line":28,"column":43}}},"5":{"name":"(anonymous_5)","line":37,"loc":{"start":{"line":37,"column":33},"end":{"line":37,"column":56}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":5,"column":51}},"2":{"start":{"line":7,"column":0},"end":{"line":13,"column":1}},"3":{"start":{"line":8,"column":1},"end":{"line":10,"column":2}},"4":{"start":{"line":9,"column":2},"end":{"line":9,"column":15}},"5":{"start":{"line":11,"column":1},"end":{"line":11,"column":21}},"6":{"start":{"line":12,"column":1},"end":{"line":12,"column":32}},"7":{"start":{"line":15,"column":0},"end":{"line":15,"column":48}},"8":{"start":{"line":17,"column":0},"end":{"line":17,"column":41}},"9":{"start":{"line":19,"column":0},"end":{"line":23,"column":2}},"10":{"start":{"line":20,"column":1},"end":{"line":20,"column":16}},"11":{"start":{"line":21,"column":1},"end":{"line":21,"column":25}},"12":{"start":{"line":22,"column":1},"end":{"line":22,"column":19}},"13":{"start":{"line":25,"column":0},"end":{"line":35,"column":2}},"14":{"start":{"line":26,"column":1},"end":{"line":26,"column":16}},"15":{"start":{"line":27,"column":1},"end":{"line":27,"column":15}},"16":{"start":{"line":28,"column":1},"end":{"line":33,"column":4}},"17":{"start":{"line":29,"column":2},"end":{"line":29,"column":23}},"18":{"start":{"line":30,"column":2},"end":{"line":32,"column":5}},"19":{"start":{"line":34,"column":1},"end":{"line":34,"column":19}},"20":{"start":{"line":37,"column":0},"end":{"line":41,"column":2}},"21":{"start":{"line":38,"column":1},"end":{"line":38,"column":19}},"22":{"start":{"line":39,"column":1},"end":{"line":39,"column":33}},"23":{"start":{"line":40,"column":1},"end":{"line":40,"column":19}},"24":{"start":{"line":43,"column":0},"end":{"line":43,"column":29}}},"branchMap":{"1":{"line":8,"type":"if","locations":[{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},{"start":{"line":8,"column":1},"end":{"line":8,"column":1}}]}},"code":["var Q = require('q'),","\tutil = require('util'),","\tevents = require('events'),","\thelpers = require('../helpers'),","\tdebug = require('debug')('bp:probes:SampleProbe');","","function SampleProbe(id) {","\tif (id) {","\t\tthis.id = id;","\t}","\tdebug('Initialize');","\tevents.EventEmitter.call(this);","}","","util.inherits(SampleProbe, events.EventEmitter);","","SampleProbe.prototype.id = 'SampleProbe';","","SampleProbe.prototype.setup = function(cfg) {","\tdebug('Setup');","\tthis.timerHandle = null;","\treturn Q.delay(1);","};","","SampleProbe.prototype.start = function(cfg, browser) {","\tdebug('start');","\tvar me = this;","\tthis.timerHandle = setInterval(function() {","\t\tdebug('Event fired');","\t\tme.emit('data', {","\t\t\ttime: new Date().getTime()","\t\t});","\t});","\treturn Q.delay(1);","};","","SampleProbe.prototype.teardown = function(cfg, browser) {","\tdebug('teardown');","\tclearInterval(this.timerHandle);","\treturn Q.delay(1);","};","","module.exports = SampleProbe;"],"l":{"1":1,"7":1,"8":0,"9":0,"11":0,"12":0,"15":1,"17":1,"19":1,"20":0,"21":0,"22":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"34":0,"37":1,"38":0,"39":0,"40":0,"43":1}}}