<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/util/statistics.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-browser-perf">npmtest-browser-perf (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/util/statistics.js</span></h1>
    <h2>
        
        Statements: <span class="metric">9.41% <small>(8 / 85)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 34)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 9)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">9.41% <small>(8 / 85)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-browser-perf/node_modules/browser-perf/lib/metrics/util/</a> &#187; statistics.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
Based on 
https://chromium.googlesource.com/chromium/src/+/6df438ed2adaf24fa2f4a92d4f3863825247b910/tools/telemetry/telemetry/util/statistics.py
*/
&nbsp;
/* 
Returns the float value of a number or the sum of a list.
*/
<span class="fstat-no" title="function not covered" >function Total(data) {</span>
<span class="cstat-no" title="statement not covered" >	if (typeof data === 'number') {</span>
<span class="cstat-no" title="statement not covered" >		return data;</span>
	} else <span class="cstat-no" title="statement not covered" >if (Array.isArray(data)) {</span>
<span class="cstat-no" title="statement not covered" >		return data.reduce(<span class="fstat-no" title="function not covered" >function(previousValue, currentValue, index, array) {</span></span>
<span class="cstat-no" title="statement not covered" >			return previousValue + currentValue;</span>
		});
	}
}
&nbsp;
/* 
Returns the quotient, or zero if the denominator is zero
*/
<span class="fstat-no" title="function not covered" >function DivideIfPossibleOrZero(numerator, denominator) {</span>
<span class="cstat-no" title="statement not covered" >	return denominator ? numerator / denominator : 0;</span>
}
&nbsp;
/*
 Calculates arithmetic mean.
&nbsp;
  Args:
    data: A list of samples.
&nbsp;
  Returns:
    The arithmetic mean value, or 0 if the list is empty.
*/
<span class="fstat-no" title="function not covered" >function ArithmeticMean(data) {</span>
<span class="cstat-no" title="statement not covered" >	numerator_total = Total(data);</span>
<span class="cstat-no" title="statement not covered" >	denominator_total = Total(data.length);</span>
<span class="cstat-no" title="statement not covered" >	return DivideIfPossibleOrZero(numerator_total, denominator_total);</span>
}
&nbsp;
/*
Sorts the samples, and map them linearly to the range [0,1].
&nbsp;
They're mapped such that for the N samples, the first sample is 0.5/N and the
last sample is (N-0.5)/N.
&nbsp;
Background: The discrepancy of the sample set i/(N-1); i=0, ..., N-1 is 2/N,
twice the discrepancy of the sample set (i+1/2)/N; i=0, ..., N-1. In our case
we don't want to distinguish between these two cases, as our original domain
is not bounded (it is for Monte Carlo integration, where discrepancy was
first used).
*/
<span class="fstat-no" title="function not covered" >function NormalizeSamples(samples) {</span>
<span class="cstat-no" title="statement not covered" >	if (!samples) {</span>
<span class="cstat-no" title="statement not covered" >		return 1;</span>
	}
<span class="cstat-no" title="statement not covered" >	samples = samples.sort();</span>
<span class="cstat-no" title="statement not covered" >	var low = Math.min.apply(null, samples);</span>
<span class="cstat-no" title="statement not covered" >	var high = Math.max.apply(null, samples);</span>
<span class="cstat-no" title="statement not covered" >	var new_low = 0.5 / samples.length;</span>
<span class="cstat-no" title="statement not covered" >	var new_high = (samples.length - 0.5) / samples.length;</span>
<span class="cstat-no" title="statement not covered" >	if (high - low == 0.0) {</span>
<span class="cstat-no" title="statement not covered" >		return {</span>
			samples: samples.map(<span class="fstat-no" title="function not covered" >function(s) {</span>
<span class="cstat-no" title="statement not covered" >				return 0.5;</span>
			}),
			scale: 1
		}
	}
<span class="cstat-no" title="statement not covered" >	var scale = (new_high - new_low) / (high - low);</span>
<span class="cstat-no" title="statement not covered" >	for (var i = 0; i &lt; samples.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >		samples[i] = (samples[i] - low) * scale + new_low</span>
	}
<span class="cstat-no" title="statement not covered" >	return {</span>
		samples: samples,
		scale: scale
	}
}
&nbsp;
/*
Clamp a value between some low and high value
*/
<span class="fstat-no" title="function not covered" >function Clamp(value, low, high) {</span>
<span class="cstat-no" title="statement not covered" >	low = typeof low === 'undefined' ? 0 : low;</span>
<span class="cstat-no" title="statement not covered" >	high = typeof high === 'undefined' ? 0 : high;</span>
<span class="cstat-no" title="statement not covered" >	console.log(value, low, high)</span>
<span class="cstat-no" title="statement not covered" >	return Math.min(Math.max(value, low), high);</span>
}
&nbsp;
/*
Computes the discrepancy of a set of 1D samples from the interval [0,1].
&nbsp;
The samples must be sorted. We define the discrepancy of an empty set
of samples to be zero.
&nbsp;
http://en.wikipedia.org/wiki/Low-discrepancy_sequence
http://mathworld.wolfram.com/Discrepancy.html
*/
&nbsp;
<span class="fstat-no" title="function not covered" >function Discrepancy(samples, location_count) {</span>
<span class="cstat-no" title="statement not covered" >	if (!samples) {</span>
<span class="cstat-no" title="statement not covered" >		return 0;</span>
	}
&nbsp;
<span class="cstat-no" title="statement not covered" >	var max_local_discrepancy = 0;</span>
<span class="cstat-no" title="statement not covered" >	var inv_sample_count = 1.0 / samples.length;</span>
<span class="cstat-no" title="statement not covered" >	var locations = [],</span>
		count_less = [],
		count_less_equal = [];
&nbsp;
<span class="cstat-no" title="statement not covered" >	if (location_count) {</span>
		//Generate list of equally spaced locations.
<span class="cstat-no" title="statement not covered" >		var sample_index = 0;</span>
<span class="cstat-no" title="statement not covered" >		for (var i = 0; i &lt; location_count; i++) {</span>
<span class="cstat-no" title="statement not covered" >			var location = i / location_count - 1;</span>
<span class="cstat-no" title="statement not covered" >			locations.push(location);</span>
<span class="cstat-no" title="statement not covered" >			while (sample_index &lt; samples.length &amp;&amp; samples[sample_index] &lt; location)</span>
<span class="cstat-no" title="statement not covered" >				sample_index += 1;</span>
<span class="cstat-no" title="statement not covered" >			count_less.push(sample_index);</span>
<span class="cstat-no" title="statement not covered" >			while (sample_index &lt; samples.length &amp;&amp; samples[sample_index] &lt;= location)</span>
<span class="cstat-no" title="statement not covered" >				sample_index += 1;</span>
<span class="cstat-no" title="statement not covered" >			count_less_equal.push(sample_index);</span>
		}
	} else {
<span class="cstat-no" title="statement not covered" >		if (samples[0] &gt; 0.0) {</span>
<span class="cstat-no" title="statement not covered" >			locations.push(0.0);</span>
<span class="cstat-no" title="statement not covered" >			count_less.push(0);</span>
<span class="cstat-no" title="statement not covered" >			count_less_equal.push(0);</span>
		}
<span class="cstat-no" title="statement not covered" >		for (var i = 0; i &lt; samples.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >			locations.push(samples[i]);</span>
<span class="cstat-no" title="statement not covered" >			count_less.push(i);</span>
<span class="cstat-no" title="statement not covered" >			count_less_equal.push(i + 1);</span>
		}
<span class="cstat-no" title="statement not covered" >		if (samples[-1] &lt; 1.0) {</span>
<span class="cstat-no" title="statement not covered" >			locations.push(1.0);</span>
<span class="cstat-no" title="statement not covered" >			count_less.push(samples.length);</span>
<span class="cstat-no" title="statement not covered" >			count_less_equal.push(samples.length);</span>
		}
	}
&nbsp;
	// Iterate over the intervals defined by any pair of locations.
<span class="cstat-no" title="statement not covered" >	for (var i = 0; i &lt; locations.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >		for (var j = i + 1; j &lt; locations.length; j++) {</span>
			// # Length of interval
<span class="cstat-no" title="statement not covered" >			var length = locations[j] - locations[i];</span>
&nbsp;
			// Local discrepancy for closed interval
<span class="cstat-no" title="statement not covered" >			var count_closed = count_less_equal[j] - count_less[i];</span>
<span class="cstat-no" title="statement not covered" >			var local_discrepancy_closed = Math.abs(count_closed * inv_sample_count - length);</span>
<span class="cstat-no" title="statement not covered" >			var max_local_discrepancy = Math.max(local_discrepancy_closed, max_local_discrepancy);</span>
&nbsp;
			// Local discrepancy for open interval
<span class="cstat-no" title="statement not covered" >			var count_open = count_less[j] - count_less_equal[i];</span>
<span class="cstat-no" title="statement not covered" >			var local_discrepancy_open = Math.abs(count_open * inv_sample_count - length);</span>
<span class="cstat-no" title="statement not covered" >			var max_local_discrepancy = Math.max(local_discrepancy_open, max_local_discrepancy);</span>
		}
	}
<span class="cstat-no" title="statement not covered" >	return max_local_discrepancy;</span>
}
&nbsp;
/*
A discrepancy based metric for measuring timestamp jank.
&nbsp;
TimestampsDiscrepancy quantifies the largest area of jank observed in a series
of timestamps.  Note that this is different from metrics based on the
max_time_interval. For example, the time stamp series A = [0,1,2,3,5,6] and
B = [0,1,2,3,5,7] have the same max_time_interval = 2, but
Discrepancy(B) &gt; Discrepancy(A).
&nbsp;
Two variants of discrepancy can be computed:
&nbsp;
Relative discrepancy is following the original definition of
discrepancy. It characterized the largest area of jank, relative to the
duration of the entire time stamp series.  We normalize the raw results,
because the best case discrepancy for a set of N samples is 1/N (for
equally spaced samples), and we want our metric to report 0.0 in that
case.
&nbsp;
Absolute discrepancy also characterizes the largest area of jank, but its
value wouldn't change (except for imprecisions due to a low
|interval_multiplier|) if additional 'good' intervals were added to an
exisiting list of time stamps.  Its range is [0,inf] and the unit is
milliseconds.
&nbsp;
The time stamp series C = [0,2,3,4] and D = [0,2,3,4,5] have the same
absolute discrepancy, but D has lower relative discrepancy than C.
&nbsp;
|timestamps| may be a list of lists S = [S_1, S_2, ..., S_N], where each
S_i is a time stamp series. In that case, the discrepancy D(S) is:
D(S) = max(D(S_1), D(S_2), ..., D(S_N))
*/
<span class="fstat-no" title="function not covered" >function TimestampsDiscrepancy(timestamps, absolute, location_count) {</span>
<span class="cstat-no" title="statement not covered" >	absolute = typeof absolute === 'undefined' ? true : absolute;</span>
<span class="cstat-no" title="statement not covered" >	location_count = typeof location_count === 'undefined' ? null : location_count;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >	if (!timestamps) {</span>
<span class="cstat-no" title="statement not covered" >		return 0;</span>
	}
&nbsp;
<span class="cstat-no" title="statement not covered" >	var normal = NormalizeSamples(timestamps);</span>
<span class="cstat-no" title="statement not covered" >	var samples = normal.samples,</span>
		sample_scale = normal.scale;
<span class="cstat-no" title="statement not covered" >	var discrepancy = Discrepancy(samples, location_count);</span>
<span class="cstat-no" title="statement not covered" >	var inv_sample_count = 1.0 / samples.length;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >	if (absolute)</span>
<span class="cstat-no" title="statement not covered" >		discrepancy /= sample_scale;</span>
	else
<span class="cstat-no" title="statement not covered" >		discrepancy = Clamp((discrepancy - inv_sample_count) / (1.0 - inv_sample_count));</span>
<span class="cstat-no" title="statement not covered" >	return discrepancy;</span>
}
&nbsp;
module.exports = {
	ArithmeticMean: ArithmeticMean,
	TimestampsDiscrepancy: TimestampsDiscrepancy
};
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Fri Apr 21 2017 07:38:07 GMT+0000 (UTC)</div>
</div>
</body>
</html>
